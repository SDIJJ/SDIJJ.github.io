<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>楠の博客</title>
  
  <subtitle>敲敲代码,聊聊人生</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/SDIJJ/sdijj.github.io/"/>
  <updated>2018-10-24T12:53:32.685Z</updated>
  <id>https://github.com/SDIJJ/sdijj.github.io/</id>
  
  <author>
    <name>Arnold</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java 基础大复习</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/24/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%A4%8D%E4%B9%A0/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/24/Java基础大复习/</id>
    <published>2018-10-24T14:35:37.000Z</published>
    <updated>2018-10-24T12:53:32.685Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!</strong><excerpt in="" index="" |="" 首页摘要=""><br> 复习下Java基础!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-内存分析"><a href="#1-内存分析" class="headerlink" title="1. 内存分析"></a>1. 内存分析</h2><blockquote><p>Java虚拟机的内存可以分为三个区域:栈stack,堆heap,方法区method area</p></blockquote><h3 id="1-1-栈的特点如下"><a href="#1-1-栈的特点如下" class="headerlink" title="1.1.栈的特点如下:"></a>1.1.栈的特点如下:</h3><p><img src="/img/1539781422834.png" alt="1539781422834"></p><h3 id="1-2-堆的特点如下"><a href="#1-2-堆的特点如下" class="headerlink" title="1.2.堆的特点如下:"></a>1.2.堆的特点如下:</h3><p><img src="/img/1539781521522.png" alt="1539781521522"></p><h3 id="1-3-方法区特点如下"><a href="#1-3-方法区特点如下" class="headerlink" title="1,3.方法区特点如下:"></a>1,3.方法区特点如下:</h3><p><img src="/img/1539781599776.png" alt="1539781599776"></p><h3 id="1-4-分析流程"><a href="#1-4-分析流程" class="headerlink" title="1.4.分析流程"></a>1.4.分析流程</h3><p><img src="/img/1539782448438.png" alt="1539782448438">     </p><h2 id="2-Java垃圾回收机制-Garbage-Collection"><a href="#2-Java垃圾回收机制-Garbage-Collection" class="headerlink" title="2. Java垃圾回收机制(Garbage Collection)"></a>2. Java垃圾回收机制(Garbage Collection)</h2><h3 id="2-1-垃圾回收算法"><a href="#2-1-垃圾回收算法" class="headerlink" title="2.1.垃圾回收算法:"></a>2.1.垃圾回收算法:</h3><blockquote><ul><li>引用计数法</li><li>引用可达法(根搜索算法)</li></ul></blockquote><h3 id="2-2-分代垃圾回收机制"><a href="#2-2-分代垃圾回收机制" class="headerlink" title="2.2.分代垃圾回收机制"></a>2.2.分代垃圾回收机制</h3><blockquote><ul><li>年轻代</li><li>年老代</li><li>持久代</li></ul></blockquote><h2 id="3-StringBuilder和StringBuffer的主要区别-StringBuffer方法用synchronized修饰"><a href="#3-StringBuilder和StringBuffer的主要区别-StringBuffer方法用synchronized修饰" class="headerlink" title="3.StringBuilder和StringBuffer的主要区别:StringBuffer方法用synchronized修饰"></a>3.StringBuilder和StringBuffer的主要区别:StringBuffer方法用synchronized修饰</h2><h2 id="3-关于包装类的缓存问题"><a href="#3-关于包装类的缓存问题" class="headerlink" title="3.关于包装类的缓存问题"></a>3.关于包装类的缓存问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Integer d=<span class="number">1234</span>;</span><br><span class="line">INteget d1=<span class="number">1234</span>;</span><br><span class="line">System.out.print(d==d1);     <span class="comment">//结果false;</span></span><br><span class="line">System.out.print(d.equals(d1));    <span class="comment">//结果:true</span></span><br><span class="line"></span><br><span class="line">Integer d2=<span class="number">123</span>;</span><br><span class="line">Ingeger d3=<span class="number">123</span>;</span><br><span class="line">System.out.print(d2==d3);            <span class="comment">//结果:true;        [-128,127]之间数.仍然当基本类型来处理</span></span><br><span class="line">System.out.print(d2.equals(d3));     <span class="comment">//结果:true</span></span><br></pre></td></tr></table></figure><h2 id="4-容器"><a href="#4-容器" class="headerlink" title="4.容器"></a>4.容器</h2><h3 id="4-1-接口层次示意图"><a href="#4-1-接口层次示意图" class="headerlink" title="4.1 接口层次示意图"></a>4.1 接口层次示意图</h3><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\1539949593458.png" alt="1539949593458"></p><blockquote><p>​               Collection                                                Map</p><p>​                /                  \                             |</p><p>​          Set                  List                                         HashMap</p><p>​          |                        |            \</p><p>​         HashSet          ArrayList      LinkedList</p></blockquote><h3 id="4-1-List接口"><a href="#4-1-List接口" class="headerlink" title="4.1 List接口"></a>4.1 List接口</h3><blockquote><p>有序的Collection，此接口的用户可以成对列表中的每个元素的插入位置进行精确的定位，用户可<br>以根据元素的整数索引（在列表中的位置）访问元素，并搜索列表当中的元素。<br>与set不同，列表通常允许重复的元素，更精确的讲列表通常允许满足e1.equals(e2)条件的元素e1，e2并存，并且如果列表本身允许null元素的话，通常他们允许多个null元素。</p></blockquote><h4 id="4-1-1-常用的三个子类"><a href="#4-1-1-常用的三个子类" class="headerlink" title="4.1.1 常用的三个子类"></a>4.1.1 常用的三个子类</h4><blockquote><ul><li><p>ArrayList  : 底层实现原理Object数组   查询快,修改,插入,删除慢</p></li><li><p>LinkedList :   底层实现链表      查询慢.修改,插入,删除快</p></li><li><p>Vector: 线程安全 ,效率低</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;   List list= Collections.synchronizedList(<span class="keyword">new</span> ArrayList());<span class="comment">// 线程安全 </span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h4 id="4-1-2-自己动手模拟ArrayList"><a href="#4-1-2-自己动手模拟ArrayList" class="headerlink" title="4.1.2 自己动手模拟ArrayList"></a>4.1.2 自己动手模拟ArrayList</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自己实现ArrayList</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArrayList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] elements;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyArrayList() &#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyArrayList(<span class="keyword">int</span> space) &#123;</span><br><span class="line">        elements = <span class="keyword">new</span> Object[space];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == elements.length) &#123;</span><br><span class="line">            Object[] newElements = <span class="keyword">new</span> Object[<span class="number">2</span> * size + <span class="number">2</span>];</span><br><span class="line">            System.arraycopy(elements, <span class="number">0</span>, newElements, <span class="number">0</span>, elements.length);</span><br><span class="line">            elements = newElements;</span><br><span class="line">        &#125;</span><br><span class="line">        elements[size++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        <span class="keyword">return</span> elements[index];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        System.arraycopy(elements, index + <span class="number">1</span>, elements, index, elements.length - index - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (get(i).equals(obj))</span><br><span class="line">                remove(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        Object o = elements[index];</span><br><span class="line">        elements[index] = obj;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        System.arraycopy(elements, index, elements, index + <span class="number">1</span>, elements.length - index);</span><br><span class="line">        elements[index] = obj;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rangeCheck</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyArrayList list = <span class="keyword">new</span> MyArrayList();</span><br><span class="line">        list.add(<span class="string">"111"</span>);</span><br><span class="line">        list.add(<span class="string">"222"</span>);</span><br><span class="line">        list.remove(<span class="string">"111"</span>);</span><br><span class="line">        System.out.println(list.size);</span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">        list.set(<span class="number">0</span>, <span class="string">"3333"</span>);</span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line"><span class="comment">//        System.out.println(list.get(14));</span></span><br><span class="line"><span class="comment">//        System.out.println(list.size());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-3自己动手模拟LinkedList"><a href="#4-1-3自己动手模拟LinkedList" class="headerlink" title="4.1.3自己动手模拟LinkedList"></a>4.1.3自己动手模拟LinkedList</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        Node n = <span class="keyword">new</span> Node();</span><br><span class="line">        n.setObj(obj);</span><br><span class="line">        <span class="keyword">if</span> (first == <span class="keyword">null</span>) &#123;</span><br><span class="line">            first = n;</span><br><span class="line">            last = n;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            last.setNextNode(n);</span><br><span class="line">            n.setPreNode(last);</span><br><span class="line">            last = n;</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rangeCheck</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= size || index &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        <span class="keyword">return</span> node(index).getObj();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node n = node(index);</span><br><span class="line">        Node up = n.getPreNode();</span><br><span class="line">        Node down = n.getNextNode();</span><br><span class="line">        up.setNextNode(down);</span><br><span class="line">        down.setPreNode(up);</span><br><span class="line"><span class="comment">//        n.getPreNode().setNextNode(n.getNextNode());</span></span><br><span class="line"><span class="comment">//        n.getNextNode().setPreNode(n.getPreNode());</span></span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (first != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Node temp = first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">                temp = temp.getNextNode();</span><br><span class="line">            <span class="keyword">return</span> temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node();</span><br><span class="line">        newNode.setObj(obj);</span><br><span class="line">        Node n = node(index);</span><br><span class="line">        Node up = n.getPreNode();</span><br><span class="line">        up.setNextNode(newNode);</span><br><span class="line">        newNode.setPreNode(up);</span><br><span class="line">        newNode.setNextNode(n);</span><br><span class="line">        n.setPreNode(newNode);</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyLinkedList list = <span class="keyword">new</span> MyLinkedList();</span><br><span class="line">        list.add(<span class="string">"111"</span>);</span><br><span class="line">        list.add(<span class="string">"222"</span>);</span><br><span class="line">        list.add(<span class="string">"333"</span>);</span><br><span class="line">        list.add(<span class="number">1</span>, <span class="string">"AAA"</span>);</span><br><span class="line">        System.out.println(list.size());</span><br><span class="line">        System.out.println(list.get(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node preNode;</span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">private</span> Node nextNode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Node preNode, Object obj, Node nextNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preNode = preNode;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">        <span class="keyword">this</span>.nextNode = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">getPreNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> preNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPreNode</span><span class="params">(Node preNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preNode = preNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getObj</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObj</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">getNextNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nextNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNextNode</span><span class="params">(Node nextNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nextNode = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2Map"><a href="#4-2Map" class="headerlink" title="4.2Map"></a>4.2Map</h3><blockquote><p>实现原理:数组+链表</p></blockquote><h4 id="4-2-1常用实现类"><a href="#4-2-1常用实现类" class="headerlink" title="4.2.1常用实现类:"></a>4.2.1常用实现类:</h4><blockquote><ul><li>HashMap       快,不安全</li><li>HashTable      慢,安全</li></ul></blockquote><h4 id="4-2-2-HashMap-的简单模拟"><a href="#4-2-2-HashMap-的简单模拟" class="headerlink" title="4.2.2 HashMap 的简单模拟"></a>4.2.2 HashMap 的简单模拟</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LinkedList[] arr = <span class="keyword">new</span> LinkedList[<span class="number">999</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Object key, Object value)</span> </span>&#123;</span><br><span class="line">        MyEntry entry = <span class="keyword">new</span> MyEntry();</span><br><span class="line">        entry.value = value;</span><br><span class="line">        entry.key = key;</span><br><span class="line">        <span class="keyword">int</span> hashKey = key.hashCode() % arr.length;</span><br><span class="line">        <span class="keyword">if</span> (arr[hashKey] == <span class="keyword">null</span>) &#123;</span><br><span class="line">            arr[hashKey] = <span class="keyword">new</span> LinkedList();</span><br><span class="line">            arr[hashKey].add(entry);</span><br><span class="line">            size++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr[hashKey].size(); i++) &#123;</span><br><span class="line">                MyEntry e = ((MyEntry) arr[hashKey].get(i));</span><br><span class="line">                <span class="keyword">if</span> (e.value.equals(value)) &#123;</span><br><span class="line">                    e.value = value;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                arr[hashKey].add(entry);</span><br><span class="line">                size++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hashKey = key.hashCode() % arr.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr[hashKey].size(); i++) &#123;</span><br><span class="line">            MyEntry e = ((MyEntry) arr[hashKey].get(i));</span><br><span class="line">            <span class="keyword">if</span> (e.key.equals(key))</span><br><span class="line">                <span class="keyword">return</span> e.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyMap map = <span class="keyword">new</span> MyMap();</span><br><span class="line">        map.put(<span class="string">"111"</span>, <span class="string">"wewe"</span>);</span><br><span class="line">        map.put(<span class="string">"222"</span>, <span class="string">"wewe1"</span>);</span><br><span class="line">        map.put(<span class="string">"333"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        map.put(<span class="string">"444"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        map.put(<span class="string">"555"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        System.out.println(map.size());</span><br><span class="line">        System.out.println(map.get(<span class="string">"111"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEntry</span> </span>&#123;</span><br><span class="line">    Object key;</span><br><span class="line">    Object value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-如果两个对象内容相同-equals为true-那么他们的hash一定相同"><a href="#4-2-3-如果两个对象内容相同-equals为true-那么他们的hash一定相同" class="headerlink" title="4.2.3 如果两个对象内容相同(equals为true),那么他们的hash一定相同"></a>4.2.3 如果两个对象内容相同(equals为true),那么他们的hash一定相同</h4><h3 id="4-3-Set"><a href="#4-3-Set" class="headerlink" title="4.3 Set"></a>4.3 Set</h3><blockquote><p>HashSet :底层用HashMap实现 </p></blockquote><h3 id="5-线程"><a href="#5-线程" class="headerlink" title="5.线程"></a>5.线程</h3><h4 id="5-1多线程-多线程并行和并发的区别-了解"><a href="#5-1多线程-多线程并行和并发的区别-了解" class="headerlink" title="5.1多线程(多线程并行和并发的区别)(了解)"></a>5.1多线程(多线程并行和并发的区别)(了解)</h4><ul><li>并行就是两个任务同时运行，就是甲任务进行的同时，乙任务也在进行。(需要多核CPU)</li><li>并发是指两个任务都请求运行，而处理器只能按受一个任务，就把这两个任务安排轮流进行，由于时间间隔较短，使人感觉两个任务都在运行。</li><li>比如我跟两个网友聊天，左手操作一个电脑跟甲聊，同时右手用另一台电脑跟乙聊天，这就叫并行。</li><li>如果用一台电脑我先给甲发个消息，然后立刻再给乙发消息，然后再跟甲聊，再跟乙聊。这就叫并发。</li></ul><h4 id="5-2JVM启动是多线程的-至少启动一个主线程和垃圾管理线程"><a href="#5-2JVM启动是多线程的-至少启动一个主线程和垃圾管理线程" class="headerlink" title="5.2JVM启动是多线程的(至少启动一个主线程和垃圾管理线程)"></a>5.2JVM启动是多线程的(至少启动一个主线程和垃圾管理线程)</h4><h4 id="5-3多线程-Java程序运行原理和JVM的启动是多线程的吗-了解"><a href="#5-3多线程-Java程序运行原理和JVM的启动是多线程的吗-了解" class="headerlink" title="5.3多线程(Java程序运行原理和JVM的启动是多线程的吗)(了解)"></a>5.3多线程(Java程序运行原理和JVM的启动是多线程的吗)(了解)</h4><ul><li><p>A:Java程序运行原理</p><ul><li>Java命令会启动java虚拟机，启动JVM，等于启动了一个应用程序，也就是启动了一个进程。该进程会自动启动一个 “主线程” ，然后主线程去调用某个类的 main 方法。</li></ul></li><li><p>B:JVM的启动是多线程的吗</p><ul><li>JVM启动至少启动了垃圾回收线程和主线程，所以是多线程的。</li></ul></li><li><p>继承Thread</p><ul><li>好处是:可以直接使用Thread类中的方法,代码简单</li><li>弊端是:如果已经有了父类,就不能用这种方法</li></ul></li><li>实现Runnable接口<ul><li>好处是:即使自己定义的线程类有了父类也没关系,因为有了父类也可以实现接口,而且接口是可以多实现的</li><li>弊端是:不能直接使用Thread中的方法需要先获取到线程对象后,才能得到Thread的方法,代码复杂</li></ul></li></ul><h4 id="5-4线程匿名内部类的实现"><a href="#5-4线程匿名内部类的实现" class="headerlink" title="5,4线程匿名内部类的实现"></a>5,4线程匿名内部类的实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1111</span>;i++)</span><br><span class="line">                    System.out.println(<span class="string">"aaaa"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">11111</span>; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"b"</span>);</span><br><span class="line">                &#125;            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-4-Sleep-不解释"><a href="#5-4-Sleep-不解释" class="headerlink" title="5.4 Sleep (不解释)"></a>5.4 Sleep (不解释)</h4><h4 id="5-5-守护线程-被人挂掉自己也挂掉"><a href="#5-5-守护线程-被人挂掉自己也挂掉" class="headerlink" title="5.5 守护线程(被人挂掉自己也挂掉)"></a>5.5 守护线程(被人挂掉自己也挂掉)</h4><blockquote><p>比如: QQ正在传输文件(守护线程),关闭QQ程序文件传输马上停止.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">                    System.out.println(<span class="string">"aaaaa"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">                    System.out.println(i + <span class="string">" bb"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-6-join-插队-join执行完其他线程再执行"><a href="#5-6-join-插队-join执行完其他线程再执行" class="headerlink" title="5.6 join(插队)(join执行完其他线程再执行)"></a>5.6 join(插队)(join执行完其他线程再执行)</h4><ul><li>join(), 当前线程暂停, 等待指定的线程执行结束后, 当前线程再继续</li><li>join(int), 可以等待指定的毫秒之后继续(插队int毫秒)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo06</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span>  Thread t1=<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">30</span> ; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"线程111"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t2=<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;             </span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">30</span> ; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(i&gt;<span class="number">10</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            t1.join();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">"线程222"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         t1.start();</span><br><span class="line">         t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-7-yield-礼让线程"><a href="#5-7-yield-礼让线程" class="headerlink" title="5.7 yield(礼让线程)"></a>5.7 yield(礼让线程)</h4><blockquote><p>让其他线程先执行</p></blockquote><h4 id="5-8优先级-任然交替执行线程-但是优先级高的线程执行次数更多"><a href="#5-8优先级-任然交替执行线程-但是优先级高的线程执行次数更多" class="headerlink" title="5.8优先级(任然交替执行线程,但是优先级高的线程执行次数更多)"></a>5.8优先级(任然交替执行线程,但是优先级高的线程执行次数更多)</h4><blockquote><p>setPriority(1~10);</p></blockquote><h4 id="5-9Synchronized"><a href="#5-9Synchronized" class="headerlink" title="5.9Synchronized"></a>5.9Synchronized</h4><blockquote><ul><li><figure class="highlight plain"><figcaption><span>&#125;  ```      :同步代码块,可以传任意对象,但是必须是同一个对象</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&gt; * ``` public Synchronized void method()  ```     :非静态的同步所对象是this</span><br><span class="line">&gt; * ``` public static Synchronized void method()``` : 静态的同步方法使用的所对象是字节码对象(类名.class)</span><br><span class="line"></span><br><span class="line">#### 5.10死锁(哲学家进餐问题)</span><br><span class="line"></span><br><span class="line">&gt; 为了避免死锁:尽量Synchronized 嵌套</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">package thread;</span><br><span class="line"></span><br><span class="line">public class Demo07 &#123;</span><br><span class="line">    private static Object s2 = &quot;筷子2&quot;;</span><br><span class="line">    private static Object s1 = &quot;筷子1&quot;;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    synchronized (s1) &#123;</span><br><span class="line">                        System.out.println(getName() + &quot;:拿到s1&quot;);</span><br><span class="line">                        synchronized (s2) &#123;</span><br><span class="line">                            System.out.println(getName() + &quot;:拿到s2   哲学家开始吃饭&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    synchronized (s2) &#123;</span><br><span class="line">                        System.out.println(getName() + &quot;:拿到s2&quot;);</span><br><span class="line">                        synchronized (s1) &#123;</span><br><span class="line">                            System.out.println(getName() + &quot;:拿到s1   哲学家开始吃饭&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h4 id="5-11-三种单例设计模式"><a href="#5-11-三种单例设计模式" class="headerlink" title="5.11 三种单例设计模式"></a>5.11 三种单例设计模式</h4><blockquote><p>jdk中单例模式的类:Runtime,Timer</p></blockquote><h4 id="5-12线程之间的通讯"><a href="#5-12线程之间的通讯" class="headerlink" title="5.12线程之间的通讯"></a>5.12线程之间的通讯</h4><blockquote><ul><li>wait() 当前线程等待</li><li>notify() 随机唤醒一个等待的线程</li><li>notifyAll()   唤醒所有等待线程</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo09</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        test t = <span class="keyword">new</span> test();</span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">                    t.method();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line"></span><br><span class="line">                    t.method2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag != <span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"111111"</span>);</span><br><span class="line">        flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag != <span class="keyword">false</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"222222"</span>);</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-12ReentrantLock"><a href="#5-12ReentrantLock" class="headerlink" title="5.12ReentrantLock"></a>5.12ReentrantLock</h4><h4 id="5-13-线程组"><a href="#5-13-线程组" class="headerlink" title="5.13 线程组"></a>5.13 线程组</h4><h4 id="5-14线程的五种状态"><a href="#5-14线程的五种状态" class="headerlink" title="5.14线程的五种状态"></a>5.14线程的五种状态</h4><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\1540126331767.png" alt="1540126331767"></p><h4 id="5-15线程池"><a href="#5-15线程池" class="headerlink" title="5.15线程池"></a>5.15线程池</h4><blockquote><p>创建线程时需要耗费许多资源,线程池可以先创建几个线程,其他线程需要就过来用</p><p> <strong>ExecutorService pool = Executors.newFixedThreadPool(2);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo10</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService pool = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.shutdownNow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-15-Callable"><a href="#5-15-Callable" class="headerlink" title="5.15 Callable"></a>5.15 Callable</h4><blockquote><p>线程的第三种实现方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建线程池对象</span></span><br><span class="line">ExecutorService pool = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以执行Runnable对象或者Callable对象代表的线程</span></span><br><span class="line">Future&lt;Integer&gt; f1 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">100</span>));</span><br><span class="line">Future&lt;Integer&gt; f2 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">200</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// V get()</span></span><br><span class="line">Integer i1 = f1.get();</span><br><span class="line">Integer i2 = f2.get();</span><br><span class="line"></span><br><span class="line">System.out.println(i1);</span><br><span class="line">System.out.println(i2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束</span></span><br><span class="line">pool.shutdown();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyCallable</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.number = number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt;= number; x++) &#123;</span><br><span class="line">sum += x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-反射"><a href="#6-反射" class="headerlink" title="6.反射"></a>6.反射</h3><h4 id="6-1-获取Class的三种方式"><a href="#6-1-获取Class的三种方式" class="headerlink" title="6.1 获取Class的三种方式"></a>6.1 获取Class的三种方式</h4><blockquote><ul><li>根据类名</li><li>根据class</li><li>根据对象的实例</li></ul></blockquote><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\154018482338.png" alt="154018482338"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        Class clazz1 = Class.forName(<span class="string">"reflect.Student"</span>);</span><br><span class="line">        Class clazz2 = Student.class;</span><br><span class="line">        Student s = <span class="keyword">new</span> Student();</span><br><span class="line">        Class clazz3 = s.getClass();</span><br><span class="line">        System.out.println(clazz1 == clazz2);</span><br><span class="line">        System.out.println(clazz1 == clazz3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-2-反射-配置-实现动态调用"><a href="#6-2-反射-配置-实现动态调用" class="headerlink" title="6.2 反射+配置 实现动态调用"></a>6.2 反射+配置 实现动态调用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reflect.Orange</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"E:\\idea_workSpace\\java_review\\src\\fruit.properties"</span>));</span><br><span class="line">        Class clazz = Class.forName(br.readLine());</span><br><span class="line"></span><br><span class="line">        zzj z = <span class="keyword">new</span> zzj();</span><br><span class="line">        z.run((Fruit) clazz.newInstance());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zzj</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Fruit r)</span> </span>&#123;</span><br><span class="line">        r.juice();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"苹果汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Orange</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"橘子汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Banana</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"香蕉汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-3-反射可以拿到私有的属性-方法"><a href="#6-3-反射可以拿到私有的属性-方法" class="headerlink" title="6.3 反射可以拿到私有的属性,方法"></a>6.3 反射可以拿到私有的属性,方法</h4><h4 id="6-4-使用反射对泛型进行擦除"><a href="#6-4-使用反射对泛型进行擦除" class="headerlink" title="6.4 使用反射对泛型进行擦除"></a>6.4 使用反射对泛型进行擦除</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="number">111</span>);</span><br><span class="line">        list.add(<span class="number">222</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        Class clazz = Class.forName(<span class="string">"java.util.ArrayList"</span>);</span><br><span class="line">        Method method = clazz.getMethod(<span class="string">"add"</span>, Object.class);</span><br><span class="line">        method.invoke(list, <span class="string">"aaaa "</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-jdk-1-8后接口可以创建普通可执行方法-也可以创建静态方法"><a href="#6-4-jdk-1-8后接口可以创建普通可执行方法-也可以创建静态方法" class="headerlink" title="6.4 jdk 1,8后接口可以创建普通可执行方法,也可以创建静态方法"></a>6.4 jdk 1,8后接口可以创建普通可执行方法,也可以创建静态方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Inter() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;.print();</span><br><span class="line">        Inter.print2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Inter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"jdk1.8 新特性"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"jdk1.8 lllllllllllllll"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-Socket-码头"><a href="#7-Socket-码头" class="headerlink" title="7.Socket(码头)"></a>7.Socket(码头)</h3><h4 id="7-1-Socket进行消息通信"><a href="#7-1-Socket进行消息通信" class="headerlink" title="7.1 Socket进行消息通信"></a>7.1 Socket进行消息通信</h4><blockquote><p>1.发送Send</p><ul><li>创建DatagramSocket, 随机端口号</li><li>创建DatagramPacket, 指定数据, 长度, 地址, 端口</li><li>使用DatagramSocket发送DatagramPacket</li><li>关闭DatagramSocket</li></ul><p>2.接收Receive</p><ul><li>创建DatagramSocket, 指定端口号</li><li>创建DatagramPacket, 指定数组, 长度</li><li>使用DatagramSocket接收DatagramPacket</li><li>关闭DatagramSocket</li><li>从DatagramPacket中获取数据</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.crypto.Data;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1.发送Send</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - 创建DatagramSocket, 随机端口号</span></span><br><span class="line"><span class="comment"> - 创建DatagramPacket, 指定数据, 长度, 地址, 端口</span></span><br><span class="line"><span class="comment"> - 使用DatagramSocket发送DatagramPacket</span></span><br><span class="line"><span class="comment"> - 关闭DatagramSocket</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Send</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        String msg=<span class="string">"正在学习socket编程"</span>;</span><br><span class="line">        DatagramSocket socket =<span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        DatagramPacket  packet=<span class="keyword">new</span></span><br><span class="line">                DatagramPacket(msg.getBytes(),msg.getBytes().length,</span><br><span class="line">                InetAddress.getLocalHost(),<span class="number">8888</span>);</span><br><span class="line">        socket.send(packet);</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> socket;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2.接收Receive</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - 创建DatagramSocket, 指定端口号</span></span><br><span class="line"><span class="comment"> - 创建DatagramPacket, 指定数组, 长度</span></span><br><span class="line"><span class="comment"> - 使用DatagramSocket接收DatagramPacket</span></span><br><span class="line"><span class="comment"> - 关闭DatagramSocket</span></span><br><span class="line"><span class="comment"> - 从DatagramPacket中获取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receive</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[] args)</span> <span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        <span class="keyword">byte</span> [] arr=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        DatagramSocket socket=<span class="keyword">new</span> DatagramSocket(<span class="number">8888</span>);</span><br><span class="line">        DatagramPacket packet=<span class="keyword">new</span> DatagramPacket(arr,arr.length);</span><br><span class="line">        socket.receive(packet);</span><br><span class="line">        <span class="keyword">byte</span> [] arr2=packet.getData();</span><br><span class="line">        <span class="keyword">int</span> len=packet.getLength();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> java.lang.String(arr2,<span class="number">0</span>,len));</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-异常-Exception"><a href="#8-异常-Exception" class="headerlink" title="8.异常(Exception)"></a>8.异常(Exception)</h3><p>﻿#### 8.01_异常(异常的概述和分类)</p><ul><li>A:异常的概述<ul><li>异常就是Java程序在运行过程中出现的错误。</li></ul></li><li>B:异常的分类<ul><li>通过API查看Throwable</li><li>Error<ul><li>服务器宕机,数据库崩溃等</li></ul></li><li>Exception<br>C:异常的继承体系</li><li>Throwable<ul><li>Error    </li><li>Exception<ul><li>RuntimeException</li></ul></li></ul></li></ul></li></ul><h4 id="8-02-异常-JVM默认是如何处理异常的"><a href="#8-02-异常-JVM默认是如何处理异常的" class="headerlink" title="8.02_异常(JVM默认是如何处理异常的)"></a>8.02_异常(JVM默认是如何处理异常的)</h4><ul><li>A:JVM默认是如何处理异常的<ul><li>main函数收到这个问题时,有两种处理方式:</li><li>a:自己将该问题处理,然后继续运行</li><li>b:自己没有针对的处理方式,只有交给调用main的jvm来处理</li><li>jvm有一个默认的异常处理机制,就将该异常进行处理.</li><li>并将该异常的名称,异常的信息.异常出现的位置打印在了控制台上,同时将程序停止运行</li></ul></li><li>B:案例演示<ul><li>JVM默认如何处理异常</li></ul></li></ul><h4 id="8-03-异常-try…catch的方式处理异常1"><a href="#8-03-异常-try…catch的方式处理异常1" class="headerlink" title="8.03_异常(try…catch的方式处理异常1)"></a>8.03_异常(try…catch的方式处理异常1)</h4><ul><li>A:异常处理的两种方式<ul><li>a:try…catch…finally<ul><li>try catch</li><li>try catch finally</li><li>try finally </li></ul></li><li>b:throws</li></ul></li><li>B:try…catch处理异常的基本格式<ul><li>try…catch…finally</li></ul></li><li>C:案例演示<ul><li>try…catch的方式处理1个异常</li></ul></li></ul><h4 id="8-04-异常-try…catch的方式处理异常2"><a href="#8-04-异常-try…catch的方式处理异常2" class="headerlink" title="8.04_异常(try…catch的方式处理异常2)"></a>8.04_异常(try…catch的方式处理异常2)</h4><ul><li>A:案例演示<ul><li>try…catch的方式处理多个异常</li><li>JDK7以后处理多个异常的方式及注意事项</li></ul></li></ul><h4 id="8-05-异常-编译期异常和运行期异常的区别"><a href="#8-05-异常-编译期异常和运行期异常的区别" class="headerlink" title="8.05_异常(编译期异常和运行期异常的区别)"></a>8.05_异常(编译期异常和运行期异常的区别)</h4><ul><li><p>A:编译期异常和运行期异常的区别</p><ul><li>Java中的异常被分为两大类：编译时异常和运行时异常。</li><li><p>所有的RuntimeException类及其子类的实例被称为运行时异常，其他的异常就是编译时异常</p></li><li><p>编译时异常</p><ul><li>Java程序必须显示处理，否则程序就会发生错误，无法通过编译</li></ul></li><li>运行时异常<ul><li>无需显示处理，也可以和编译时异常一样处理</li></ul></li></ul></li><li>B:案例演示<ul><li>编译期异常和运行期异常的区别</li></ul></li></ul><h4 id="8-06-异常-Throwable的几个常见方法"><a href="#8-06-异常-Throwable的几个常见方法" class="headerlink" title="8.06_异常(Throwable的几个常见方法)"></a>8.06_异常(Throwable的几个常见方法)</h4><ul><li>A:Throwable的几个常见方法<ul><li>a:getMessage()<ul><li>获取异常信息，返回字符串。</li></ul></li><li>b:toString()<ul><li>获取异常类名和异常信息，返回字符串。</li></ul></li><li>c:printStackTrace()<ul><li>获取异常类名和异常信息，以及异常出现在程序中的位置。返回值void。</li></ul></li></ul></li><li>B:案例演示<ul><li>Throwable的几个常见方法的基本使用</li></ul></li></ul><h4 id="8-07-异常-throws的方式处理异常"><a href="#8-07-异常-throws的方式处理异常" class="headerlink" title="8.07_异常(throws的方式处理异常)"></a>8.07_异常(throws的方式处理异常)</h4><ul><li>A:throws的方式处理异常<ul><li>定义功能方法时，需要把出现的问题暴露出来让调用者去处理。</li><li>那么就通过throws在方法上标识。</li></ul></li><li>B:案例演示<ul><li>举例分别演示编译时异常和运行时异常的抛出</li></ul></li></ul><h4 id="8-08-异常-throw的概述以及和throws的区别"><a href="#8-08-异常-throw的概述以及和throws的区别" class="headerlink" title="8.08_异常(throw的概述以及和throws的区别)"></a>8.08_异常(throw的概述以及和throws的区别)</h4><ul><li>A:throw的概述<ul><li>在功能方法内部出现某种情况，程序不能继续运行，需要进行跳转时，就用throw把异常对象抛出。</li></ul></li><li>B:案例演示    <ul><li>分别演示编译时异常对象和运行时异常对象的抛出</li></ul></li><li>C:throws和throw的区别<ul><li>a:throws<ul><li>用在方法声明后面，跟的是异常类名</li><li>可以跟多个异常类名，用逗号隔开</li><li>表示抛出异常，由该方法的调用者来处理</li></ul></li><li>b:throw<ul><li>用在方法体内，跟的是异常对象名</li><li>只能抛出一个异常对象名</li><li>表示抛出异常，由方法体内的语句处理</li></ul></li></ul></li></ul><h4 id="8-09-异常-finally关键字的特点及作用"><a href="#8-09-异常-finally关键字的特点及作用" class="headerlink" title="8.09_异常(finally关键字的特点及作用)"></a>8.09_异常(finally关键字的特点及作用)</h4><ul><li>A:finally的特点<ul><li>被finally控制的语句体一定会执行</li><li>特殊情况：在执行到finally之前jvm退出了(比如System.exit(0))</li></ul></li><li>B:finally的作用<ul><li>用于释放资源，在IO流操作和数据库操作中会见到</li></ul></li><li>C:案例演示<ul><li>finally关键字的特点及作用</li></ul></li></ul><h4 id="8-10-异常-finally关键字的面试题"><a href="#8-10-异常-finally关键字的面试题" class="headerlink" title="8.10_异常(finally关键字的面试题)"></a>8.10_异常(finally关键字的面试题)</h4><ul><li>A:面试题1<ul><li>final,finally和finalize的区别</li></ul></li><li>B:面试题2<ul><li>如果catch里面有return语句，请问finally的代码还会执行吗?如果会，请问是在return前还是return后。</li></ul></li></ul><h4 id="8-11-异常-自定义异常概述和基本使用"><a href="#8-11-异常-自定义异常概述和基本使用" class="headerlink" title="8.11_异常(自定义异常概述和基本使用)"></a>8.11_异常(自定义异常概述和基本使用)</h4><ul><li>A:为什么需要自定义异常<ul><li>举例：人的年龄</li></ul></li><li>B:自定义异常概述<ul><li>继承自Exception</li><li>继承自RuntimeException</li></ul></li><li>C:案例演示<ul><li>自定义异常的基本使用</li></ul></li></ul><h4 id="8-12-异常-异常的注意事项及如何使用异常处理"><a href="#8-12-异常-异常的注意事项及如何使用异常处理" class="headerlink" title="8.12_异常(异常的注意事项及如何使用异常处理)"></a>8.12_异常(异常的注意事项及如何使用异常处理)</h4><ul><li>A:异常注意事项<ul><li>a:子类重写父类方法时，子类的方法必须抛出相同的异常或父类异常的子类。(父亲坏了,儿子不能比父亲更坏)</li><li>b:如果父类抛出了多个异常,子类重写父类时,只能抛出相同的异常或者是他的子集,子类不能抛出父类没有的异常</li><li>c:如果被重写的方法没有异常抛出,那么子类的方法绝对不可以抛出异常,如果子类方法内有异常发生,那么子类只能try,不能throws</li></ul></li><li><p>B:如何使用异常处理</p><ul><li>原则:如果该功能内部可以将问题处理,用try,如果处理不了,交由调用者处理,这是用throws</li><li><p>区别:</p><ul><li>后续程序需要继续运行就try</li><li>后续程序不需要继续运行就throws</li></ul></li><li><p>如果JDK没有提供对应的异常，需要自定义异常。</p></li></ul></li></ul><h4 id="8-13-异常-练习"><a href="#8-13-异常-练习" class="headerlink" title="8.13_异常(练习)"></a>8.13_异常(练习)</h4><ul><li>键盘录入一个int类型的整数,对其求二进制表现形式<ul><li>如果录入的整数过大,给予提示,录入的整数过大请重新录入一个整数BigInteger<ul><li>如果录入的是小数,给予提示,录入的是小数,请重新录入一个整数</li><li>如果录入的是其他字符,给予提示,录入的是非法字符,请重新录入一个整数</li></ul></li></ul></li></ul><h3 id="9-File"><a href="#9-File" class="headerlink" title="9.File"></a>9.File</h3><h4 id="9-1-File类-File类的概述和构造方法"><a href="#9-1-File类-File类的概述和构造方法" class="headerlink" title="9.1_File类(File类的概述和构造方法)"></a>9.1_File类(File类的概述和构造方法)</h4><ul><li>A:File类的概述<ul><li>File更应该叫做一个路径<ul><li>文件路径或者文件夹路径  </li><li>路径分为绝对路径和相对路径</li><li>绝对路径是一个固定的路径,从盘符开始</li><li>相对路径相对于某个位置,在eclipse下是指当前项目下,在dos下</li></ul></li><li>查看API指的是当前路径</li><li>文件和目录路径名的抽象表示形式</li></ul></li><li>B:构造方法<ul><li>File(String pathname)：根据一个路径得到File对象</li><li>File(String parent, String child):根据一个目录和一个子文件/目录得到File对象</li><li>File(File parent, String child):根据一个父File对象和一个子文件/目录得到File对象</li></ul></li><li>C:案例演示<ul><li>File类的构造方法</li></ul></li></ul><h4 id="9-2-File类-File类的创建功能"><a href="#9-2-File类-File类的创建功能" class="headerlink" title="9.2_File类(File类的创建功能)"></a>9.2_File类(File类的创建功能)</h4><ul><li>A:创建功能<ul><li>public boolean createNewFile():创建文件 如果存在这样的文件，就不创建了</li><li>public boolean mkdir():创建文件夹 如果存在这样的文件夹，就不创建了</li><li>public boolean mkdirs():创建文件夹,如果父文件夹不存在，会帮你创建出来</li></ul></li><li><p>B:案例演示</p><ul><li><p>File类的创建功能</p></li><li><p>注意事项：</p><ul><li>如果你创建文件或者文件夹忘了写盘符路径，那么，默认在项目路径下。</li></ul></li></ul></li></ul><h4 id="9-3-File类-File类的重命名和删除功能"><a href="#9-3-File类-File类的重命名和删除功能" class="headerlink" title="9.3_File类(File类的重命名和删除功能)"></a>9.3_File类(File类的重命名和删除功能)</h4><ul><li>A:重命名和删除功能<ul><li>public boolean renameTo(File dest):把文件重命名为指定的文件路径</li><li>public boolean delete():删除文件或者文件夹</li></ul></li><li>B:重命名注意事项<ul><li>如果路径名相同，就是改名。</li><li>如果路径名不同，就是改名并剪切。</li></ul></li><li>C:删除注意事项：<ul><li>Java中的删除不走回收站。</li><li>要删除一个文件夹，请注意该文件夹内不能包含文件或者文件夹</li></ul></li></ul><h4 id="9-4-File类-File类的判断功能"><a href="#9-4-File类-File类的判断功能" class="headerlink" title="9.4_File类(File类的判断功能)"></a>9.4_File类(File类的判断功能)</h4><ul><li>A:判断功能<ul><li>public boolean isDirectory():判断是否是目录</li><li>public boolean isFile():判断是否是文件</li><li>public boolean exists():判断是否存在</li><li>public boolean canRead():判断是否可读</li><li>public boolean canWrite():判断是否可写</li><li>public boolean isHidden():判断是否隐藏</li></ul></li><li>B:案例演示<ul><li>File类的判断功能</li></ul></li></ul><h4 id="9-5-File类-File类的获取功能"><a href="#9-5-File类-File类的获取功能" class="headerlink" title="9.5_File类(File类的获取功能)"></a>9.5_File类(File类的获取功能)</h4><ul><li>A:获取功能<ul><li>public String getAbsolutePath()：获取绝对路径</li><li>public String getPath():获取路径</li><li>public String getName():获取名称</li><li>public long length():获取长度。字节数</li><li>public long lastModified():获取最后一次的修改时间，毫秒值</li><li>public String[] list():获取指定目录下的所有文件或者文件夹的名称数组</li><li>public File[] listFiles():获取指定目录下的所有文件或者文件夹的File数组 </li></ul></li><li>B:案例演示<ul><li>File类的获取功能</li></ul></li></ul><h4 id="9-6-File类-输出指定目录下指定后缀的文件名"><a href="#9-6-File类-输出指定目录下指定后缀的文件名" class="headerlink" title="9.6_File类(输出指定目录下指定后缀的文件名)"></a>9.6_File类(输出指定目录下指定后缀的文件名)</h4><ul><li>A:案例演示<ul><li>需求：判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出该文件名称</li></ul></li></ul><h4 id="9-7-File类-文件名称过滤器的概述及使用"><a href="#9-7-File类-文件名称过滤器的概述及使用" class="headerlink" title="9.7_File类(文件名称过滤器的概述及使用)"></a>9.7_File类(文件名称过滤器的概述及使用)</h4><ul><li>A:文件名称过滤器的概述<ul><li>public String[] list(FilenameFilter filter)</li><li>public File[] listFiles(FileFilter filter)</li></ul></li><li>B:文件名称过滤器的使用<ul><li>需求：判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出该文件名称</li></ul></li><li>C:源码分析<ul><li>带文件名称过滤器的list()方法的源码</li></ul></li></ul><h3 id="10-IO"><a href="#10-IO" class="headerlink" title="10.IO"></a>10.IO</h3><h4 id="10-01-IO流-IO流概述及其分类"><a href="#10-01-IO流-IO流概述及其分类" class="headerlink" title="10.01_IO流(IO流概述及其分类)"></a>10.01_IO流(IO流概述及其分类)</h4><ul><li>1.概念<ul><li>IO流用来处理设备之间的数据传输</li><li>Java对数据的操作是通过流的方式</li><li>Java用于操作流的类都在IO包中</li><li>流按流向分为两种：输入流，输出流。</li><li>流按操作类型分为两种：<ul><li>字节流 : 字节流可以操作任何数据,因为在计算机中任何数据都是以字节的形式存储的</li><li>字符流 : 字符流只能操作纯字符数据，比较方便。</li></ul></li></ul></li><li>2.IO流常用父类<ul><li>字节流的抽象父类：<ul><li>InputStream </li><li>OutputStream</li></ul></li><li>字符流的抽象父类：<ul><li>Reader </li><li>Writer        </li></ul></li></ul></li><li>3.IO程序书写<ul><li>使用前，导入IO包中的类</li><li>使用时，进行IO异常处理</li><li>使用后，释放资源</li></ul></li></ul><h4 id="10-02-IO流-FileInputStream"><a href="#10-02-IO流-FileInputStream" class="headerlink" title="10.02_IO流(FileInputStream)"></a>10.02_IO流(FileInputStream)</h4><ul><li>read()一次读取一个字节</li><li> FileInputStream fis = new FileInputStream(“aaa.txt”);    //创建一个文件输入流对象,并关联aaa.txt<br> ​    int b;                                                    //定义变量,记录每次读到的字节<br> ​    while((b = fis.read()) != -1) {                            //将每次读到的字节赋值给b并判断是否是-1<br> ​        System.out.println(b);                                //打印每一个字节<br> ​    }<br> ​<br> ​    fis.close();                                            //关闭流释放资源</li></ul><h4 id="10-03-IO流-read-方法返回值为什么是int"><a href="#10-03-IO流-read-方法返回值为什么是int" class="headerlink" title="10.03_IO流(read()方法返回值为什么是int)"></a>10.03_IO流(read()方法返回值为什么是int)</h4><ul><li>read()方法读取的是一个字节,为什么返回是int,而不是byte</li><li>因为字节输入流可以操作任意类型的文件,比如图片音频等,这些文件底层都是以二进制形式的存储的,如果每次读取都返回byte,有可能在读到中间的时候遇到111111111<br> ​    那么这11111111是byte类型的-1,我们的程序是遇到-1就会停止不读了,后面的数据就读不到了,所以在读取的时候用int类型接收,如果11111111会在其前面补上<br> ​    24个0凑足4个字节,那么byte类型的-1就变成int类型的255了这样可以保证整个数据读完,而结束标记的-1就是int类型<h4 id="10-04-IO流-FileOutputStream"><a href="#10-04-IO流-FileOutputStream" class="headerlink" title="10.04_IO流(FileOutputStream)"></a>10.04_IO流(FileOutputStream)</h4></li><li>write()一次写出一个字节</li><li>FileOutputStream fos = new FileOutputStream(“bbb.txt”);    //如果没有bbb.txt,会创建出一个<br> ​    //fos.write(97);                        //虽然写出的是一个int数,但是在写出的时候会将前面的24个0去掉,所以写出的是一个byte<br> ​    fos.write(98);<br> ​    fos.write(99);<br> ​    fos.close();</li></ul><h4 id="10-05-IO流-FileOutputStream追加"><a href="#10-05-IO流-FileOutputStream追加" class="headerlink" title="10.05_IO流(FileOutputStream追加)"></a>10.05_IO流(FileOutputStream追加)</h4><ul><li><p>A:案例演示</p><ul><li>FileOutputStream的构造方法写出数据如何实现数据的追加写入</li></ul></li><li> FileOutputStream fos = new FileOutputStream(“bbb.txt”,true);    //如果没有bbb.txt,会创建出一个<br> ​    //fos.write(97);                        //虽然写出的是一个int数,但是在写出的时候会将前面的24个0去掉,所以写出的一个byte<br> ​    fos.write(98);<br> ​    fos.write(99);<br> ​    fos.close();</li></ul><h4 id="10-06-IO流-拷贝图片"><a href="#10-06-IO流-拷贝图片" class="headerlink" title="10.06_IO流(拷贝图片)"></a>10.06_IO流(拷贝图片)</h4><ul><li>FileInputStream读取</li><li><p>FileOutputStream写出</p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);    //创建输入流对象,关联致青春.mp3<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);//创建输出流对象,关联copy.mp3<br> ​<br> ​    int b;<br> ​    while((b = fis.read()) != -1) {<br> ​        fos.write(b);<br> ​    }<br> ​    </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="10-07-IO流-拷贝音频文件画原理图"><a href="#10-07-IO流-拷贝音频文件画原理图" class="headerlink" title="10.07_IO流(拷贝音频文件画原理图)"></a>10.07_IO流(拷贝音频文件画原理图)</h4><ul><li>A:案例演示<ul><li>字节流一次读写一个字节复制音频</li></ul></li><li>弊端:效率太低</li></ul><h4 id="10-08-IO流-字节数组拷贝之available-方法"><a href="#10-08-IO流-字节数组拷贝之available-方法" class="headerlink" title="10.08_IO流(字节数组拷贝之available()方法)"></a>10.08_IO流(字节数组拷贝之available()方法)</h4><ul><li>A:案例演示<ul><li>int read(byte[] b):一次读取一个字节数组</li><li>write(byte[] b):一次写出一个字节数组</li><li>available()获取读的文件所有的字节个数</li></ul></li><li><p>弊端:有可能会内存溢出 </p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);<br> ​    byte[] arr = new byte[fis.available()];                    //根据文件大小做一个字节数组<br> ​    fis.read(arr);                                            //将文件上的所有字节读取到数组中<br> ​    fos.write(arr);                                            //将数组中的所有字节一次写到了文件上<br> ​    fis.close();<br> ​    fos.close();<br> ​    </p><h4 id="10-09-IO流-定义小数组"><a href="#10-09-IO流-定义小数组" class="headerlink" title="10.09_IO流(定义小数组)"></a>10.09_IO流(定义小数组)</h4></li><li>write(byte[] b)</li><li><p>write(byte[] b, int off, int len)写出有效的字节个数</p><p>​    </p><h4 id="10-10-IO流-定义小数组的标准格式"><a href="#10-10-IO流-定义小数组的标准格式" class="headerlink" title="10.10_IO流(定义小数组的标准格式)"></a>10.10_IO流(定义小数组的标准格式)</h4></li><li><p>A:案例演示</p><ul><li><p>字节流一次读写一个字节数组复制图片和视频<br>FileInputStream fis = new FileInputStream(“致青春.mp3”);<br>FileOutputStream fos = new FileOutputStream(“copy.mp3”);<br>int len;<br>byte[] arr = new byte[1024 * 8];                    //自定义字节数组</p><p>while((len = fis.read(arr)) != -1) {<br>​    //fos.write(arr);<br>​    fos.write(arr, 0, len);                            //写出字节数组写出有效个字节个数<br>}</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="10-11-IO流-BufferedInputStream和BufferOutputStream拷贝"><a href="#10-11-IO流-BufferedInputStream和BufferOutputStream拷贝" class="headerlink" title="10.11_IO流(BufferedInputStream和BufferOutputStream拷贝)"></a>10.11_IO流(BufferedInputStream和BufferOutputStream拷贝)</h4></li></ul></li><li>A:缓冲思想<ul><li>字节流一次读写一个数组的速度明显比一次读写一个字节的速度快很多，</li><li>这是加入了数组这样的缓冲区效果，java本身在设计的时候，</li><li>也考虑到了这样的设计思想(装饰设计模式后面讲解)，所以提供了字节缓冲区流</li></ul></li><li>B.BufferedInputStream<ul><li>BufferedInputStream内置了一个缓冲区(数组)</li><li>从BufferedInputStream中读取一个字节时</li><li>BufferedInputStream会一次性从文件中读取8192个, 存在缓冲区中, 返回给程序一个</li><li>程序再次读取时, 就不用找文件了, 直接从缓冲区中获取</li><li>直到缓冲区中所有的都被使用过, 才重新从文件中读取8192个</li></ul></li><li>C.BufferedOutputStream<ul><li>BufferedOutputStream也内置了一个缓冲区(数组)</li><li>程序向流中写出字节时, 不会直接写到文件, 先写到缓冲区中</li><li>直到缓冲区写满, BufferedOutputStream才会把缓冲区中的数据一次性写到文件里</li></ul></li><li><p>D.拷贝的代码 </p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);            //创建文件输入流对象,关联致青春.mp3<br> ​    BufferedInputStream bis = new BufferedInputStream(fis);            //创建缓冲区对fis装饰<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);        //创建输出流对象,关联copy.mp3<br> ​    BufferedOutputStream bos = new BufferedOutputStream(fos);        //创建缓冲区对fos装饰<br> ​<br> ​    int b;<br> ​    while((b = bis.read()) != -1) {<br> ​        bos.write(b);<br> ​    }<br> ​<br> ​    bis.close();                        //只关装饰后的对象即可<br> ​    bos.close();</p></li><li><p>E.小数组的读写和带Buffered的读取哪个更快?</p><ul><li>定义小数组如果是8192个字节大小和Buffered比较的话</li><li>定义小数组会略胜一筹,因为读和写操作的是同一个数组</li><li>而Buffered操作的是两个数组</li></ul></li></ul><h4 id="10-12-IO流-flush和close方法的区别"><a href="#10-12-IO流-flush和close方法的区别" class="headerlink" title="10.12_IO流(flush和close方法的区别)"></a>10.12_IO流(flush和close方法的区别)</h4><ul><li><p>flush()方法</p><ul><li>用来刷新缓冲区的,刷新后可以再次写出 </li></ul></li><li><p>close()方法</p><ul><li><p>用来关闭流释放资源的的,如果是带缓冲区的流对象的close()方法,不但会关闭流,还会再关闭流之前刷新缓冲区,关闭后不能再写出 </p><h4 id="10-13-IO流-字节流读写中文"><a href="#10-13-IO流-字节流读写中文" class="headerlink" title="10.13_IO流(字节流读写中文)"></a>10.13_IO流(字节流读写中文)</h4></li></ul></li><li><p>字节流读取中文的问题</p><ul><li>字节流在读中文的时候有可能会读到半个中文,造成乱码 </li></ul></li><li>字节流写出中文的问题<ul><li>字节流直接操作的字节,所以写出中文必须将字符串转换成字节数组 </li><li>写出回车换行 write(“\r\n”.getBytes());</li></ul></li></ul><h4 id="10-14-IO流-流的标准处理异常代码1-6版本及其以前"><a href="#10-14-IO流-流的标准处理异常代码1-6版本及其以前" class="headerlink" title="10.14_IO流(流的标准处理异常代码1.6版本及其以前)"></a>10.14_IO流(流的标准处理异常代码1.6版本及其以前)</h4><ul><li>try finally嵌套</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">fis = <span class="keyword">new</span> FileInputStream(<span class="string">"aaa.txt"</span>);</span><br><span class="line">fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"bbb.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(fis != <span class="keyword">null</span>)</span><br><span class="line">fis.close();</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(fos != <span class="keyword">null</span>)</span><br><span class="line">fos.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-15-IO流-流的标准处理异常代码1-7版本"><a href="#10-15-IO流-流的标准处理异常代码1-7版本" class="headerlink" title="10.15_IO流(流的标准处理异常代码1.7版本)"></a>10.15_IO流(流的标准处理异常代码1.7版本)</h4><ul><li><p>try close</p><p> try(<br> ​        FileInputStream fis = new FileInputStream(“aaa.txt”);<br> ​        FileOutputStream fos = new FileOutputStream(“bbb.txt”);<br> ​        MyClose mc = new MyClose();<br> ​    ){<br> ​        int b;<br> ​        while((b = fis.read()) != -1) {<br> ​            fos.write(b);<br> ​        }<br> ​    }</p></li><li><p>原理</p><ul><li>在try()中创建的流对象必须实现了AutoCloseable这个接口,如果实现了,在try后面的{}(读写代码)执行后就会自动调用,流对象的close方法将流关掉 </li></ul></li></ul><h4 id="10-16-IO流-图片加密"><a href="#10-16-IO流-图片加密" class="headerlink" title="10.16_IO流(图片加密)"></a>10.16_IO流(图片加密)</h4><ul><li><p>给图片加密</p><p> BufferedInputStream bis = new BufferedInputStream(new FileInputStream(“a.jpg”));<br> ​    BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(“b.jpg”));<br> ​<br> ​    int b;<br> ​    while((b = bis.read()) != -1) {<br> ​        bos.write(b ^ 123);<br> ​    }<br> ​<br> ​    bis.close();<br> ​    bos.close();</p></li></ul><h4 id="10-17-IO流-拷贝文件"><a href="#10-17-IO流-拷贝文件" class="headerlink" title="10.17_IO流(拷贝文件)"></a>10.17_IO流(拷贝文件)</h4><ul><li><p>在控制台录入文件的路径,将文件拷贝到当前项目下</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">System.out.println(<span class="string">"请输入一个文件路径"</span>);</span><br><span class="line">String line = sc.nextLine();<span class="comment">//将键盘录入的文件路径存储在line中</span></span><br><span class="line">File file = <span class="keyword">new</span> File(line);<span class="comment">//封装成File对象</span></span><br><span class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file.getName());</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">byte</span>[] arr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8192</span>];<span class="comment">//定义缓冲区</span></span><br><span class="line"><span class="keyword">while</span>((len = fis.read(arr)) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(arr,<span class="number">0</span>,len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="10-18-IO流-录入数据拷贝到文件"><a href="#10-18-IO流-录入数据拷贝到文件" class="headerlink" title="10.18_IO流(录入数据拷贝到文件)"></a>10.18_IO流(录入数据拷贝到文件)</h4><ul><li>将键盘录入的数据拷贝到当前项目下的text.txt文件中,键盘录入数据当遇到quit时就退出</li></ul>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"text.txt"</span>);</span><br><span class="line">System.out.println(<span class="string">"请输入:"</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">String line = sc.nextLine();</span><br><span class="line"><span class="keyword">if</span>(<span class="string">"quit"</span>.equals(line))</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">fos.write(line.getBytes());</span><br><span class="line">fos.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="10-19-day20总结"><a href="#10-19-day20总结" class="headerlink" title="10.19_day20总结"></a>10.19_day20总结</h4><h3 id="11-字符流-字符流FileReader"><a href="#11-字符流-字符流FileReader" class="headerlink" title="11.字符流(字符流FileReader)"></a>11.字符流(字符流FileReader)</h3><ul><li><p>1.字符流是什么</p><ul><li>字符流是可以直接读写字符的IO流</li><li>字符流读取字符, 就要先读取到字节数据, 然后转为字符. 如果要写出字符, 需要把字符转为字节再写出.    </li></ul></li><li><p>2.FileReader</p><ul><li>FileReader类的read()方法可以按照字符大小读取</li></ul></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"aaa.txt"</span>);<span class="comment">//创建输入流对象,关联aaa.txt</span></span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = fr.read()) != -<span class="number">1</span>) &#123;<span class="comment">//将读到的字符赋值给ch</span></span><br><span class="line">System.out.println((<span class="keyword">char</span>)ch);<span class="comment">//将读到的字符强转后打印</span></span><br><span class="line">&#125;</span><br><span class="line">fr.close();<span class="comment">//关流</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="11-02-IO流-字符流FileWriter"><a href="#11-02-IO流-字符流FileWriter" class="headerlink" title="11.02_IO流(字符流FileWriter)"></a>11.02_IO流(字符流FileWriter)</h4><ul><li><p>FileWriter类的write()方法可以自动把字符转</p></li><li></li><li><p>为字节写出</p><p>FileWriter fw = new FileWriter(“aaa.txt”);<br>​    fw.write(“aaa”);<br>​    fw.close();</p></li></ul><h4 id="11-03-IO流-字符流的拷贝"><a href="#11-03-IO流-字符流的拷贝" class="headerlink" title="11.03_IO流(字符流的拷贝)"></a>11.03_IO流(字符流的拷贝)</h4><p>​<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"a.txt"</span>);</span><br><span class="line">FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"b.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fw.write(ch);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fr.close();</span><br><span class="line">fw.close();</span><br></pre></td></tr></table></figure><h4 id="11-04-IO流-什么情况下使用字符流"><a href="#11-04-IO流-什么情况下使用字符流" class="headerlink" title="11.04_IO流(什么情况下使用字符流)"></a>11.04_IO流(什么情况下使用字符流)</h4><ul><li>字符流也可以拷贝文本文件, 但不推荐使用. 因为读取时会把字节转为字符, 写出时还要把字符转回字节.</li><li>程序需要读取一段文本, 或者需要写出一段文本的时候可以使用字符流</li><li>读取的时候是按照字符的大小读取的,不会出现半个中文</li><li>写出的时候可以直接将字符串写出,不用转换为字节数组</li></ul><h4 id="11-05-IO流-字符流是否可以拷贝非纯文本的文件"><a href="#11-05-IO流-字符流是否可以拷贝非纯文本的文件" class="headerlink" title="11.05_IO流(字符流是否可以拷贝非纯文本的文件)"></a>11.05_IO流(字符流是否可以拷贝非纯文本的文件)</h4><ul><li>不可以拷贝非纯文本的文件</li><li>因为在读的时候会将字节转换为字符,在转换过程中,可能找不到对应的字符,就会用?代替,写出的时候会将字符转换成字节写出去</li><li>如果是?,直接写出,这样写出之后的文件就乱了,看不了了  </li></ul><h4 id="11-06-IO流-自定义字符数组的拷贝"><a href="#11-06-IO流-自定义字符数组的拷贝" class="headerlink" title="11.06_IO流(自定义字符数组的拷贝)"></a>11.06_IO流(自定义字符数组的拷贝)</h4><ul><li><p>​<br>FileReader fr = new FileReader(“aaa.txt”);            //创建字符输入流,关联aaa.txt<br>​    FileWriter fw = new FileWriter(“bbb.txt”);            //创建字符输出流,关联bbb.txt<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">char</span>[] arr = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>*<span class="number">8</span>];<span class="comment">//创建字符数组</span></span><br><span class="line"><span class="keyword">while</span>((len = fr.read(arr)) != -<span class="number">1</span>) &#123;<span class="comment">//将数据读到字符数组中</span></span><br><span class="line">fw.write(arr, <span class="number">0</span>, len);<span class="comment">//从字符数组将数据写到文件上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fr.close();<span class="comment">//关流释放资源</span></span><br><span class="line">fw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-07-IO流-带缓冲的字符流"><a href="#11-07-IO流-带缓冲的字符流" class="headerlink" title="11.07_IO流(带缓冲的字符流)"></a>11.07_IO流(带缓冲的字符流)</h4><ul><li><p>BufferedReader的read()方法读取字符时会一次读取若干字符到缓冲区, 然后逐个返回给程序, 降低读取文件的次数, 提高效率</p></li><li><p>BufferedWriter的write()方法写出字符时会先写到缓冲区, 缓冲区写满时才会写到文件, 降低写文件的次数, 提高效率</p></li><li><p>BufferedReader br = new BufferedReader(new FileReader(“aaa.txt”));    //创建字符输入流对象,关联aaa.txt<br>​    BufferedWriter bw = new BufferedWriter(new FileWriter(“bbb.txt”));    //创建字符输出流对象,关联bbb.txt<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = br.read()) != -<span class="number">1</span>) &#123;<span class="comment">//read一次,会先将缓冲区读满,从缓冲去中一个一个的返给临时变量ch</span></span><br><span class="line">bw.write(ch);<span class="comment">//write一次,是将数据装到字符数组,装满后再一起写出去</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">br.close();<span class="comment">//关流</span></span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-08-IO流-readLine-和newLine-方法"><a href="#11-08-IO流-readLine-和newLine-方法" class="headerlink" title="11.08_IO流(readLine()和newLine()方法)"></a>11.08_IO流(readLine()和newLine()方法)</h4><ul><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> BufferedReader的readLine()方法可以读取一行字符(不包含换行符号)</span><br><span class="line"> BufferedWriter的newLine()可以输出一个跨平台的换行符号<span class="string">"\r\n"</span></span><br><span class="line"> BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"aaa.txt"</span>));</span><br><span class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"bbb.txt"</span>));</span><br><span class="line">String line;</span><br><span class="line"><span class="keyword">while</span>((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">bw.write(line);</span><br><span class="line"><span class="comment">//bw.write("\r\n");//只支持windows系统</span></span><br><span class="line">bw.newLine();<span class="comment">//跨平台的</span></span><br><span class="line">&#125;</span><br><span class="line">br.close();</span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-09-IO流-将文本反转"><a href="#11-09-IO流-将文本反转" class="headerlink" title="11.09_IO流(将文本反转)"></a>11.09_IO流(将文本反转)</h4><ul><li>将一个文本文档上的文本反转,第一行和倒数第一行交换,第二行和倒数第二行交换</li></ul><h4 id="11-10-IO流-LineNumberReader"><a href="#11-10-IO流-LineNumberReader" class="headerlink" title="11.10_IO流(LineNumberReader)"></a>11.10_IO流(LineNumberReader)</h4><ul><li><p>LineNumberReader是BufferedReader的子类, 具有相同的功能, 并且可以统计行号</p><ul><li>调用getLineNumber()方法可以获取当前行号</li><li>调用setLineNumber()方法可以设置当前行号</li></ul></li><li><p>LineNumberReader lnr = new LineNumberReader(new FileReader(“aaa.txt”));<br>​    String line;<br>​    lnr.setLineNumber(100);                                    //设置行号<br>​    while((line = lnr.readLine()) != null) {<br>​        System.out.println(lnr.getLineNumber() + “:” + line);//获取行号<br>​    }<br>​    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lnr.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-11-IO流-装饰设计模式"><a href="#11-11-IO流-装饰设计模式" class="headerlink" title="11.11_IO流(装饰设计模式)"></a>11.11_IO流(装饰设计模式)</h4><ul><li><p>interface Coder {<br>​        public void code();<br>​    }<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Coder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"javase"</span>);</span><br><span class="line">System.out.println(<span class="string">"javaweb"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeiMaStudent</span> <span class="keyword">implements</span> <span class="title">Coder</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Student s;<span class="comment">//获取到被包装的类的引用</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HeiMaStudent</span><span class="params">(Student s)</span> </span>&#123;<span class="comment">//通过构造函数创建对象的时候,传入被包装的对象</span></span><br><span class="line"><span class="keyword">this</span>.s = s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;<span class="comment">//对其原有功能进行升级</span></span><br><span class="line">s.code();</span><br><span class="line">System.out.println(<span class="string">"数据库"</span>);</span><br><span class="line">System.out.println(<span class="string">"ssh"</span>);</span><br><span class="line">System.out.println(<span class="string">"安卓"</span>);</span><br><span class="line">System.out.println(<span class="string">"....."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-12-IO流-使用指定的码表读写字符"><a href="#11-12-IO流-使用指定的码表读写字符" class="headerlink" title="11.12_IO流(使用指定的码表读写字符)"></a>11.12_IO流(使用指定的码表读写字符)</h4><ul><li><p>FileReader是使用默认码表读取文件, 如果需要使用指定码表读取, 那么可以使用InputStreamReader(字节流,编码表)</p></li><li><p>FileWriter是使用默认码表写出文件, 如果需要使用指定码表写出, 那么可以使用OutputStreamWriter(字节流,编码表)</p></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader br = <span class="comment">//高效的用指定的编码表读</span></span><br><span class="line"><span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"UTF-8.txt"</span>), <span class="string">"UTF-8"</span>));</span><br><span class="line">BufferedWriter bw = <span class="comment">//高效的用指定的编码表写</span></span><br><span class="line"><span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"GBK.txt"</span>), <span class="string">"GBK"</span>));</span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = br.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">bw.write(ch);</span><br><span class="line">&#125;</span><br><span class="line">br.close();</span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure><h4 id="11-13-IO流-转换流图解"><a href="#11-13-IO流-转换流图解" class="headerlink" title="11.13_IO流(转换流图解)"></a>11.13_IO流(转换流图解)</h4></li><li><p>画图分析转换流</p></li></ul><h4 id="11-14-IO流-获取文本上字符出现的次数"><a href="#11-14-IO流-获取文本上字符出现的次数" class="headerlink" title="11.14_IO流(获取文本上字符出现的次数)"></a>11.14_IO流(获取文本上字符出现的次数)</h4><ul><li>获取一个文本上每个字符出现的次数,将结果写在times.txt上</li></ul><h4 id="11-15-IO流-试用版软件"><a href="#11-15-IO流-试用版软件" class="headerlink" title="11.15_IO流(试用版软件)"></a>11.15_IO流(试用版软件)</h4><ul><li>当我们下载一个试用版软件,没有购买正版的时候,每执行一次就会提醒我们还有多少次使用机会用学过的IO流知识,模拟试用版软件,试用10次机会,执行一次就提示一次您还有几次机会,如果次数到了提示请购买正版</li></ul><h4 id="11-16-File类-递归"><a href="#11-16-File类-递归" class="headerlink" title="11.16_File类(递归)"></a>11.16_File类(递归)</h4><ul><li>5的阶乘    </li></ul><h4 id="11-17-File类-练习"><a href="#11-17-File类-练习" class="headerlink" title="11.17_File类(练习)"></a>11.17_File类(练习)</h4><ul><li>需求:从键盘输入接收一个文件夹路径,打印出该文件夹下所有的.java文件名</li></ul><h4 id="11-18-IO流-总结"><a href="#11-18-IO流-总结" class="headerlink" title="11.18_IO流(总结)"></a>11.18_IO流(总结)</h4><ul><li>1.会用BufferedReader读取GBK码表和UTF-8码表的字符</li><li>2.会用BufferedWriter写出字符到GBK码表和UTF-8码表的文件中</li><li>3.会使用BufferedReader从键盘读取一行</li><li></li></ul><h3 id="12-其他流"><a href="#12-其他流" class="headerlink" title="12.其他流"></a>12.其他流</h3><p>﻿####  12.01_IO流(序列流)(了解)</p><ul><li><p>1.什么是序列流</p><ul><li>序列流可以把多个字节输入流整合成一个, 从序列流中读取数据时, 将从被整合的第一个流开始读, 读完一个之后继续读第二个, 以此类推.</li></ul></li><li><p>2.使用方式</p><ul><li><p>整合两个: SequenceInputStream(InputStream, InputStream)</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis1 = <span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>);<span class="comment">//创建输入流对象,关联a.txt</span></span><br><span class="line">FileInputStream fis2 = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>);<span class="comment">//创建输入流对象,关联b.txt</span></span><br><span class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(fis1, fis2);<span class="comment">//将两个流整合成一个流</span></span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"c.txt"</span>);<span class="comment">//创建输出流对象,关联c.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = sis.read()) != -<span class="number">1</span>) &#123;<span class="comment">//用整合后的读</span></span><br><span class="line">fos.write(b);<span class="comment">//写到指定文件上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="12-02-IO流-序列流整合多个-了解"><a href="#12-02-IO流-序列流整合多个-了解" class="headerlink" title="12.02_IO流(序列流整合多个)(了解)"></a>12.02_IO流(序列流整合多个)(了解)</h4></li></ul></li><li><p>整合多个: SequenceInputStream(Enumeration)</p></li></ul>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis1 = <span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>);<span class="comment">//创建输入流对象,关联a.txt</span></span><br><span class="line">FileInputStream fis2 = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>);<span class="comment">//创建输入流对象,关联b.txt</span></span><br><span class="line">FileInputStream fis3 = <span class="keyword">new</span> FileInputStream(<span class="string">"c.txt"</span>);<span class="comment">//创建输入流对象,关联c.txt</span></span><br><span class="line">Vector&lt;InputStream&gt; v = <span class="keyword">new</span> Vector&lt;&gt;();<span class="comment">//创建vector集合对象</span></span><br><span class="line">v.add(fis1);<span class="comment">//将流对象添加</span></span><br><span class="line">v.add(fis2);</span><br><span class="line">v.add(fis3);</span><br><span class="line">Enumeration&lt;InputStream&gt; en = v.elements();<span class="comment">//获取枚举引用</span></span><br><span class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(en);<span class="comment">//传递给SequenceInputStream构造</span></span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"d.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = sis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(b);</span><br><span class="line">&#125;</span><br><span class="line">sis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="12-03-IO流-内存输出流-掌握"><a href="#12-03-IO流-内存输出流-掌握" class="headerlink" title="12.03_IO流(内存输出流*)(掌握)"></a>12.03_IO流(内存输出流<strong>*</strong>)(掌握)</h4><ul><li><p>1.什么是内存输出流</p><ul><li>该输出流可以向内存中写数据, 把内存当作一个缓冲区, 写出之后可以一次性获取出所有数据</li></ul></li><li><p>2.使用方式</p><ul><li><p>创建对象: new ByteArrayOutputStream()</p></li><li><p>写出数据: write(int), write(byte[])</p></li><li><p>获取数据: toByteArray()</p></li><li><p>FileInputStream fis = new FileInputStream(“a.txt”);<br>​    ByteArrayOutputStream baos = new ByteArrayOutputStream();<br>​    int b;<br>​    while((b = fis.read()) != -1) {<br>​        baos.write(b);<br>​    }<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//byte[] newArr = baos.toByteArray();//将内存缓冲区中所有的字节存储在newArr中</span></span><br><span class="line"><span class="comment">//System.out.println(new String(newArr));</span></span><br><span class="line">System.out.println(baos);</span><br><span class="line">fis.close();</span><br></pre></td></tr></table></figure><h4 id="12-04-IO流-内存输出流之黑马面试题-掌握"><a href="#12-04-IO流-内存输出流之黑马面试题-掌握" class="headerlink" title="12.04_IO流(内存输出流之黑马面试题)(掌握)"></a>12.04_IO流(内存输出流之黑马面试题)(掌握)</h4></li></ul></li><li><p>定义一个文件输入流,调用read(byte[] b)方法,将a.txt文件中的内容打印出来(byte数组大小限制为5)</p></li><li><p>FileInputStream fis = new FileInputStream(“a.txt”);                //创建字节输入流,关联a.txt<br>​        ByteArrayOutputStream baos = new ByteArrayOutputStream();        //创建内存输出流<br>​        byte[] arr = new byte[5];                                        //创建字节数组,大小为5<br>​        int len;<br>​        while((len = fis.read(arr)) != -1) {                            //将文件上的数据读到字节数组中<br>​            baos.write(arr, 0, len);                                    //将字节数组的数据写到内存缓冲区中<br>​        }<br>​        System.out.println(baos);                                        //将内存缓冲区的内容转换为字符串打印<br>​        fis.close();</p><h4 id="12-05-IO流-随机访问流概述和读写数据-了解"><a href="#12-05-IO流-随机访问流概述和读写数据-了解" class="headerlink" title="12.05_IO流(随机访问流概述和读写数据)(了解)"></a>12.05_IO流(随机访问流概述和读写数据)(了解)</h4></li><li><p>A:随机访问流概述</p><ul><li>RandomAccessFile概述</li><li>RandomAccessFile类不属于流，是Object类的子类。但它融合了InputStream和OutputStream的功能。</li><li>支持对随机访问文件的读取和写入。</li></ul></li><li><p>B:read(),write(),seek()</p></li></ul><h4 id="12-06-IO流-对象操作流ObjecOutputStream-了解"><a href="#12-06-IO流-对象操作流ObjecOutputStream-了解" class="headerlink" title="12.06_IO流(对象操作流ObjecOutputStream)(了解)"></a>12.06_IO流(对象操作流ObjecOutputStream)(了解)</h4><ul><li><p>1.什么是对象操作流</p><ul><li>该流可以将一个对象写出, 或者读取一个对象到程序中. 也就是执行了序列化和反序列化的操作.</li></ul></li><li><p>2.使用方式</p><ul><li><p>写出: new ObjectOutputStream(OutputStream), writeObject()</p><p>public class Demo3_ObjectOutputStream {</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> * 将对象写出,序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">Person p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">23</span>);</span><br><span class="line">Person p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">24</span>);</span><br><span class="line"><span class="comment">//FileOutputStream fos = new FileOutputStream("e.txt");</span></span><br><span class="line"><span class="comment">//fos.write(p1);</span></span><br><span class="line"><span class="comment">//FileWriter fw = new FileWriter("e.txt");</span></span><br><span class="line"><span class="comment">//fw.write(p1);</span></span><br><span class="line"><span class="comment">//无论是字节输出流,还是字符输出流都不能直接写出对象</span></span><br><span class="line">ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"e.txt"</span>));<span class="comment">//创建对象输出流</span></span><br><span class="line">oos.writeObject(p1);</span><br><span class="line">oos.writeObject(p2);</span><br><span class="line">oos.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="12-07-IO流-对象操作流ObjectInputStream-了解"><a href="#12-07-IO流-对象操作流ObjectInputStream-了解" class="headerlink" title="12.07_IO流(对象操作流ObjectInputStream)(了解)"></a>12.07_IO流(对象操作流ObjectInputStream)(了解)</h4></li></ul></li><li><p>读取: new ObjectInputStream(InputStream), readObject()</p><ul><li><p>public class Demo3_ObjectInputStream {</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ClassNotFoundException </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> FileNotFoundException </span></span><br><span class="line"><span class="comment"> * 读取对象,反序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"e.txt"</span>));</span><br><span class="line">Person p1 = (Person) ois.readObject();</span><br><span class="line">Person p2 = (Person) ois.readObject();</span><br><span class="line">System.out.println(p1);</span><br><span class="line">System.out.println(p2);</span><br><span class="line">ois.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="12-08-IO流-对象操作流优化-了解"><a href="#12-08-IO流-对象操作流优化-了解" class="headerlink" title="12.08_IO流(对象操作流优化)(了解)"></a>12.08_IO流(对象操作流优化)(了解)</h4><ul><li>将对象存储在集合中写出</li></ul><p>  ​    </p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- Person p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">23</span>);</span><br><span class="line">  Person p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">24</span>);</span><br><span class="line">  Person p3 = <span class="keyword">new</span> Person(<span class="string">"马哥"</span>, <span class="number">18</span>);</span><br><span class="line">  Person p4 = <span class="keyword">new</span> Person(<span class="string">"辉哥"</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">  ArrayList&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  list.add(p1);</span><br><span class="line">  list.add(p2);</span><br><span class="line">  list.add(p3);</span><br><span class="line">  list.add(p4);</span><br><span class="line"></span><br><span class="line">  ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"f.txt"</span>));</span><br><span class="line">  oos.writeObject(list);<span class="comment">//写出集合对象</span></span><br><span class="line"></span><br><span class="line">  oos.close();</span><br><span class="line"></span><br><span class="line">- 读取到的是一个集合对象</span><br><span class="line"></span><br><span class="line">  ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"f.txt"</span>));</span><br><span class="line">  ArrayList&lt;Person&gt; list = (ArrayList&lt;Person&gt;)ois.readObject();<span class="comment">//泛型在运行期会被擦除,索引运行期相当于没有泛型</span></span><br><span class="line">  <span class="comment">//想去掉黄色可以加注解</span></span><br><span class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">  <span class="keyword">for</span> (Person person : list) &#123;</span><br><span class="line">  System.out.println(person);</span><br><span class="line">  &#125;</span><br><span class="line">ois.close();</span><br></pre></td></tr></table></figure><h4 id="12-09-IO流-加上id号-了解"><a href="#12-09-IO流-加上id号-了解" class="headerlink" title="12.09_IO流(加上id号)(了解)"></a>12.09_IO流(加上id号)(了解)</h4><ul><li><p>注意</p><ul><li>要写出的对象必须实现Serializable接口才能被序列化</li><li>不用必须加id号</li></ul></li></ul><h4 id="12-10-IO流-数据输入输出流-了解"><a href="#12-10-IO流-数据输入输出流-了解" class="headerlink" title="12.10_IO流(数据输入输出流)(了解)"></a>12.10_IO流(数据输入输出流)(了解)</h4><ul><li><p>1.什么是数据输入输出流</p><ul><li>DataInputStream, DataOutputStream可以按照基本数据类型大小读写数据</li><li>例如按Long大小写出一个数字, 写出时该数据占8字节. 读取的时候也可以按照Long类型读取, 一次读取8个字节.</li></ul></li><li><p>2.使用方式</p><ul><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DataOutputStream(OutputStream), writeInt(), writeLong() </span><br><span class="line"></span><br><span class="line">DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"b.txt"</span>));</span><br><span class="line">dos.writeInt(<span class="number">997</span>);</span><br><span class="line">dos.writeInt(<span class="number">998</span>);</span><br><span class="line">dos.writeInt(<span class="number">999</span>);</span><br><span class="line">dos.close();</span><br><span class="line">DataInputStream(InputStream), readInt(), readLong()</span><br><span class="line"></span><br><span class="line">DataInputStream dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>));</span><br><span class="line"><span class="keyword">int</span> x = dis.readInt();</span><br><span class="line"><span class="keyword">int</span> y = dis.readInt();</span><br><span class="line"><span class="keyword">int</span> z = dis.readInt();</span><br><span class="line">System.out.println(x);</span><br><span class="line">System.out.println(y);</span><br><span class="line">System.out.println(z);</span><br><span class="line">dis.close();</span><br></pre></td></tr></table></figure></li><li></li></ul></li></ul><h4 id="12-11-IO流-打印流的概述和特点-掌握"><a href="#12-11-IO流-打印流的概述和特点-掌握" class="headerlink" title="12.11_IO流(打印流的概述和特点)(掌握)"></a>12.11_IO流(打印流的概述和特点)(掌握)</h4><ul><li><p>1.什么是打印流</p><ul><li><p>该流可以很方便的将对象的toString()结果输出, 并且自动加上换行, 而且可以使用自动刷出的模式</p></li><li><p>System.out就是一个PrintStream, 其默认向控制台输出信息</p><p>PrintStream ps = System.out;<br>​    ps.println(97);                    //其实底层用的是Integer.toString(x),将x转换为数字字符串打印<br>​    ps.println(“xxx”);<br>​    ps.println(new Person(“张三”, 23));<br>​    Person p = null;<br>​    ps.println(p);                    //如果是null,就返回null,如果不是null,就调用对象的toString()</p></li></ul></li><li><p>2.使用方式</p><ul><li><p>打印: print(), println()</p></li><li><p>自动刷出: PrintWriter(OutputStream out, boolean autoFlush, String encoding) </p></li><li><p>打印流只操作数据目的</p><p>PrintWriter pw = new PrintWriter(new FileOutputStream(“g.txt”), true);<br>​    pw.write(97);<br>​    pw.print(“大家好”);<br>​    pw.println(“你好”);                //自动刷出,只针对的是println方法<br>​    pw.close();</p></li></ul></li></ul><h4 id="12-12-IO流-标准输入输出流概述和输出语句"><a href="#12-12-IO流-标准输入输出流概述和输出语句" class="headerlink" title="12.12_IO流(标准输入输出流概述和输出语句)"></a>12.12_IO流(标准输入输出流概述和输出语句)</h4><ul><li><p>1.什么是标准输入输出流(掌握)</p><ul><li>System.in是InputStream, 标准输入流, 默认可以从键盘输入读取字节数据</li><li>System.out是PrintStream, 标准输出流, 默认可以向Console中输出字符和字节数据</li></ul></li><li><p>2.修改标准输入输出流(了解)</p><ul><li><p>修改输入流: System.setIn(InputStream)</p></li><li><p>修改输出流: System.setOut(PrintStream)</p></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">System.setIn(<span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>));<span class="comment">//修改标准输入流System.setOut(new PrintStream("b.txt"));//修改标准输出流</span></span><br><span class="line">InputStream in = System.in;<span class="comment">//获取标准输入流</span></span><br><span class="line">PrintStream ps = System.out;<span class="comment">//获取标准输出流</span></span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = in.read()) != -<span class="number">1</span>) &#123;<span class="comment">//从a.txt上读取数据</span></span><br><span class="line">ps.write(b);<span class="comment">//将数据写到b.txt上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">in.close();</span><br><span class="line">ps.close();</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="12-13-IO流-修改标准输入输出流拷贝图片-了解"><a href="#12-13-IO流-修改标准输入输出流拷贝图片-了解" class="headerlink" title="12.13_IO流(修改标准输入输出流拷贝图片)(了解)"></a>12.13_IO流(修改标准输入输出流拷贝图片)(了解)</h4><p>​<br>​        </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">System.setIn(<span class="keyword">new</span> FileInputStream(<span class="string">"IO图片.png"</span>));<span class="comment">//改变标准输入流</span></span><br><span class="line">System.setOut(<span class="keyword">new</span> PrintStream(<span class="string">"copy.png"</span>)); <span class="comment">//改变标准输出流</span></span><br><span class="line">InputStream is = System.in;<span class="comment">//获取标准输入流</span></span><br><span class="line">PrintStream ps = System.out;<span class="comment">//获取标准输出流</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">byte</span>[] arr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>((len = is.read(arr)) != -<span class="number">1</span>) &#123;</span><br><span class="line">ps.write(arr, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">is.close();</span><br><span class="line">ps.close();</span><br></pre></td></tr></table></figure><h4 id="12-14-IO流-两种方式实现键盘录入-了解"><a href="#12-14-IO流-两种方式实现键盘录入-了解" class="headerlink" title="12.14_IO流(两种方式实现键盘录入)(了解)"></a>12.14_IO流(两种方式实现键盘录入)(了解)</h4><ul><li>A:BufferedReader的readLine方法。<ul><li>BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</li></ul></li><li>B:Scanner</li></ul><h4 id="12-15-IO流-Properties的概述和作为Map集合的使用-了解"><a href="#12-15-IO流-Properties的概述和作为Map集合的使用-了解" class="headerlink" title="12.15_IO流(Properties的概述和作为Map集合的使用)(了解)"></a>12.15_IO流(Properties的概述和作为Map集合的使用)(了解)</h4><ul><li>A:Properties的概述<ul><li>Properties 类表示了一个持久的属性集。</li><li>Properties 可保存在流中或从流中加载。</li><li>属性列表中每个键及其对应值都是一个字符串。 </li></ul></li><li>B:案例演示<ul><li>Properties作为Map集合的使用</li></ul></li></ul><h4 id="12-16-IO流-Properties的特殊功能使用-了解"><a href="#12-16-IO流-Properties的特殊功能使用-了解" class="headerlink" title="12.16_IO流(Properties的特殊功能使用)(了解)"></a>12.16_IO流(Properties的特殊功能使用)(了解)</h4><ul><li>A:Properties的特殊功能<ul><li>public Object setProperty(String key,String value)</li><li>public String getProperty(String key)</li><li>public Enumeration<string> stringPropertyNames()</string></li></ul></li><li>B:案例演示<ul><li>Properties的特殊功能</li></ul></li></ul><h4 id="12-17-IO流-Properties的load-和store-功能-了解"><a href="#12-17-IO流-Properties的load-和store-功能-了解" class="headerlink" title="12.17_IO流(Properties的load()和store()功能)(了解)"></a>12.17_IO流(Properties的load()和store()功能)(了解)</h4><ul><li>A:Properties的load()和store()功能</li><li>B:案例演示<ul><li>Properties的load()和store()功能</li></ul></li></ul><h4 id="12-18-day22总结"><a href="#12-18-day22总结" class="headerlink" title="12.18_day22总结"></a>12.18_day22总结</h4><ul><li>把今天的知识点总结一遍。</li></ul></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; 复习下Java基础!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>用第三方sdk解决微信授权</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9sdk%E8%A7%A3%E5%86%B3%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/用第三方sdk解决微信授权/</id>
    <published>2018-10-22T14:35:37.000Z</published>
    <updated>2018-10-24T12:40:45.875Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>好身材才是男人最美丽的衣服</strong><excerpt in="" index="" |="" 首页摘要=""><br> 运用sdk快速解决微信授权,解决大量的微信文档!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖:"></a>1.引入依赖:</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.binarywang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>weixin-java-mp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-建立一个Controller"><a href="#2-建立一个Controller" class="headerlink" title="2.建立一个Controller"></a>2.建立一个Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.imooc.config.ProjectUrlConfig;</span><br><span class="line"><span class="keyword">import</span> com.imooc.enums.ResultEnum;</span><br><span class="line"><span class="keyword">import</span> com.imooc.exception.SellException;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.common.api.WxConsts;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.common.exception.WxErrorException;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpService;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.bean.result.WxMpOAuth2AccessToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 廖师兄</span></span><br><span class="line"><span class="comment"> * 2017-07-03 01:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/wechat"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WxMpService wxMpService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WxMpService wxOpenService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectUrlConfig projectUrlConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/authorize"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">authorize</span><span class="params">(@RequestParam(<span class="string">"returnUrl"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        <span class="comment">//1. 配置</span></span><br><span class="line">        <span class="comment">//2. 调用方法</span></span><br><span class="line">        String url = projectUrlConfig.getWechatMpAuthorize() + <span class="string">"/sell/wechat/userInfo"</span>;</span><br><span class="line">        String redirectUrl = wxMpService.oauth2buildAuthorizationUrl(url, WxConsts.OAUTH2_SCOPE_BASE, URLEncoder.encode(returnUrl));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/userInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">userInfo</span><span class="params">(@RequestParam(<span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                         @<span class="title">RequestParam</span><span class="params">(<span class="string">"state"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        WxMpOAuth2AccessToken wxMpOAuth2AccessToken = <span class="keyword">new</span> WxMpOAuth2AccessToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            wxMpOAuth2AccessToken = wxMpService.oauth2getAccessToken(code);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (WxErrorException e) &#123;</span><br><span class="line">            log.error(<span class="string">"【微信网页授权】&#123;&#125;"</span>, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SellException(ResultEnum.WECHAT_MP_ERROR.getCode(), e.getError().getErrorMsg());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String openId = wxMpOAuth2AccessToken.getOpenId();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + returnUrl + <span class="string">"?openid="</span> + openId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/qrAuthorize"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">qrAuthorize</span><span class="params">(@RequestParam(<span class="string">"returnUrl"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        String url = projectUrlConfig.getWechatOpenAuthorize() + <span class="string">"/sell/wechat/qrUserInfo"</span>;</span><br><span class="line">        String redirectUrl = wxOpenService.buildQrConnectUrl(url, WxConsts.QRCONNECT_SCOPE_SNSAPI_LOGIN, URLEncoder.encode(returnUrl));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/qrUserInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">qrUserInfo</span><span class="params">(@RequestParam(<span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                             @<span class="title">RequestParam</span><span class="params">(<span class="string">"state"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        WxMpOAuth2AccessToken wxMpOAuth2AccessToken = <span class="keyword">new</span> WxMpOAuth2AccessToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            wxMpOAuth2AccessToken = wxOpenService.oauth2getAccessToken(code);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (WxErrorException e) &#123;</span><br><span class="line">            log.error(<span class="string">"【微信网页授权】&#123;&#125;"</span>, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SellException(ResultEnum.WECHAT_MP_ERROR.getCode(), e.getError().getErrorMsg());</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">"wxMpOAuth2AccessToken=&#123;&#125;"</span>, wxMpOAuth2AccessToken);</span><br><span class="line">        String openId = wxMpOAuth2AccessToken.getOpenId();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + returnUrl + <span class="string">"?openid="</span> + openId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-配置文件"><a href="#3-配置文件" class="headerlink" title="3.配置文件"></a>3.配置文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpConfigStorage;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpInMemoryConfigStorage;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpService;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.impl.WxMpServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 廖师兄</span></span><br><span class="line"><span class="comment"> * 2017-07-03 01:25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatMpConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WechatAccountConfig accountConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WxMpService <span class="title">wxMpService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WxMpService wxMpService = <span class="keyword">new</span> WxMpServiceImpl();</span><br><span class="line">        wxMpService.setWxMpConfigStorage(wxMpConfigStorage());</span><br><span class="line">        <span class="keyword">return</span> wxMpService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WxMpConfigStorage <span class="title">wxMpConfigStorage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WxMpInMemoryConfigStorage wxMpConfigStorage = <span class="keyword">new</span> WxMpInMemoryConfigStorage();</span><br><span class="line">        wxMpConfigStorage.setAppId(accountConfig.getMpAppId());</span><br><span class="line">        wxMpConfigStorage.setSecret(accountConfig.getMpAppSecret());</span><br><span class="line">        <span class="keyword">return</span> wxMpConfigStorage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;好身材才是男人最美丽的衣服&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; 运用sdk快速解决微信授权,解决大量的微信文档!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>并查集(Union Find)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/%E5%B9%B6%E6%9F%A5%E9%9B%86(Union%20Find)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/并查集(Union Find)/</id>
    <published>2018-10-22T14:35:37.000Z</published>
    <updated>2018-10-22T06:30:34.696Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="并查集-Union-Find"><a href="#并查集-Union-Find" class="headerlink" title="并查集(Union Find)"></a>并查集(Union Find)</h1><h2 id="1-什么是并查集"><a href="#1-什么是并查集" class="headerlink" title="1.什么是并查集"></a>1.什么是并查集</h2><blockquote><ul><li>是一种很不一样的树形结构</li><li>适合解决链接问题</li><li>网络中节点的链接状态</li><li>数学中集合类的实现(并集)</li></ul></blockquote><h2 id="2-并查集1-0版本的实现-Quick-find-查的快-并的慢"><a href="#2-并查集1-0版本的实现-Quick-find-查的快-并的慢" class="headerlink" title="2.并查集1.0版本的实现(Quick find 查的快,并的慢)"></a>2.并查集1.0版本的实现(Quick find 查的快,并的慢)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span> :</span><br><span class="line">    <span class="keyword">int</span> *id;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UnionFind(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        count = n;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~UnionFind() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[]id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">        assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">        <span class="keyword">return</span> id[p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p ,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid=find(p);</span><br><span class="line">        <span class="keyword">int</span> qid=find(q);</span><br><span class="line">        <span class="keyword">if</span>(q!=p)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(id[i]==pid)</span><br><span class="line">                    id[i]=qid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="3-使用指向父亲节点实现并查集"><a href="#3-使用指向父亲节点实现并查集" class="headerlink" title="3.使用指向父亲节点实现并查集"></a>3.使用指向父亲节点实现并查集</h2><p><img src="/img/1539598030956.png" alt="1539598030956"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//ARITHMETIC_IMOOC_UNIONFIND2_H</span></span></span><br><span class="line"><span class="keyword">namespace</span> UP2 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> *parent;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        UnionFind(<span class="keyword">int</span> count) &#123;</span><br><span class="line">            parent = <span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            <span class="keyword">this</span>-&gt;count = count;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">                parent[i] = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ~UnionFind() &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">            assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">            <span class="keyword">while</span>(p!=parent[p])</span><br><span class="line">                p=parent[p];</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isConnection</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> pRoot=find(p);</span><br><span class="line">            <span class="keyword">int</span> qRoot=find(q);</span><br><span class="line">            <span class="keyword">if</span>(pRoot!=qRoot)</span><br><span class="line">                parent[pRoot]=parent[qRoot];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-并查集的优化-判断元素的层级尺寸再合并"><a href="#4-并查集的优化-判断元素的层级尺寸再合并" class="headerlink" title="4.并查集的优化(判断元素的层级尺寸再合并)"></a>4.并查集的优化(判断元素的层级尺寸再合并)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/15.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//ARITHMETIC_IMOOC_UNIONFIND2_H</span></span></span><br><span class="line"><span class="keyword">namespace</span> UP3 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> *parent;</span><br><span class="line">        <span class="keyword">int</span> *sz;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        UnionFind(<span class="keyword">int</span> count) &#123;</span><br><span class="line">            parent = <span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            sz=<span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            <span class="keyword">this</span>-&gt;count = count;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">                parent[i] = i;</span><br><span class="line">                sz[i]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ~UnionFind() &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">            assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">            <span class="keyword">while</span>(p!=parent[p])</span><br><span class="line">                p=parent[p];</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isConnection</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> pRoot=find(p);</span><br><span class="line">            <span class="keyword">int</span> qRoot=find(q);</span><br><span class="line">            <span class="keyword">if</span>(pRoot==qRoot)</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            <span class="keyword">if</span>(sz[pRoot]&lt;sz[qRoot])&#123;</span><br><span class="line">                parent[pRoot]=qRoot;</span><br><span class="line">                sz[qRoot]+=sz[pRoot];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                parent[qRoot]=pRoot;</span><br><span class="line">                sz[pRoot]+=sz[qRot];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-通过路径压缩算法实现并查集的优化"><a href="#5-通过路径压缩算法实现并查集的优化" class="headerlink" title="5.通过路径压缩算法实现并查集的优化"></a>5.通过路径压缩算法实现并查集的优化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">      assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">      <span class="keyword">while</span>(p!=parent[p])&#123;</span><br><span class="line">          p=parent[p];</span><br><span class="line">          parent[p]=parent[parent[p]];<span class="comment">//路径压缩的实现</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> p;     </span><br><span class="line">    <span class="comment">//第二个版本的路径压缩算法,使用递归实现</span></span><br><span class="line">      <span class="keyword">if</span> (p != parent[p])</span><br><span class="line">          parent[p] != find(parent[p]);</span><br><span class="line">      <span class="keyword">return</span> parent[p];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>SpringMvc的一些方法</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/SpringMvc%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B9%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/SpringMvc的一些方法/</id>
    <published>2018-10-21T16:00:00.000Z</published>
    <updated>2018-10-24T12:47:31.285Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 失败者找理由,成功者找方法!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>对SpringMvc的一些常用方法<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-Spring-mvc中关于表单中String日期转换为Date的工具类-实现Converter接口"><a href="#1-Spring-mvc中关于表单中String日期转换为Date的工具类-实现Converter接口" class="headerlink" title="1.Spring-mvc中关于表单中String日期转换为Date的工具类(实现Converter接口)"></a>1.Spring-mvc中关于表单中String日期转换为Date的工具类(实现<em>Converter</em>接口)</h2><blockquote><p>需要实现一个接口,并重写一个方法,如下:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.springmvc.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConvert2</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String arg0)</span> </span>&#123;</span><br><span class="line">Date date=<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">date=df.parse(arg0);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用这个转换器需要在spring的配置文件中添加相应的bean,如下:</p></blockquote><pre><code> &lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;&lt;!-- 使用自定义转换器 --&gt;&lt;mvc:annotation-driven conversion-service=&quot;MyConvert&quot; /&gt;&lt;!-- 定义转换器 --&gt;&lt;bean id=&quot;MyConvert&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;    &lt;property name=&quot;converters&quot;&gt;        &lt;set&gt;            &lt;bean class=&quot;com.itheima.springmvc.utils.DateConvert&quot; /&gt;        &lt;/set&gt;    &lt;/property&gt;&lt;/bean&gt;</code></pre><h2 id="2-web端关于get和post请求乱码的解决方案-web-xml中添加过滤器"><a href="#2-web端关于get和post请求乱码的解决方案-web-xml中添加过滤器" class="headerlink" title="2.web端关于get和post请求乱码的解决方案(web.xml中添加过滤器)"></a>2.web端关于get和post请求乱码的解决方案(web.xml中添加过滤器)</h2><pre><code>    &lt;!-- 解决post乱码问题 --&gt;&lt;filter&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;    &lt;!-- 设置编码参是UTF8 --&gt;    &lt;init-param&gt;        &lt;param-name&gt;encoding&lt;/param-name&gt;        &lt;param-value&gt;UTF-8&lt;/param-value&gt;    &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;</code></pre><hr><blockquote><p>修改tomcat中server.xml 文件解决get请求乱码(最方便的方法)</p><ul><li><strong>URLEncoding=”utf-8”</strong> 为添加部分<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URLEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><hr><blockquote><p>也可以使用自定义的拦截器实现(get和post请求均解决乱码问题):</p><ul><li>运用动态代理的设计模式</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Filter04</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">HttpServletRequest req=(HttpServletRequest)request;</span><br><span class="line">Proxy.newProxyInstance(Filter04.class.getClassLoader(), xxx.class.getInterfaces(), <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(method.getName().equalsIgnoreCase(<span class="string">"getAttribute"</span>)) &#123;</span><br><span class="line">String md=req.getMethod();</span><br><span class="line"><span class="keyword">if</span>(<span class="string">"get"</span>.equals(md)) &#123;</span><br><span class="line">String reuslt=(String)method.invoke(req, args);</span><br><span class="line">String str=<span class="keyword">new</span> String(reuslt.getBytes(<span class="string">"iso-8858-1"</span>),<span class="string">"utf-8"</span>);</span><br><span class="line"><span class="keyword">return</span> str;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>##3.在Controller中返回值为String时可以跳转到相应的页面</p><blockquote><p>直接跳转到固定页面:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RequestMapping(<span class="string">"itemEdit"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">itemEdit</span><span class="params">(Model model, @RequestParam(value = <span class="string">"id"</span>, required = <span class="keyword">true</span>, defaultValue = <span class="string">"1"</span>)</span> Integer ids) </span>&#123;</span><br><span class="line"><span class="comment">// 查询商品信息</span></span><br><span class="line">Item item = itemService.getItemById(ids);</span><br><span class="line"><span class="comment">// model返回数据模型</span></span><br><span class="line">model.addAttribute(<span class="string">"item"</span>, item);</span><br><span class="line"><span class="comment">// mav.addObject("item", item);</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"itemEdit"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><hr><blockquote><p>请求跳转到其他页面</p><ul><li>“forward:xxx.action”</li></ul><p>重定向到其他页面</p><ul><li>“redirect:yyy.action”</li></ul></blockquote><hr><h2 id="4-HandlerExceptionResolver-接口处理全局异常"><a href="#4-HandlerExceptionResolver-接口处理全局异常" class="headerlink" title="4.HandlerExceptionResolver 接口处理全局异常"></a>4.HandlerExceptionResolver 接口处理全局异常</h2><hr><h2 id="5-springmvc上传文件写法-图片"><a href="#5-springmvc上传文件写法-图片" class="headerlink" title="5.springmvc上传文件写法(图片)"></a>5.springmvc上传文件写法(图片)</h2><p><img src="/img/1534579880860.png" alt="Alt text"></p><blockquote><p>需要加载的jar包<br><img src="/img/1534579925554.png" alt="Alt text"><br>配置多媒体解析器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置多媒体处理器 --&gt;</span><br><span class="line">&lt;!-- 注意：这里id必须填写：multipartResolver --&gt;</span><br><span class="line">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;</span><br><span class="line">&lt;!-- 最大上传文件大小 --&gt;</span><br><span class="line">&lt;property name=&quot;maxUploadSize&quot; value=&quot;8388608&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>前端代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 上传图片是需要指定属性 enctype="multipart/form-data" --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;form id="itemForm" action="" method="post" enctype="multipart/form-data"&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"itemForm"</span><span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/updateItem.action"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.id &#125;"</span> /&gt;</span> 修改商品信息：</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>商品图片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;item.pic !=null&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/pic/$&#123;item.pic&#125;"</span> <span class="attr">width</span>=<span class="string">100</span> <span class="attr">height</span>=<span class="string">100/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>  <span class="attr">name</span>=<span class="string">"pictureFile"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>上传文件后端代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图片上传用MultipartFile接收文件</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"updateItem"</span>, method = &#123; RequestMethod.POST, RequestMethod.GET &#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateItem</span><span class="params">(Item item, Model model, MultipartFile picFile)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片新名字</span></span><br><span class="line">String name = UUID.randomUUID().toString();</span><br><span class="line"><span class="comment">// 图片原名字</span></span><br><span class="line">String oldName = picFile.getOriginalFilename();</span><br><span class="line"><span class="comment">// 后缀名</span></span><br><span class="line">String exeName = oldName.substring(oldName.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line"></span><br><span class="line">File pic = <span class="keyword">new</span> File(<span class="string">"D:\\WebWork\\"</span> + name + exeName);</span><br><span class="line"><span class="comment">// 保存图片到本地磁盘</span></span><br><span class="line">picFile.transferTo(pic); </span><br><span class="line"><span class="comment">// 更新商品图片信息</span></span><br><span class="line">item.setPic(name + exeName);</span><br><span class="line"></span><br><span class="line">itemServices.update(item);</span><br><span class="line">model.addAttribute(<span class="string">"item"</span>, item);</span><br><span class="line">model.addAttribute(<span class="string">"msg"</span>, <span class="string">"修改商品成功"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"itemEdit"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 失败者找理由,成功者找方法!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对SpringMvc的一些常用方法&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>二分搜索树(Binary Seacher  Tree)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/14/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91(Binary%20Seacher%20%20Tree)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/14/二分搜索树(Binary Seacher  Tree)/</id>
    <published>2018-10-14T14:35:37.000Z</published>
    <updated>2018-10-15T08:20:16.355Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h3 id="1-二分查找"><a href="#1-二分查找" class="headerlink" title="1.二分查找"></a>1.二分查找</h3><blockquote><p>一份为二,折半查找</p><p><strong>要求</strong>:待查找数组必须有序</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(T arr[],<span class="keyword">int</span> n,T target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">0</span>,r=n<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">        <span class="comment">//int mid=(l+r)/2;  这样写存在bug,可能会溢出</span></span><br><span class="line">        <span class="keyword">int</span> mid=l+(r-l)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr[mid]==target)</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">if</span>(target&lt;mid)</span><br><span class="line">            r=mid<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>递归实现二分查找</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">reBinarySearch</span><span class="params">(T arr[], T k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (arr[mid] == k)</span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; arr[mid])</span><br><span class="line">        reBinarySearch(arr, k, l, mid - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        reBinarySearch(arr, k, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-二分搜索树"><a href="#2-二分搜索树" class="headerlink" title="2.二分搜索树"></a>2.二分搜索树</h3><h4 id="2-1二分搜索树的优势"><a href="#2-1二分搜索树的优势" class="headerlink" title="2.1二分搜索树的优势:"></a>2.1二分搜索树的优势:</h4><ul><li><p>高效:</p><p>​    在查找,插入,删除都能以O(lgn)的时间复杂度完成</p></li><li><p>min,max,floor,ceil,rank,select 实现都将很方便</p></li><li><p>在实际应用中,比如要查找一篇文章中某个词出现的次数,用二分搜索树效率将会异常的高</p></li></ul><p><img src="/img/1539167904772.png" alt="1539167904772"></p><h4 id="2-2-二分搜索树的定义"><a href="#2-2-二分搜索树的定义" class="headerlink" title="2.2 二分搜索树的定义:"></a>2.2 二分搜索树的定义:</h4><blockquote><ul><li>在定义中天然的包括了递归结构</li><li>二分搜索树不一定是一颗完全二叉树</li></ul></blockquote><p><img src="/img/1539168446767.png" alt="1539168446767"></p><h4 id="2-3向二叉搜索树中插入新的健值对的实现"><a href="#2-3向二叉搜索树中插入新的健值对的实现" class="headerlink" title="2.3向二叉搜索树中插入新的健值对的实现"></a>2.3向二叉搜索树中插入新的健值对的实现</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST()&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = insert(root ,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line">    <span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node* <span class="title">insert</span><span class="params">(Node *node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            node-&gt;value=value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(node-&gt;key&lt;key)</span><br><span class="line">            node-&gt;left=insert(node-&gt;left,key,value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right=insert(node-&gt;right,key,value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-4二分搜索树实现搜素和是否存在某个值得函数"><a href="#2-4二分搜索树实现搜素和是否存在某个值得函数" class="headerlink" title="2.4二分搜索树实现搜素和是否存在某个值得函数"></a>2.4二分搜索树实现搜素和是否存在某个值得函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST()&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = insert(root ,key,value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找二叉搜索树是否存在key</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> contain(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找key相应节点所对应的Value地址</span></span><br><span class="line">    <span class="function">Value* <span class="title">search</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> search(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line">    <span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node* <span class="title">insert</span><span class="params">(Node *node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            node-&gt;value=value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(node-&gt;key&lt;key)</span><br><span class="line">            node-&gt;left=insert(node-&gt;left,key,value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right=insert(node-&gt;right,key,value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Node* node ,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key&lt;node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;key,key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;right.key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Value* <span class="title">search</span><span class="params">(Node* node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            <span class="keyword">return</span> &amp;(node-&gt;value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key&lt;node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;left,key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;right,key);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-5二分搜索树的前-中-后序遍历-以及二分搜素树的销毁"><a href="#2-5二分搜索树的前-中-后序遍历-以及二分搜素树的销毁" class="headerlink" title="2.5二分搜索树的前,中,后序遍历,以及二分搜素树的销毁"></a>2.5二分搜索树的前,中,后序遍历,以及二分搜素树的销毁</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST() &#123;</span><br><span class="line">        destory(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key, Value value)</span> </span>&#123;</span><br><span class="line">        root = insert(root, key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找二叉搜索树是否存在key</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> contain(root, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找key相应节点所对应的Value地址</span></span><br><span class="line">    <span class="function">Value *<span class="title">search</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> search(root, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//前序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preOreder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        preOreder(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//中序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        inOrder(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//后序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        postOrder(root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line"><span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node *<span class="title">insert</span><span class="params">(Node *node, Key key, Value value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            node-&gt;value = value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (node-&gt;key &lt; key)</span><br><span class="line">            node-&gt;left = insert(node-&gt;left, key, value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right = insert(node-&gt;right, key, value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;key, key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;right.key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Value *<span class="title">search</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            <span class="keyword">return</span> &amp;(node-&gt;value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;left, key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;right, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node.key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            preOreder(node-&gt;left);</span><br><span class="line">            preOrder(node-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            inOrder(node-&gt;left);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            inOrder(node-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            postOrder(node-&gt;left);</span><br><span class="line">            postOrder(node-&gt;right);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destory</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            destory(node-&gt;left);</span><br><span class="line">            destory(node-&gt;right);</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-6二分搜索树的广度优先遍历-层序遍历"><a href="#2-6二分搜索树的广度优先遍历-层序遍历" class="headerlink" title="2.6二分搜索树的广度优先遍历(层序遍历)"></a>2.6二分搜索树的广度优先遍历(层序遍历)</h3><p><img src="/img/1539226708430.png" alt="1539226708430"></p><blockquote><p>代码实现</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二叉搜索树的程序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">levelOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;Node *&gt; q;</span><br><span class="line">        q.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">            Node node = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            count &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span> &lt;&lt; node-&gt;value &lt;&lt; <span class="string">"  "</span>;</span><br><span class="line">            <span class="keyword">if</span> (node.left)</span><br><span class="line">                q.push(node.left);</span><br><span class="line">            <span class="keyword">if</span> (node.right)</span><br><span class="line">                q.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-7找出最大值和最小值函数实现"><a href="#2-7找出最大值和最小值函数实现" class="headerlink" title="2.7找出最大值和最小值函数实现"></a>2.7找出最大值和最小值函数实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Key <span class="title">minimum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       assert(count != <span class="number">0</span>);</span><br><span class="line">       Node node = root;</span><br><span class="line">       <span class="keyword">while</span> (node.left != <span class="literal">NULL</span>)</span><br><span class="line">           node = node.left;</span><br><span class="line">       <span class="keyword">return</span> node.key;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function">Key <span class="title">maximum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       assert(count != <span class="number">0</span>);</span><br><span class="line">       Node node = root;</span><br><span class="line">       <span class="keyword">while</span> (node.right != <span class="literal">NULL</span>)</span><br><span class="line">           node = node.right;</span><br><span class="line">       <span class="keyword">return</span> node;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="2-8二分搜素树的删除节点"><a href="#2-8二分搜素树的删除节点" class="headerlink" title="2.8二分搜素树的删除节点"></a>2.8二分搜素树的删除节点</h3><blockquote><p>删除最大值和最小值函数的实现:</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除二分搜索树的最小节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root)</span><br><span class="line">            root = removeMin(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//删除二分搜索树的最大节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root)</span><br><span class="line">            root=removeMax(root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function">Node* <span class="title">removeMin</span><span class="params">(Node* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;left==<span class="literal">NULL</span>)&#123;</span><br><span class="line">           Node* rightNode=node-&gt;right;</span><br><span class="line">           <span class="keyword">delete</span>  node;</span><br><span class="line">           count--;</span><br><span class="line">           <span class="keyword">return</span> rightNode;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;left=removeMin(node-&gt;left);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Node* <span class="title">removeMax</span><span class="params">(Node* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;right==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            Node* leftNode=node-&gt;left;</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">            <span class="keyword">return</span> leftNode;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;right=removeMax(node-&gt;right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>二分搜索树删除指定节点:</p></blockquote><p><img src="/img/1539588249714.png" alt="1539588249714"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//删除二叉树的指定节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        root = remove(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:    </span><br><span class="line">    <span class="function">Node *<span class="title">remove</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node-&gt;key) &#123;</span><br><span class="line">            node-&gt;left = remove(node-&gt;left, key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; node-&gt;key) &#123;</span><br><span class="line">            node-&gt;right = remove(node-&gt;right, key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;   <span class="comment">//key=node.key的情况</span></span><br><span class="line">            <span class="keyword">if</span> (node-&gt;left == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                Node *rightNode = node-&gt;right;</span><br><span class="line">                <span class="keyword">delete</span> node;</span><br><span class="line">                count--;</span><br><span class="line">                <span class="keyword">return</span> rightNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;right == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                Node *leftNode = node-&gt;left;</span><br><span class="line">                <span class="keyword">delete</span> node;</span><br><span class="line">                count--;</span><br><span class="line">                <span class="keyword">return</span> leftNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//node.left!=null&amp;&amp;node.right!=null;</span></span><br><span class="line">            Node *successor = <span class="keyword">new</span> Node(minimum(node-&gt;right));</span><br><span class="line">            count++;</span><br><span class="line">            successor-&gt;right = removeMin(node-&gt;right);</span><br><span class="line">            successor-&gt;left = node-&gt;left;</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">            <span class="keyword">return</span> successor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-9二分查找树的局限性"><a href="#2-9二分查找树的局限性" class="headerlink" title="2.9二分查找树的局限性"></a>2.9二分查找树的局限性</h3></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>堆排序(heapSort)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/13/%E5%A0%86%E6%8E%92%E5%BA%8F(heapSort)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/13/堆排序(heapSort)/</id>
    <published>2018-10-13T15:35:37.000Z</published>
    <updated>2018-10-15T05:29:02.232Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="堆排序-heapSort"><a href="#堆排序-heapSort" class="headerlink" title="堆排序(heapSort)"></a>堆排序(heapSort)</h2><h3 id="1-堆排序的实现"><a href="#1-堆排序的实现" class="headerlink" title="1.堆排序的实现:"></a>1.堆排序的实现:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> __shiftDown(T arr[],<span class="keyword">int</span> n,<span class="keyword">int</span> k)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">2</span>*k+<span class="number">1</span>&lt;n)&#123;</span><br><span class="line">        <span class="keyword">int</span> j=<span class="number">2</span>*k+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(j+<span class="number">1</span>&lt;n&amp;&amp;arr[j+<span class="number">1</span>]&gt;arr[j])</span><br><span class="line">            j+=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr[k]&gt;arr[j])</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            swap(arr[j],arr[k]);</span><br><span class="line">            k=j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=(n<span class="number">-1</span>)/<span class="number">2</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    __shiftDown(arr,n,i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;<span class="number">0</span>;i--)&#123;</span><br><span class="line">        swap(arr[<span class="number">0</span>],arr[i]);</span><br><span class="line">        __shiftDown(arr,i,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-排序算法总结"><a href="#2-排序算法总结" class="headerlink" title="2.排序算法总结:"></a>2.排序算法总结:</h3><blockquote><p>排序苏算法的稳定性:对于相等的元素,在排序后,原来靠前的元素依然靠前.相等元素的相对位置没有发生改变.</p><p>在某次场景会考虑到排序算法的稳定性.比如:学生的姓名是按字典序排列的,根据分数排序后,相同分数的学生还应该按照字典序排列.(插入排序和归并排序是稳定的排序算法)</p><p><img src="/img/1539159816193.png" alt="1539159816193"></p></blockquote><p><img src="/img/1539159633630.png" alt="1539159633630"></p></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>堆(Heap)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/13/%E5%A0%86%E7%9A%84%E5%AD%A6%E4%B9%A0(Heap)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/13/堆的学习(Heap)/</id>
    <published>2018-10-13T14:35:37.000Z</published>
    <updated>2018-10-15T04:52:13.485Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h2 id="堆的学习-Heap"><a href="#堆的学习-Heap" class="headerlink" title="堆的学习(Heap)"></a>堆的学习(Heap)</h2><blockquote><p>什么是优先队列:</p><blockquote><p>普通队列:先进先出;后进后出</p><p>优先队列:出队列和入队列和优先级有关(动态)</p></blockquote><p><img src="/img/1539084361286.png" alt="1539084361286"></p></blockquote><h4 id="1二叉堆"><a href="#1二叉堆" class="headerlink" title="1二叉堆"></a>1二叉堆</h4><p><img src="/img/1539085506624.png" alt="1539085506624"></p><h3 id="1-1用数组储存二叉堆"><a href="#1-1用数组储存二叉堆" class="headerlink" title="1.1用数组储存二叉堆"></a>1.1用数组储存二叉堆</h3><p><img src="/img/1539085717026.png" alt="1539085717026"><img src="/img/1539085824560.png" alt="1539085824560">### 1.2定义一个基本的堆</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity)&#123;</span><br><span class="line">        data =<span class="keyword">new</span> Item[capacity+<span class="number">1</span>];</span><br><span class="line">        count=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~Maxheap()&#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;maxheap.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3Shit-Up的实现-向堆中插入元素"><a href="#1-3Shit-Up的实现-向堆中插入元素" class="headerlink" title="1.3Shit Up的实现(向堆中插入元素)"></a>1.3Shit Up的实现(向堆中插入元素)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/9.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[k / <span class="number">2</span>] &lt; data[k]) &#123;</span><br><span class="line">            swap(data[k / <span class="number">2</span>, data[k]]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Maxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        data[count + <span class="number">1</span>] = item;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        maxheap.insert(rand() % <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxheap.data[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4ShiftDown和queryMax-的实现-取出堆中最大的元素"><a href="#1-4ShiftDown和queryMax-的实现-取出堆中最大的元素" class="headerlink" title="1.4ShiftDown和queryMax()的实现(取出堆中最大的元素)"></a>1.4ShiftDown和queryMax()的实现(取出堆中最大的元素)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/9.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[k / <span class="number">2</span>] &lt; data[k]) &#123;</span><br><span class="line">            swap(data[k / <span class="number">2</span>, data[k]]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftDown</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//        while(data[k]&gt;data[2*k]||data[k]&gt;data[2*k+1])</span></span><br><span class="line">          <span class="keyword">while</span>(<span class="number">2</span>*k&lt;=count)&#123;</span><br><span class="line">              <span class="keyword">int</span> j=<span class="number">2</span>*k;</span><br><span class="line">              <span class="keyword">if</span>(j+<span class="number">1</span>&lt;count&amp;&amp;data[j]&lt;data[j+<span class="number">1</span>])</span><br><span class="line">                  j+=<span class="number">1</span>;</span><br><span class="line">              <span class="keyword">if</span>(data[k]&gt;data[j])</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              swap(data[k],data[j]);</span><br><span class="line">              k=j;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Maxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        data[count + <span class="number">1</span>] = item;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">queryMax</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Item ret=data[<span class="number">1</span>];</span><br><span class="line">        swap(ret ,data[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        maxheap.insert(rand() % <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxheap.data[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-堆排序"><a href="#3-堆排序" class="headerlink" title="3.堆排序"></a>3.堆排序</h2><blockquote><p>借助大顶堆,每次将对顶元素取出;</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    Maxheap&lt;T&gt; maxheap=<span class="keyword">new</span> Maxheap&lt;T&gt;(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i =n<span class="number">-1</span> ; i&gt;=<span class="number">0</span>  ; i--) &#123;</span><br><span class="line">        arr[i]=maxheap.queryMax();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5堆排序的优化"><a href="#1-5堆排序的优化" class="headerlink" title="1.5堆排序的优化"></a>1.5堆排序的优化</h3><blockquote><p>直接将待排序的数组初始化成一个大顶堆堆</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Maxheap(Item arr[],<span class="keyword">int</span> n)&#123;</span><br><span class="line">        data=<span class="keyword">new</span> Item[n+<span class="number">1</span>];</span><br><span class="line">        capacity=n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;n ; i++) &#123;</span><br><span class="line">            data[i+<span class="number">1</span>]=arr[i];</span><br><span class="line">            count=n;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=count/<span class="number">2</span>;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">                shiftDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="1-6Heapify的算法复杂度"><a href="#1-6Heapify的算法复杂度" class="headerlink" title="1.6Heapify的算法复杂度"></a>1.6Heapify的算法复杂度</h3><p><img src="/img/1539091417707.png" alt="1539091417707">## 2索引堆(Index Heap)</p><blockquote><p>Heapify时只讲数组的索引堆化  </p><p>为什么使用索引堆:</p><p>  Heapify的过程会进行频繁的交换,当元素足够复杂时,交换元素将会异常的耗费资源</p></blockquote><h3 id="2-1-最大索引堆得代码实现"><a href="#2-1-最大索引堆得代码实现" class="headerlink" title="2.1 最大索引堆得代码实现"></a>2.1 最大索引堆得代码实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexMaxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span>* indexes;</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">int</span> cacacity;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[indexes[k / <span class="number">2</span>]] &lt; data[indexes[k]]) &#123;</span><br><span class="line">            swap(indexes[k / <span class="number">2</span>], indexes[k]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftDown</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//        while(data[k]&gt;data[2*k]||data[k]&gt;data[2*k+1])</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="number">2</span>*k&lt;=count)&#123;</span><br><span class="line">            <span class="keyword">int</span> j=<span class="number">2</span>*k;</span><br><span class="line">            <span class="keyword">if</span>(j+<span class="number">1</span>&lt;count&amp;&amp;data[indexes[j]]&lt;data[indexes[j+<span class="number">1</span>]])</span><br><span class="line">                j+=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(data[indexes[k]&gt;data[indexes[j]])</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            swap(indexes[k],indexes[j]);</span><br><span class="line">            k=j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    IndexMaxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">this</span>-&gt;indexes=<span class="keyword">new</span> <span class="keyword">int</span>[capacity];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;cacacity=capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~IndexMaxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">        <span class="keyword">delete</span>[] indexes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> i,Item item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        data[i+<span class="number">1</span>]=item;</span><br><span class="line">        indexes[count+<span class="number">1</span>]=i;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Item <span class="title">queryMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item ret=data[indexes[<span class="number">1</span>]];</span><br><span class="line">        swap(indexes[<span class="number">1</span>] ,indexes[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">queryMaxIdex</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret =indexes[<span class="number">1</span>]<span class="number">-1</span>;</span><br><span class="line">        swap(indexes[<span class="number">1</span>] ,indexes[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Item <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> data[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> i,Item item)</span></span>&#123;</span><br><span class="line">        i+=<span class="number">1</span>;</span><br><span class="line">        data[i]=item;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=count;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(indexes[j]==i)&#123;</span><br><span class="line">                shiftDown(indexes[j]);</span><br><span class="line">                shiftUp(indexes[j]);</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-2-反向查找"><a href="#2-2-反向查找" class="headerlink" title="2.2 反向查找"></a>2.2 反向查找</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>高级排序算法(n*logN)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/11/%E9%AB%98%E7%BA%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/11/高级排序算法/</id>
    <published>2018-10-11T14:35:37.000Z</published>
    <updated>2018-10-11T04:34:51.942Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="高级排序算法-n-logN"><a href="#高级排序算法-n-logN" class="headerlink" title="高级排序算法(n*logN)"></a>高级排序算法(n*logN)</h1><h2 id="1-归并排序-Merge-Sort"><a href="#1-归并排序-Merge-Sort" class="headerlink" title="1.归并排序(Merge Sort)"></a>1.归并排序(Merge Sort)</h2><blockquote><p>将待排序的数组无数次分成两部分,最后将剩下的排序(减少了时间复杂度,增加了空间复杂度),归并的过程需要开辟新的数组 </p></blockquote><p><img src="/img/1539061916200.png" alt="1539061916200"></p><p><img src="/img/1539062061025.png" alt="1539062061025"></p><h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><ul><li>注释出代码为接近有序的代码进行优化:如果左面比右面小就不用归并操作</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将arr[l,mid]和[mid+1,r]进行归并</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __marge(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    T aux[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)</span><br><span class="line">        aux[i - l] = arr[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = l;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = l; k &lt;= r; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; r) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[i - l] &lt; aux[j - l]) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对arr[l....r]的范围进行排序</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __mergeSort(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    __mergeSort(arr, l, mid);</span><br><span class="line">    __mergeSort(arr, mid+<span class="number">1</span>, r);</span><br><span class="line">    <span class="comment">//if (arr[mid] &gt; arr[mid + 1])  //对接近有序的数组进行优化</span></span><br><span class="line">    __marge(arr, l, mid, r);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    __mergeSort(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自底向上实现归并排序-不用进行递归操作"><a href="#自底向上实现归并排序-不用进行递归操作" class="headerlink" title="自底向上实现归并排序(不用进行递归操作)"></a>自底向上实现归并排序(不用进行递归操作)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将arr[l,mid]和[mid+1,r]进行归并</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __marge(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    T aux[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)</span><br><span class="line">        aux[i - l] = arr[i];</span><br><span class="line">    <span class="keyword">int</span> i = l;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = l; k &lt;= r; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; r) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[i - l] &lt; aux[j - l]) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergerSortBU</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt;= n; sz += sz) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + sz &lt; n; i+= sz + sz) &#123;</span><br><span class="line">            __marge(arr, i, i + sz - <span class="number">1</span>, min(i + sz + sz - <span class="number">1</span>, n - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-快速排序-Quick-Sort"><a href="#2-快速排序-Quick-Sort" class="headerlink" title="2.快速排序(Quick Sort)"></a>2.快速排序(Quick Sort)</h2><blockquote><p>最好理解,实现最容易的排序算法,但是如果数组接近有序时,性能将会异常的差</p><p>使用: swap(arr[l],arr[rand()%(h-l+1)+l]);  随机取一个数可以对代码进行优化</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> __privo(<span class="keyword">int</span> arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> h) &#123;</span><br><span class="line">    <span class="keyword">int</span> p = arr[l];</span><br><span class="line">    <span class="keyword">while</span> (l &lt; h) &#123;</span><br><span class="line">        swap(arr[l],arr[rand()%(h-l+<span class="number">1</span>)+l]);   <span class="comment">//对代码的优化</span></span><br><span class="line">        <span class="keyword">while</span> (l &lt; h &amp;&amp; arr[h] &gt;= p) --h;</span><br><span class="line">        swap(arr[l], arr[h]);</span><br><span class="line">        <span class="keyword">while</span> (l &lt; h &amp;&amp; p &gt; arr[l]) ++l;</span><br><span class="line">        swap(arr[l], arr[h]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; h)&#123;</span><br><span class="line">        <span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">int</span> p = __privo(arr, l, h);</span><br><span class="line">    quickSort(arr, l, p - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, p + <span class="number">1</span>, h);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"abc"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> a[] = &#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    quickSort(a, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"))))"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>基础排序算法</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/10/%E5%9F%BA%E7%A1%80%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/10/基础的排序算法/</id>
    <published>2018-10-10T14:35:37.000Z</published>
    <updated>2018-10-11T04:27:28.668Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="基础排序算法"><a href="#基础排序算法" class="headerlink" title="基础排序算法"></a>基础排序算法</h1><h2 id="1选择排序-Selection-Sort"><a href="#1选择排序-Selection-Sort" class="headerlink" title="1选择排序(Selection Sort)"></a>1选择排序(Selection Sort)</h2><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><blockquote><p>基本思想,从0开始每一次找第n小的元素与当前第n位置的元素交换.时间复杂度O(n2) ,无论怎样的数组必须都将两层循环跑完.</p></blockquote><p><img src="/img/1539000224817.png" alt="1539000224817"></p><h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">( <span class="keyword">int</span> arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">        <span class="comment">//寻找[i,n)区间最小值</span></span><br><span class="line">        <span class="keyword">int</span> minIndex=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[minIndex]&gt;arr[j])&#123;</span><br><span class="line">                minIndex=j;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr[minIndex],arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    selectionSort(a,<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用c-模板进行扩展"><a href="#使用c-模板进行扩展" class="headerlink" title="使用c++模板进行扩展"></a>使用c++模板进行扩展</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//c++模板,或者泛型</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">( T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">        <span class="comment">//寻找[i,n)区间最小值</span></span><br><span class="line">        <span class="keyword">int</span> minIndex=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&lt;arr[minIndex])&#123;</span><br><span class="line">                minIndex=j;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr[minIndex],arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    selectionSort(a,<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">float</span> b[]=&#123;<span class="number">1.2</span>,<span class="number">2.4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2.2</span>&#125;;</span><br><span class="line">    selectionSort(b,<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;b[i]&lt;&lt;<span class="string">"  "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">     <span class="built_in">string</span> c[]=&#123;<span class="string">"d"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"a"</span>,<span class="string">"f"</span>&#125;;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;c[i]&lt;&lt;<span class="string">"  "</span>;</span><br><span class="line">     &#125;</span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">      Student d[<span class="number">3</span>]=&#123;&#123;<span class="string">"A"</span>,<span class="number">90</span>&#125;,&#123;<span class="string">"B"</span>,<span class="number">80</span>&#125;,&#123;<span class="string">"C"</span>,<span class="number">85</span>&#125;&#125;;</span><br><span class="line">      selectionSort(d,<span class="number">3</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;d[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> STUDENT_H_INCLUDED</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STUDENT_H_INCLUDED</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Student &amp;otherStudent)&#123;</span><br><span class="line">        <span class="keyword">return</span> score &lt; otherStudent.score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os ,<span class="keyword">const</span> Student &amp;student)&#123;</span><br><span class="line">        os&lt;&lt;<span class="string">"Student: "</span>&lt;&lt;student.name&lt;&lt;<span class="string">" "</span>&lt;&lt;student.score&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> os;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// STUDENT_H_INCLUDED</span></span></span><br></pre></td></tr></table></figure><h2 id="2-插入排序-Insertion-Sort"><a href="#2-插入排序-Insertion-Sort" class="headerlink" title="2.插入排序(Insertion Sort)"></a>2.插入排序(Insertion Sort)</h2><blockquote><p>再循环中每次将元素与前面位置元素比较,如果小就交换位置.时间复杂度O(n2).插入排序对接近有序的数组排序性能将会更好</p></blockquote><p><img src="/img/1539003860047.png" alt="1539003860047"></p><h3 id="实现代码-1"><a href="#实现代码-1" class="headerlink" title="实现代码:"></a>实现代码:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(T arr [],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&gt;<span class="number">0</span>&amp;&amp;arr[j]&lt;arr[j<span class="number">-1</span>];j--)&#123;</span><br><span class="line">            swap(arr[j],arr[j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="优化代码"><a href="#优化代码" class="headerlink" title="优化代码:"></a>优化代码:</h3><blockquote><p>每次循环标记元素的值,将每一次交换改成赋值操作,</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSortOpt</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        T e = arr[i];</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span> ( j = i; j &gt; <span class="number">0</span> &amp;&amp; arr[j - <span class="number">1</span>] &gt; e; j--) &#123;</span><br><span class="line">            arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j] = e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud微服务学习总结</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/04/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/04/SpringCloud微服务学习总结/</id>
    <published>2018-10-03T16:00:00.000Z</published>
    <updated>2018-10-05T13:11:51.250Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 骗的了别人骗不了自己,做什么都要用心!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>对SpringCloud学习做一个总结,供以后应用查看<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><p>微服务的特点:</p><blockquote><ul><li>一系列微小的服务共同组成</li><li>单独部署,跑在自己的进程里</li><li>每个服务为独立的业务开发</li><li>分布式的管理</li></ul></blockquote><p>传统vs微服务</p><p><img src="/img/1538629111529.png" alt="1538629111529"></p><blockquote><p>业务形态上不适合微服务的场景</p><ul><li>系统中包含很多很多强事务的场景</li><li>业务相对稳定,迭代周期长</li><li>访问压力不大,可用性要求不高</li><li>…</li></ul></blockquote><p><img src="/img/1538628687788.png" alt="1538628687788"></p><p><img src="/img/1538628921984.png" alt="1538628921984"></p><h2 id="1-Eureka服务注册中心"><a href="#1-Eureka服务注册中心" class="headerlink" title="1.Eureka服务注册中心"></a>1.Eureka服务注册中心</h2><h3 id="1-1构建项目"><a href="#1-1构建项目" class="headerlink" title="1.1构建项目"></a>1.1构建项目</h3><blockquote><p>选择eureka Server</p></blockquote><p><img src="/img/1538625976475.png" alt="1538625976475"> </p><h3 id="1-2-启动类上添加"><a href="#1-2-启动类上添加" class="headerlink" title="1.2 启动类上添加"></a>1.2 启动类上添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line"></span><br><span class="line">package com.jia.eureka;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableEurekaServer</span><br><span class="line">public class EurekaApplication &#123;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h3><h3 id="1-3-application-yml配置"><a href="#1-3-application-yml配置" class="headerlink" title="1.3 application.yml配置"></a>1.3 application.yml配置</h3><blockquote><ul><li>register-with-eureka: false       是否注册到服务注册中心,因为自己就是服务注册注册中心,所以false</li><li>enable-self-preservation: false      关闭心跳检测保留链接(开发环境为了查看服务状态)</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">    register-with-eureka: <span class="keyword">false</span></span><br><span class="line">  server:</span><br><span class="line">    enable-self-preservation: <span class="keyword">false</span></span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: eureka</span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">8761</span></span><br></pre></td></tr></table></figure><h3 id="1-4启动效果"><a href="#1-4启动效果" class="headerlink" title="1.4启动效果"></a>1.4启动效果</h3><p><img src="/img/1538626591475.png" alt="1538626591475">### 1.5小结</p><blockquote><p>eureka服务注册中心在生产环境中可以做到高可用,启动多个eureka服务注册中心,彼此相互注册,每个客户端服务再分别注册到这些eureka服务注册中心.即使一个eureka垮掉,整个微服务也可以正常运行.</p><p><img src="/img/1538628284808.png" alt="1538628284808"></p></blockquote><h2 id="2-Eureka客户端的使用"><a href="#2-Eureka客户端的使用" class="headerlink" title="2.Eureka客户端的使用"></a>2.Eureka客户端的使用</h2><h3 id="2-1构建项目"><a href="#2-1构建项目" class="headerlink" title="2.1构建项目"></a>2.1构建项目</h3><blockquote><p>选择Eureka Discovery</p></blockquote><p><img src="/img/1538627464924.png" alt="1538627464924">2.2 启动类上添加@EnableDiscoveryClient注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-application-yml的配置"><a href="#2-3-application-yml的配置" class="headerlink" title="2.3 application.yml的配置"></a>2.3 application.yml的配置</h3><blockquote><ul><li><p>instance:</p><p>​        hostname: clientName     客户端服务跳转的名字</p></li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">#  instance:</span><br><span class="line">#    hostname: clientName</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: client</span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">10001</span></span><br></pre></td></tr></table></figure><h3 id="2-4-启动效果"><a href="#2-4-启动效果" class="headerlink" title="2.4 启动效果"></a>2.4 启动效果</h3><p><img src="/img/1538628237602.png" alt="1538628237602"></p><h3 id="2-5小结"><a href="#2-5小结" class="headerlink" title="2.5小结"></a>2.5小结</h3><blockquote><ul><li>@EnableEurekaServer @EnabeEurekaClient</li><li>心跳检测,健康检查,负载均衡等功能</li><li>Eureka的高可用,生产上建议使用两台</li><li>分布式系统中,服务注册中心是重要的基础部分</li></ul></blockquote><h2 id="3-统一配置中心config"><a href="#3-统一配置中心config" class="headerlink" title="3.统一配置中心config"></a>3.统一配置中心config</h2><h3 id="3-1-为什么需要统一配置中心"><a href="#3-1-为什么需要统一配置中心" class="headerlink" title="3.1.为什么需要统一配置中心"></a>3.1.为什么需要统一配置中心</h3><ul><li>不方便维护</li><li>配置内容安全与权限</li><li>更新配置项目启动</li></ul><h3 id="3-2-统一配置中心总体架构"><a href="#3-2-统一配置中心总体架构" class="headerlink" title="3.2.统一配置中心总体架构"></a>3.2.统一配置中心总体架构</h3><p><img src="/img/1538630591518.png" alt="1538630591518"></p><h3 id="3-3-统一配置中心的Server端"><a href="#3-3-统一配置中心的Server端" class="headerlink" title="3.3.统一配置中心的Server端"></a>3.3.统一配置中心的Server端</h3><blockquote><ul><li>项目构建 </li></ul><p><img src="/img/1538630755571.png" alt="1538630687494"></p><ul><li><p>启动类上添加注解@EnableConfigServer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.config;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.config.server.EnableConfigServer;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableConfigServer</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ConfigApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>gitee上创建一个仓库用来存放配置文件</p></li><li><blockquote><p>gitee地址:<a href="https://gitee.com/shltj/config-repo" target="_blank" rel="noopener">https://gitee.com/shltj/config-repo</a></p></blockquote><p><img src="/img/1538631315904.png" alt="1538631315904"></p><ul><li><p>application.yml的配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;       spring:</span><br><span class="line">&gt;         application:</span><br><span class="line">&gt;           name: config</span><br><span class="line">&gt;         cloud:</span><br><span class="line">&gt;           config:</span><br><span class="line">&gt;             server:</span><br><span class="line">&gt;               git:</span><br><span class="line">&gt;                 uri: https:<span class="comment">//gitee.com/shltj/config-repo</span></span><br><span class="line">&gt;                 username: shltj</span><br><span class="line">&gt;                 password: xxxxxxxx</span><br><span class="line">&gt;                 basedir: e:/config</span><br><span class="line">&gt;       eureka:</span><br><span class="line">&gt;         client:</span><br><span class="line">&gt;           service-url:</span><br><span class="line">&gt;             defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul></blockquote><blockquote><pre><code>* 启动效果  ![1538633264680](/img/1538633264680.png)</code></pre></blockquote><h3 id="3-4统一配置中心Client端"><a href="#3-4统一配置中心Client端" class="headerlink" title="3.4统一配置中心Client端"></a>3.4统一配置中心Client端</h3><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>gitee上新建client-dev.yml</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;   eureka:</span><br><span class="line">&gt;     client:</span><br><span class="line">&gt;       service-url:</span><br><span class="line">&gt;         defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">&gt;   #  instance:</span><br><span class="line">&gt;   #    hostname: clientName</span><br><span class="line">&gt;   spring:</span><br><span class="line">&gt;     application:</span><br><span class="line">&gt;       name: client</span><br><span class="line">&gt;   server:</span><br><span class="line">&gt;     port: <span class="number">10001</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>将applicatiion.yml 修改为bootstrap.yml springboot默认先加载applicatiion.yml </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;     spring:</span><br><span class="line">&gt;       cloud:</span><br><span class="line">&gt;         config:</span><br><span class="line">&gt;           discovery:</span><br><span class="line">&gt;             enabled: <span class="keyword">true</span></span><br><span class="line">&gt;             service-id: config</span><br><span class="line">&gt;           profile: dev</span><br><span class="line">&gt;       application:</span><br><span class="line">&gt;         name: client</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote></blockquote><h2 id="4-SpringCloud-Bus-自动刷新配置"><a href="#4-SpringCloud-Bus-自动刷新配置" class="headerlink" title="4.SpringCloud Bus 自动刷新配置"></a>4.SpringCloud Bus 自动刷新配置</h2><h3 id="4-1自动刷新配置原理"><a href="#4-1自动刷新配置原理" class="headerlink" title="4.1自动刷新配置原理"></a>4.1自动刷新配置原理</h3><p><img src="/img/1538635206179.png" alt="1538635206179">### 4.2在config服务端添加amqp的依赖</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="4-3-在application-yml-中添加rabbitmq的配置并且暴露访问端口-后期可由git服务器的webhook-访问"><a href="#4-3-在application-yml-中添加rabbitmq的配置并且暴露访问端口-后期可由git服务器的webhook-访问" class="headerlink" title="4.3  在application.yml 中添加rabbitmq的配置并且暴露访问端口(后期可由git服务器的webhook 访问)"></a>4.3  在application.yml 中添加rabbitmq的配置并且暴露访问端口(后期可由git服务器的webhook 访问)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  rabbitmq:</span><br><span class="line">    port: <span class="number">5672</span></span><br><span class="line">    host: <span class="number">101.200</span>.44.222</span><br><span class="line">    username: tong</span><br><span class="line">    password: tong</span><br><span class="line">management:</span><br><span class="line">  endpoints:</span><br><span class="line">    web:</span><br><span class="line">      exposure:</span><br><span class="line">        include: <span class="string">"*"</span></span><br></pre></td></tr></table></figure><h3 id="4-4在client服务端添加rabbitmap的依赖"><a href="#4-4在client服务端添加rabbitmap的依赖" class="headerlink" title="4.4在client服务端添加rabbitmap的依赖"></a>4.4在client服务端添加rabbitmap的依赖</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="4-5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT-M3存在bug"><a href="#4-5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT-M3存在bug" class="headerlink" title="4.5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT,M3存在bug."></a>4.5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT,M3存在bug.</h3><blockquote><p><strong>别忘记需要在更新配置的地方添加@RefreshScope注解</strong></p></blockquote><blockquote><p>访问<a href="http://localhost:8080/actuator/bus-refresh(用post请求方式)可以实现动态更新配置,github上的webhook已经支持访问改接口" target="_blank" rel="noopener">http://localhost:8080/actuator/bus-refresh(用post请求方式)可以实现动态更新配置,github上的webhook已经支持访问改接口</a></p></blockquote><h2 id="5-mq的使用"><a href="#5-mq的使用" class="headerlink" title="5.mq的使用"></a>5.mq的使用</h2><h3 id="5-1-mq的应用场景"><a href="#5-1-mq的应用场景" class="headerlink" title="5.1 mq的应用场景"></a>5.1 mq的应用场景</h3><blockquote><ul><li>异步处理</li><li>流量削峰</li><li>日志处理</li><li>应用解耦</li></ul></blockquote><h2 id="6-服务网关Zuul"><a href="#6-服务网关Zuul" class="headerlink" title="6.服务网关Zuul"></a>6.服务网关Zuul</h2><h3 id="6-1服务网关所应具备的要素"><a href="#6-1服务网关所应具备的要素" class="headerlink" title="6.1服务网关所应具备的要素"></a>6.1服务网关所应具备的要素</h3><blockquote><ul><li>稳定性,高可用(7*25小时服务)</li><li>性能,并发性</li><li>安全性</li><li>扩展性</li></ul></blockquote><h3 id="6-2常见的服务网关"><a href="#6-2常见的服务网关" class="headerlink" title="6.2常见的服务网关"></a>6.2常见的服务网关</h3><p><img src="/img/1538648760855.png" alt="1538648760855">### 6.3Zuul的特点</p><blockquote><ul><li><p>路由+过滤器=zuul</p></li><li><p>核心是一些列的过滤器</p><p><img src="/img/1538648953468.png" alt="1538648953468"><img src="/img/1538649013623.png" alt="1538649013623"></p></li></ul></blockquote><h3 id="6-4Zuul的使用"><a href="#6-4Zuul的使用" class="headerlink" title="6.4Zuul的使用"></a>6.4Zuul的使用</h3><blockquote><ul><li><p>项目的构建</p><p><img src="/img/1538649205460.png" alt="1538649205460">*  再启动类上添加@EnableZuulProxy注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.apigetway;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.netflix.zuul.EnableZuulProxy;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span> </span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableZuulProxy</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiGetwayApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ApiGetwayApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li>经过服务网关和直接访问服务写法对比(网关+服务+方法)</li></ul><pre><code>&gt; ![1538650336849](/img/1538650336849.png)&gt;&gt; ![1538650399065](/img/1538650399065.png)</code></pre></blockquote><blockquote><ul><li><p>自定义路由bootstrap.yml添加配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;  management:</span><br><span class="line">&gt;    security:</span><br><span class="line">&gt;      enabled: <span class="keyword">false</span></span><br><span class="line">&gt;  zuul:</span><br><span class="line">&gt;    routes:</span><br><span class="line">&gt;      aaaaa:</span><br><span class="line">&gt;        path: /myclient<span class="comment">/**</span></span><br><span class="line"><span class="comment">&gt;        serviceId: client</span></span><br><span class="line"><span class="comment">&gt;</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><hr><p> 简介写法:</p><p> <img src="/img/1538650911129.png" alt="1538650911129"></p></blockquote><blockquote><ul><li><p>排除某些路由的写法:</p><p><img src="/img/1538651042319.png" alt="1538651042319">* Zuul默认服务间不能传递cookie,传递cookId配置方法</p><p><img src="/img/1538651174961.png" alt="1538651174961"></p></li></ul></blockquote><h3 id="6-5Zuul典型的使用场景"><a href="#6-5Zuul典型的使用场景" class="headerlink" title="6.5Zuul典型的使用场景"></a>6.5Zuul典型的使用场景</h3><ul><li>前置过滤器: 限流,鉴权,参数校验调整</li><li>后置过滤器:统计,日志</li></ul><h3 id="6-6Zuul的权限校验"><a href="#6-6Zuul的权限校验" class="headerlink" title="6.6Zuul的权限校验"></a>6.6Zuul的权限校验</h3><blockquote><p>规定请求的参数必须带Token.如果Token为空,校验不通过,实现代码如下:</p><blockquote><p>注意: shouldFilter方法返回值设置为true</p><p>​         filterType()方法中配置参数类型</p><p>​          filterOrder()方法中配置拦截器的优先级</p></blockquote></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.apigetway.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.zuul.ZuulFilter;</span><br><span class="line"><span class="keyword">import</span> com.netflix.zuul.context.RequestContext;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PRE_DECORATION_FILTER_ORDER;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PROXY_KEY;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tocken</span> <span class="keyword">extends</span> <span class="title">ZuulFilter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">filterType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PROXY_KEY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">filterOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PRE_DECORATION_FILTER_ORDER-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RequestContext requestContext = RequestContext.getCurrentContext();</span><br><span class="line">        HttpServletRequest request=requestContext.getRequest();</span><br><span class="line">        String token=request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty(token))&#123;</span><br><span class="line">            requestContext.setSendZuulResponse(<span class="keyword">false</span>);</span><br><span class="line">            requestContext.setResponseStatusCode(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-7Zuul的限流"><a href="#6-7Zuul的限流" class="headerlink" title="6.7Zuul的限流"></a>6.7Zuul的限流</h3><blockquote><p>Zuul使用的是Google开发的令牌桶限流,具体如下图:</p><p><img src="/img/1538652781643.png" alt="1538652781643"></p></blockquote><blockquote><p>代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">package</span> com.jia.apigetway.filter;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="keyword">import</span> com.google.common.util.concurrent.RateLimiter;</span><br><span class="line">&gt; <span class="keyword">import</span> com.netflix.zuul.ZuulFilter;</span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PRE_TYPE;</span><br><span class="line">&gt; <span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.SERVLET_DETECTION_FILTER_ORDER;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="meta">@Component</span></span><br><span class="line">&gt; <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RateLimiterFilter</span> <span class="keyword">extends</span> <span class="title">ZuulFilter</span> </span>&#123;</span><br><span class="line">&gt;     <span class="comment">//每秒钟放100令牌</span></span><br><span class="line">&gt;     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RateLimiter RATE_LIMITER=RateLimiter.create(<span class="number">100</span>);</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> String <span class="title">filterType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> PRE_TYPE;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">filterOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> SERVLET_DETECTION_FILTER_ORDER-<span class="number">1</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> Object <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">if</span>(!RATE_LIMITER.tryAcquire())&#123;</span><br><span class="line">&gt;            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();   <span class="comment">//通过令牌桶限流,如果拿不到令牌就抛出一个异常,感觉好像有bug</span></span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;         <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="6-8Zuul的权限校验"><a href="#6-8Zuul的权限校验" class="headerlink" title="6.8Zuul的权限校验"></a>6.8Zuul的权限校验</h3><blockquote><p>通过Zuul的拦截器实现如下鉴权功能</p><p><img src="/img/1538654024968.png" alt="1538654024968"></p><p>在拦截器中具体代码实现如下:</p><p><img src="/img/1538654539209.png" alt="1538654539209"></p></blockquote><h3 id="6-8Zuul的跨域解决方法"><a href="#6-8Zuul的跨域解决方法" class="headerlink" title="6.8Zuul的跨域解决方法"></a>6.8Zuul的跨域解决方法</h3><blockquote><p>基本解决跨域</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.apigetway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跨域配置</span></span><br><span class="line"><span class="comment"> * C-Cross O-Origin  R-Resource S-Sharing</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span>  </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsFilter <span class="title">corsFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> UrlBasedCorsConfigurationSource source=<span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        <span class="keyword">final</span> CorsConfiguration config=<span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        config.setAllowCredentials(<span class="keyword">true</span>);</span><br><span class="line">        config.setAllowedOrigins(Arrays.asList(<span class="string">"*"</span>)); <span class="comment">//http://www.a.com</span></span><br><span class="line">        config.setAllowedHeaders(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        config.setAllowedMethods(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        config.setMaxAge(<span class="number">300l</span>);</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">"/**"</span>,config);</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> CorsFilter(source)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>通用跨域解决方案</p><p><img src="/img/1538655791286.png" alt="1538655791286"></p></blockquote><h2 id="7-服务容错Hystrix"><a href="#7-服务容错Hystrix" class="headerlink" title="7.服务容错Hystrix"></a>7.服务容错Hystrix</h2><blockquote><p>同步等待会造成资源耗尽</p></blockquote><h3 id="7-1Hystrix的功能"><a href="#7-1Hystrix的功能" class="headerlink" title="7,1Hystrix的功能"></a>7,1Hystrix的功能</h3><blockquote><ul><li>服务降级</li><li>依赖隔离</li><li>服务熔断</li><li>监控(Hystrix Dashboard)</li></ul></blockquote><h3 id="7-2服务降级"><a href="#7-2服务降级" class="headerlink" title="7.2服务降级"></a>7.2服务降级</h3><blockquote><p>优先核心服务,非核心服务不可用或若可用</p><p>通过HystrixCommand注解指定</p><p>fallbackMethod(回退函数)中具体实现降级逻辑</p></blockquote><h3 id="7-3Hystrix的使用"><a href="#7-3Hystrix的使用" class="headerlink" title="7,3Hystrix的使用"></a>7,3Hystrix的使用</h3><blockquote><p>在client服务去访问client2服务的getMessage方法</p><ul><li><p>在client服务端添加Hystrix依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加@EnableCircuitBreaker注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.netflix.hystrix.EnableHystrix;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;     <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;     <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;     SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>* 定义HystrixController实验服务降级  &gt;在方法上添加  @HystrixCommand(fallbackMethod = &quot;fallback&quot;)注解当方法出现异常或者超时会自动调用fallback();  &gt;  &gt;如果想所有的方法都实现服务降级,可以在Controller上添加@DefaultProperties(defaultFallback=&quot;xxxxx&quot;) xxxxx为自定义服务降级走的方法  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&gt;       <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       <span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       <span class="meta">@RestController</span></span><br><span class="line">&gt;       <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixController</span> </span>&#123;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;            RestTemplate restTemplate=<span class="keyword">new</span> RestTemplate();</span><br><span class="line">&gt;       </span><br><span class="line">&gt;            <span class="meta">@GetMapping</span>(<span class="string">"/get"</span>)</span><br><span class="line">&gt;            <span class="meta">@HystrixCommand</span>(fallbackMethod = <span class="string">"fallback"</span>)</span><br><span class="line">&gt;            <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">&gt;                String msg=restTemplate.getForObject(<span class="string">"http://localhost:10005/getMessage"</span>,String.class);</span><br><span class="line">&gt;                <span class="keyword">try</span> &#123;</span><br><span class="line">&gt;                    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">&gt;                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">&gt;                    e.printStackTrace();</span><br><span class="line">&gt;                &#125;</span><br><span class="line">&gt;                <span class="keyword">return</span> <span class="string">"from client2 message"</span>+msg;</span><br><span class="line">&gt;            &#125;</span><br><span class="line">&gt;            <span class="function"><span class="keyword">private</span>  String <span class="title">fallback</span><span class="params">()</span></span>&#123;</span><br><span class="line">&gt;                <span class="keyword">return</span> <span class="string">"人太多,挤爆了"</span>;</span><br><span class="line">&gt;            &#125;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       &#125;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><h3 id="7-4Hystrix服务的熔断"><a href="#7-4Hystrix服务的熔断" class="headerlink" title="7,4Hystrix服务的熔断"></a>7,4Hystrix服务的熔断</h3><blockquote><p>断路器实现服务熔断:</p><p><img src="/img/1538702279205.png" alt="1538702279205"></p><p>   访问getMessage方法,当参数为奇数是抛异常,当异常达到一定次数是(60%)启动断路开关</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc.client3.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.DefaultProperties;</span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixProperty;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@DefaultProperties</span>(defaultFallback = <span class="string">"defaultFallback"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"><span class="comment">//    服务的超时配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    @HystrixCommand(fallbackMethod = "fallback",commandProperties =&#123;</span></span><br><span class="line"><span class="comment">//            @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds",value="3500")</span></span><br><span class="line"><span class="comment">//    &#125; )</span></span><br><span class="line">    <span class="meta">@HystrixCommand</span>(commandProperties = &#123;</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.enabled"</span>,value = <span class="string">"true"</span>),   <span class="comment">//设置熔断</span></span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.requestVolumeThreshold"</span>,value = <span class="string">"10"</span>),</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.sleepWindowInMilliseconds"</span>,value = <span class="string">"10000"</span>),</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.errorThresholdPercentage"</span>,value = <span class="string">"60"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/messageT"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">(@RequestParam(<span class="string">"number"</span>)</span> Integer number ) </span>&#123;</span><br><span class="line">        String result=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(number%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">             result = <span class="keyword">this</span>.restTemplate.getForObject(<span class="string">"http://localhost:10006/tong"</span>,String.class);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> a=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">             result=<span class="string">"1111"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">fallback</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"出故障了!!!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/messageT1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage1</span><span class="params">()</span> <span class="keyword">throws</span> RuntimeException </span>&#123;</span><br><span class="line">        String result = <span class="keyword">this</span>.restTemplate.getForObject(<span class="string">"http://localhost:10006/tong"</span>, String.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">defaultFallback</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"默认方法出故障了!!!!!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-5feign和Hystrix的使用"><a href="#7-5feign和Hystrix的使用" class="headerlink" title="7.5feign和Hystrix的使用"></a>7.5feign和Hystrix的使用</h3><blockquote><p>feign的使用(内置ribbon):</p><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;       &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;       &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加注解@EnableFeignClients</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;   <span class="meta">@EnableFeignClients</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>访问远程服务的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@FeignClient</span>(<span class="string">"client2"</span>)</span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Client2Feign</span> </span>&#123;</span><br><span class="line">&gt;         <span class="meta">@PostMapping</span>(<span class="string">"/client2/getMessage"</span>)</span><br><span class="line">&gt;         <span class="function">String <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>----feign和Hystrix结合使用:&gt; bootstrap.yml中添加配置&gt;&gt; <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &gt; feign:</span><br><span class="line">&gt;     &gt;   hystrix:</span><br><span class="line">&gt;     &gt;     enable: <span class="keyword">true</span></span><br><span class="line">&gt;     &gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><pre><code>&gt;&gt;&gt; 如果发生异常执行class中的方法<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@FeignClient</span>(value = <span class="string">"client2"</span>,fallback = Client2Feign.Client2Fallback.class)</span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Client2Feign</span> </span>&#123;</span><br><span class="line">&gt;         <span class="meta">@PostMapping</span>(<span class="string">"/client2/getMessage"</span>)</span><br><span class="line">&gt;         <span class="function">String <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&gt;         <span class="meta">@Component</span></span><br><span class="line">&gt;         <span class="class"><span class="keyword">class</span> <span class="title">Client2Fallback</span> <span class="keyword">implements</span> <span class="title">Client2Feign</span></span>&#123;</span><br><span class="line">&gt;             <span class="meta">@Override</span></span><br><span class="line">&gt;             <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;                 <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt;             &#125;</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><h3 id="7-6Hystrix-dashboard可视化组件的使用"><a href="#7-6Hystrix-dashboard可视化组件的使用" class="headerlink" title="7.6Hystrix-dashboard可视化组件的使用"></a>7.6Hystrix-dashboard可视化组件的使用</h3><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;        &lt;dependency&gt;</span><br><span class="line">&gt;           &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;           &lt;artifactId&gt;spring-cloud-starter-hystrix-dashboard&lt;/artifactId&gt;</span><br><span class="line">&gt;        &lt;/dependency&gt;</span><br><span class="line">&gt;        &lt;dependency&gt;</span><br><span class="line">&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&gt;            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</span><br><span class="line">&gt;         &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加注解@EnableHystrixDashboard</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;     <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;     <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;     <span class="meta">@EnableFeignClients</span></span><br><span class="line">&gt;     <span class="meta">@EnableHystrixDashboard</span></span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;     SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>* 访问/hystrix路径  ![1538707724714](/img/1538707724714.png)* client服务端添加如下配置:  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       management:</span><br><span class="line">&gt;         context-path: /</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><pre><code>* 监控视图  ![1538708343150](/img/1538708343150.png)</code></pre></blockquote><h2 id="8-服务的追踪-链路监控Sleuth"><a href="#8-服务的追踪-链路监控Sleuth" class="headerlink" title="8.服务的追踪(链路监控Sleuth)"></a>8.服务的追踪(链路监控Sleuth)</h2><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>使用<strong>OpenZIPkin</strong>查看服务的追踪</p><blockquote><ul><li><p>用docker安装软件</p><p>docker pull openzipkin/zipkin</p><p>docker run -d -p 9411:9411 zipkin</p><p>浏览器访问:<a href="http://101.200.44.222:9411/zipkin/" target="_blank" rel="noopener">http://101.200.44.222:9411/zipkin/</a></p><p><img src="/img/1538710627440.png" alt="1538710627440"></p></li></ul></blockquote></li><li><p>client服务添加相应依赖</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &lt;dependency&gt;</span><br><span class="line">&gt;        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;        &lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;</span><br><span class="line">&gt;     &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>bootstrap.yml中添加配置</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       zipkin:</span><br><span class="line">&gt;         base-url: http:<span class="comment">//101.200.44.222:9411</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>  * 设置抽样观察百分比为1<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;         sleuth:</span><br><span class="line">&gt;           sampler:</span><br><span class="line">&gt;             percentage: <span class="number">1f</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><ul><li><p>展示效果</p><p>   <img src="/img/1538711526837.png" alt="1538711526837"></p></li></ul></blockquote><h2 id="9-分布式追踪系统"><a href="#9-分布式追踪系统" class="headerlink" title="9.分布式追踪系统"></a>9.分布式追踪系统</h2><h3 id="9-1核心步骤-OpenTracing规范"><a href="#9-1核心步骤-OpenTracing规范" class="headerlink" title="9.1核心步骤(OpenTracing规范)"></a>9.1核心步骤(OpenTracing规范)</h3><p><img src="/img/1538711826394.png" alt="1538711826394"></p><blockquote><ul><li>数据采集</li><li>数据存储</li><li>查询展示</li></ul></blockquote><h2 id="10-使用docker部署项目"><a href="#10-使用docker部署项目" class="headerlink" title="10.使用docker部署项目"></a>10.使用docker部署项目</h2><h3 id="10-1docker部署eureka服务注册中心"><a href="#10-1docker部署eureka服务注册中心" class="headerlink" title="10.1docker部署eureka服务注册中心"></a>10.1docker部署eureka服务注册中心</h3><blockquote><ul><li>Docerfile文件内容</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">FROM</span> hub.c.<span class="number">163</span>.com/library/java:<span class="number">8</span>-alpine</span><br><span class="line">&gt; <span class="keyword">ADD</span> app.jar  app.jar</span><br><span class="line">&gt; EXPOSE 8761</span><br><span class="line">&gt; ENTRYPOINT ["java","-jar","/app.jar"]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><ul><li><p>构建命令:docker build -t springcloud2/eureka .</p></li><li><p>运行命令:docker run -d -p 8761:8761 springcloud2/eureka</p></li><li><p>网易云上传镜像:<a href="https://www.163yun.com/help/documents/15587826830438400" target="_blank" rel="noopener">https://www.163yun.com/help/documents/15587826830438400</a></p></li><li><p>访问成功:</p><p><img src="/img/1538714796176.png" alt="1538714796176"></p></li></ul></blockquote><h3 id="10-2-rancher的使用"><a href="#10-2-rancher的使用" class="headerlink" title="10.2 rancher的使用"></a>10.2 rancher的使用</h3><blockquote><p>Rancher是一个开源的企业级全栈化容器部署管理平台(为了更方便的管理docker)</p><blockquote><p>安装rancher命令:sudo docker run -d –restart=unless-stopped -p 8080:8080 rancher/server:stable</p></blockquote><p><img src="/img/1538717959699.png" alt="1538717959699"></p><ul><li>需添加一台主机</li></ul></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 骗的了别人骗不了自己,做什么都要用心!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对SpringCloud学习做一个总结,供以后应用查看&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>自定义注解+反射实现orm框架的映射与查询功能</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/04/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3+%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0orm%E6%A1%86%E6%9E%B6%E7%9A%84%E6%98%A0%E5%B0%84%E4%B8%8E%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/04/自定义注解+反射实现orm框架的映射与查询功能/</id>
    <published>2018-10-03T16:00:00.000Z</published>
    <updated>2018-10-04T03:04:17.230Z</updated>
    
    <content type="html"><![CDATA[<p><strong>积极一点,耐心一点,你想要的,时光都会慢慢带到你面前!</strong><excerpt in="" index="" |="" 首页摘要=""><br>对注解和反射的加深学习,对ORM框架的加深理解<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><blockquote><p><strong>自定义orm框架例如:Mybatis,hibernate的@Table,@Column注解,通过反射解析注解实现对应表的查询功能,对注解加深学习,对orm框架的思想进行理解.</strong><br><em>将定义的注解进行解析取出数据库表的名字,表对应字段的名字,以及字段对应的value进行sql的拼装,最后通过jdbc进行查询.</em><br>具体代码如下:</p></blockquote><h2 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Table</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"id"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"userName"</span>)</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"nickName"</span>)</span><br><span class="line">    <span class="keyword">private</span>  String nickName;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"age"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"city"</span>)</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"email"</span>)</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"mobile"</span>)</span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNickName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nickName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNickName</span><span class="params">(String nickName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nickName = nickName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCity</span><span class="params">(String city)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.city = city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMobile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMobile</span><span class="params">(String mobile)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Table &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Column &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="对注解的解析和测试类"><a href="#对注解的解析和测试类" class="headerlink" title="对注解的解析和测试类"></a>对注解的解析和测试类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Filter f1 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f1.setAge(<span class="number">10</span>);</span><br><span class="line">        Filter f2 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f2.setNickName(<span class="string">"congcong"</span>);</span><br><span class="line">        Filter f3 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f3.setEmail(<span class="string">"111@qq.com,222@163.com,333@outlook.com"</span>);</span><br><span class="line">        String sql1 = query(f1);</span><br><span class="line">        String sql2 = query(f2);</span><br><span class="line">        String sql3 = query(f3);</span><br><span class="line">        System.out.println(sql1);</span><br><span class="line">        System.out.println(sql2);</span><br><span class="line">        System.out.println(sql3);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">query</span><span class="params">(Filter filter)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">//1.获取Class</span></span><br><span class="line">        Class clazz = filter.getClass();</span><br><span class="line">        <span class="comment">//2.获取Table注解</span></span><br><span class="line">        <span class="keyword">if</span> (!clazz.isAnnotationPresent(Table.class)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Table table = (Table) clazz.getAnnotation(Table.class);</span><br><span class="line">        String tableName = table.value();</span><br><span class="line">        sb.append(<span class="string">"select * from "</span>).append(tableName).append(<span class="string">" where 1=1 "</span>);</span><br><span class="line">        <span class="comment">//3.获取表中的字段</span></span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field f : fields) &#123;</span><br><span class="line">            <span class="comment">//4.处理每个字段对应的SQL</span></span><br><span class="line">            <span class="keyword">if</span> (!f.isAnnotationPresent(Column.class)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.1获取字段上的注解</span></span><br><span class="line">            Column column = f.getAnnotation(Column.class);</span><br><span class="line">            String columnName = column.value();</span><br><span class="line">            <span class="comment">//4.2获取字段的值</span></span><br><span class="line">            String fieldName = f.getName();</span><br><span class="line">            <span class="comment">//4.3获取字段的get方法</span></span><br><span class="line">            String getMethodName = <span class="string">"get"</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase()</span><br><span class="line">                    + fieldName.substring(<span class="number">1</span>);</span><br><span class="line">            Object fieldValue = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Method getMethod = clazz.getDeclaredMethod(getMethodName);</span><br><span class="line">                fieldValue = getMethod.invoke(filter);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.4拼装SQL</span></span><br><span class="line">            <span class="keyword">if</span> (fieldValue == <span class="keyword">null</span> || (fieldValue <span class="keyword">instanceof</span> Integer &amp;&amp; (Integer) fieldValue == <span class="number">0</span>)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fieldValue <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">                sb.append(<span class="string">"and "</span>).append(columnName).append(<span class="string">"="</span>);</span><br><span class="line">                <span class="keyword">if</span> (((String) fieldValue).contains(<span class="string">","</span>)) &#123;</span><br><span class="line">                    String[] values = ((String) fieldValue).split(<span class="string">","</span>);</span><br><span class="line">                    sb.append(<span class="string">" in("</span>);</span><br><span class="line">                    <span class="keyword">for</span> (String v : values) &#123;</span><br><span class="line">                        sb.append(<span class="string">"'"</span>).append(v).append(<span class="string">"'"</span>).append(<span class="string">","</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">                    sb.append(<span class="string">")"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(<span class="string">"'"</span>).append(fieldValue)</span><br><span class="line">                        .append(<span class="string">"'"</span>).append(<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fieldValue <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">                sb.append(<span class="string">"and "</span>).append(columnName).append(<span class="string">"="</span>).append(fieldValue).append(<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>通过jdbc可实现表的完整查询功能功能,在此略过</p></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;积极一点,耐心一点,你想要的,时光都会慢慢带到你面前!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对注解和反射的加深学习,对ORM框架的加深理解&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>初识Docker</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/03/%E5%88%9D%E8%AF%86Docker/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/03/初识Docker/</id>
    <published>2018-10-03T14:35:37.000Z</published>
    <updated>2018-10-05T13:06:07.224Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!</strong><excerpt in="" index="" |="" 首页摘要=""><br> docker是一个神奇的开发工具!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h2 id="1-什么是docker"><a href="#1-什么是docker" class="headerlink" title="1.什么是docker"></a>1.什么是docker</h2><blockquote><p>docker是一个世界领先的容器化平台.网上对他的定义有很多,说法过于复杂化了.我是通过学习springcloud认识的docker的,感觉它就是一个神器.个人理解的docker就是一个背包,你可以把你需要的东西放在这个背包里,然后这个背包你可以分享给任何人.你也可以从免费的商店里获得别人的背包,无论你咋什么样的环境下都可以正常使用这个背包.</p><p>docker是跨平台的,支持windows,maxos,linux</p></blockquote><h2 id="2-docker思想"><a href="#2-docker思想" class="headerlink" title="2.docker思想"></a>2.docker思想</h2><p><img src="/img/1538544866753.png" alt="1538544866753"></p><h2 id="3-docker解决了哪些问题"><a href="#3-docker解决了哪些问题" class="headerlink" title="3.docker解决了哪些问题"></a>3.docker解决了哪些问题</h2><h3 id="3-1换一个运行环境程序跑不起来"><a href="#3-1换一个运行环境程序跑不起来" class="headerlink" title="3.1换一个运行环境程序跑不起来"></a>3.1换一个运行环境程序跑不起来</h3><blockquote><p>自己本地运行好好的程序放在别人的电脑上就不行了,曾经亲自体会过,非常苦恼.一是苦恼还得在别人的电脑上调bug,更可怕的是时时刻刻担心自己的程序放在第三台电脑上也会down掉了.这种恐惧远胜过修改bug.相信这种问题无论是哪个程序员都或多或少遇到过.docker的出现完美的解决了这个问题,它将你写好的代码,运行环境都放在一个”集装箱”里,给别人的不只是代码,而是一整套的程序所需的运行环境.在你的机器上怎们运行,在别人的电脑或者服务器上就会怎样运行.</p></blockquote><h3 id="3-2完美实现了隔离"><a href="#3-2完美实现了隔离" class="headerlink" title="3.2完美实现了隔离"></a>3.2完美实现了隔离</h3><blockquote><p>docker再启动是为每个容器限定的CPU,硬盘和网络,不会出现一个程序进入了死循环,从而影响到其他程序的事情发生.</p></blockquote><h3 id="3-3弹性伸缩变得简单"><a href="#3-3弹性伸缩变得简单" class="headerlink" title="3.3弹性伸缩变得简单"></a>3.3弹性伸缩变得简单</h3><blockquote><p>就电商来说:双十一几亿人同时在线,按照平时的资源配置肯定吃不消.如果按照双十一的业务量来配置资源平时又是极大的浪费.所以就要弹性的加减服务器,写过java程序的小伙伴们到知道,要想在一台电脑上跑java程序需要安装至少需要安装jre,配置环境,再把代码拷过来运行,中间可能还会出现问题.使用docker扩展服务器将变成按一下按钮秒秒钟添加n台服务器那么容易.</p></blockquote><h2 id="4-走进docker"><a href="#4-走进docker" class="headerlink" title="4.走进docker"></a>4.走进docker</h2><blockquote><p>docker的三个关键字:镜像,仓库,容器</p><p>docker的三个关键单词:Build,Ship,Run</p></blockquote><p><img src="/img/1538546571188.png" alt="1538546571188"></p><blockquote><p>-镜像:</p><p>-容器:</p><p>-仓库:</p><ul><li>官网仓库:hub.docker.com </li><li>网易仓库:c.163.com</li></ul></blockquote><h2 id="5-docker的安装"><a href="#5-docker的安装" class="headerlink" title="5.docker的安装"></a>5.docker的安装</h2><blockquote><p>网上教程很多,懒得再详细总结</p></blockquote><h2 id="6-第一个docker镜像"><a href="#6-第一个docker镜像" class="headerlink" title="6.第一个docker镜像"></a>6.第一个docker镜像</h2><h3 id="6-1docker工作流程"><a href="#6-1docker工作流程" class="headerlink" title="6.1docker工作流程"></a>6.1docker工作流程</h3><p><img src="/img/1538548365242.png" alt="1538548365242"></p><h3 id="6-2常用的命令"><a href="#6-2常用的命令" class="headerlink" title="6.2常用的命令"></a>6.2常用的命令</h3><blockquote><ul><li>docker pull [OPTIONS] NAME[:TAG]  拉去镜像   举例:docker pull hello-world</li><li>docker images [OPTIONS]_[ REPOSITORY[:TAG]] 查看镜像</li><li>docker run hello-world</li><li>docker ps</li><li>docker exec -it [代号] bash   :进入容器(正在运行的)</li><li>which nginx : 查看Nginx的位置</li><li>netstat -na|grep 10001 : 检查端口是否开放</li><li>docker run -d -p 10001:80 nginx   :开放容器的80端口映射到本机的10001端口</li><li>docker run -d -P  nginx :随机开放端口映射过来</li><li>docker build .   : 在当前目录运行构建的Dockerfile 文件</li><li>docker build  -t  Jpress:latest  .   :给镜像起一个名字和版本</li></ul></blockquote><h2 id="7-运行Nginx服务器镜像"><a href="#7-运行Nginx服务器镜像" class="headerlink" title="7.运行Nginx服务器镜像"></a>7.运行Nginx服务器镜像</h2><p><img src="/img/1538548580593.png" alt="1538548580593"></p><h2 id="8-docker的网络"><a href="#8-docker的网络" class="headerlink" title="8.docker的网络"></a>8.docker的网络</h2><p><img src="/img/1538549437822.png" alt="1538549437822"><img src="./img/1538549459787.png" alt="1538549459787"></p><h2 id="9-制作自己的镜像"><a href="#9-制作自己的镜像" class="headerlink" title="9.制作自己的镜像"></a>9.制作自己的镜像</h2><blockquote><ul><li>Dockerfille : 制作镜像</li><li>docker build : 构建镜像</li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; docker是一个神奇的开发工具!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="docker" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>突破算法第11天-红黑树</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2017/10/30/test2/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2017/10/30/test2/</id>
    <published>2017-10-30T14:35:37.000Z</published>
    <updated>2018-10-04T03:07:31.302Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 累了选择休息而不是选择放弃!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>红黑树<br><a id="more"></a></excerpt></p><p><the rest="" of="" contents="" |="" 余下全文=""><br><blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p></blockquote></the></p><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void main</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 累了选择休息而不是选择放弃!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;红黑树&lt;br&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
