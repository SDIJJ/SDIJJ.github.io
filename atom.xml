<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>楠の博客</title>
  
  <subtitle>敲敲代码,聊聊人生</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/SDIJJ/sdijj.github.io/"/>
  <updated>2018-11-20T00:38:30.963Z</updated>
  <id>https://github.com/SDIJJ/sdijj.github.io/</id>
  
  <author>
    <name>Arnold</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySql复习</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/11/02/MySql%E5%A4%8D%E4%B9%A0/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/11/02/MySql复习/</id>
    <published>2018-11-02T14:35:37.000Z</published>
    <updated>2018-11-20T00:38:30.963Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地</strong><excerpt in="" index="" |="" 首页摘要=""></excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h3 id="MySql-复习"><a href="#MySql-复习" class="headerlink" title="MySql 复习"></a>MySql 复习</h3><h4 id="完成对MYSQL数据库的多表查询及建表的操作"><a href="#完成对MYSQL数据库的多表查询及建表的操作" class="headerlink" title="完成对MYSQL数据库的多表查询及建表的操作"></a>完成对MYSQL数据库的多表查询及建表的操作</h4><h4 id="掌握MYSQL中多表的创建及多表的查询"><a href="#掌握MYSQL中多表的创建及多表的查询" class="headerlink" title="掌握MYSQL中多表的创建及多表的查询"></a>掌握MYSQL中多表的创建及多表的查询</h4><h4 id="掌握MYSQL中的表关系分析并能正确建表"><a href="#掌握MYSQL中的表关系分析并能正确建表" class="headerlink" title="掌握MYSQL中的表关系分析并能正确建表"></a>掌握MYSQL中的表关系分析并能正确建表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 编写顺序</span></span><br><span class="line">S..F..W..G..H..O</span><br><span class="line"><span class="keyword">select</span> .. <span class="keyword">from</span> .. <span class="keyword">where</span> .. <span class="keyword">group</span> <span class="keyword">by</span> .. <span class="keyword">having</span> .. <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line"><span class="comment">-- 执行顺序</span></span><br><span class="line">F .. W .. G .. H .. S .. O</span><br><span class="line"><span class="keyword">from</span> .. <span class="keyword">where</span> .. <span class="keyword">group</span> <span class="keyword">by</span> .. <span class="keyword">having</span> .. <span class="keyword">select</span> .. <span class="keyword">order</span> <span class="keyword">by</span></span><br></pre></td></tr></table></figure><p>内容:</p><p>​    数据库的创建 : create database 数据库的名 character set 字符集  collate 校对规则</p><p>​    数据库的删除: drop database 数据库名</p><p>​    修改: alter database 数据库 character set 字符集(utf8)</p><p>​    查询:  show databases;</p><p>​          show create database 数据库的名字</p><p>​          select database();</p><p>​    切换数据库 :</p><p>​            use 数据库的名字</p><p>​    </p><p>​    表结构的操作:</p><p>​        创建:  create table 表名(    </p><p>​                列名 列的类型  列的约束,</p><p>​                列名 列的类型  列的约</p><p>​            )</p><p>​            列的类型: char / varchar   </p><p>​            列的约束: </p><p>​                    primary key 主键约束</p><p>​                    unique : 唯一约束</p><p>​                    not null 非空约束</p><p>​              自动增长 : auto_increment</p><p>​         删除 :  drop table 表名</p><p>​        修改:   alter table 表名 (add, modify, change , drop)</p><p>​            rename table 旧表名  to 新表名</p><p>​            alter table 表名 character set 字符集</p><p>​       查询表结构:</p><p>​            show tables; 查询出所有的表</p><p>​            show create table 表名: 表的创建语句, 表的定义</p><p>​            desc 表名:　表的结构</p><p>​    表中数据的操作</p><p>​        插入：　 insert into 表名(列名,列名) values(值1,值2);</p><p>​        删除:        delete from 表名 [where 条件]</p><p>​        修改:        update 表名 set 列名=’值’ ,列名=’值’ [where 条件];</p><p>​        查询:    select [distinct]  * [列名1,列名2] from 表名 [where 条件]</p><p>​              as关键字: 别名</p><p>​               where条件后面:</p><p>​        </p><p>​                    关系运算符:  &gt; &gt;= &lt; &lt;= !=  &lt;&gt;</p><p>​                        –判断某一列是否为空:  is null    is not null</p><p>​                        in 在某范围内</p><p>​                        between…and</p><p>​                    逻辑运算符: and or not</p><p>​                    模糊查询:  like    </p><p>​                            _ : 代表单个字符</p><p>​                            %: 代表的是多个字符</p><p>​                    分组: group by </p><p>​                    分组之后条件过滤:  having</p><p>​                    聚合函数: sum()  ,avg() , count()  ,max(), min()</p><p>​                    排序: order by  (asc 升序, desc 降序)                    </p><p>​                    </p><p>SQL 会创建多表及多表的关系</p><h4 id="需求"><a href="#需求" class="headerlink" title="需求:"></a>需求:</h4><p>分类表和商品表之间是不是有关系? 如果有关系,在数据库中如何表示这种关系</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">category</span>(</span><br><span class="line">  cid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  cname <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">  cdesc <span class="built_in">varchar</span>(<span class="number">31</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'手机数码'</span>,<span class="string">'电子产品,黑马生产'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'鞋靴箱包'</span>,<span class="string">'江南皮鞋厂倾情打造'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'香烟酒水'</span>,<span class="string">'黄鹤楼,茅台,二锅头'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'酸奶饼干'</span>,<span class="string">'娃哈哈,蒙牛酸酸乳'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'馋嘴零食'</span>,<span class="string">'瓜子花生,八宝粥,辣条'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">category</span>;</span><br><span class="line"><span class="keyword">select</span> cname,cdesc <span class="keyword">from</span> <span class="keyword">category</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--所有商品</span></span><br><span class="line">1.商品ID</span><br><span class="line">2.商品名称</span><br><span class="line">3.商品的价格</span><br><span class="line">4.生产日期</span><br><span class="line">5.商品分类ID</span><br><span class="line"></span><br><span class="line">商品和商品分类 : 所属关系</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">pid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  pname <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">  price <span class="keyword">double</span>,</span><br><span class="line">  pdate <span class="keyword">timestamp</span>,</span><br><span class="line">  cno <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'小米mix4'</span>,<span class="number">998</span>,<span class="literal">null</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'锤子'</span>,<span class="number">2888</span>,<span class="literal">null</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'阿迪王'</span>,<span class="number">99</span>,<span class="literal">null</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'老村长'</span>,<span class="number">88</span>,<span class="literal">null</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'劲酒'</span>,<span class="number">35</span>,<span class="literal">null</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'小熊饼干'</span>,<span class="number">1</span>,<span class="literal">null</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'卫龙辣条'</span>,<span class="number">1</span>,<span class="literal">null</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'旺旺大饼'</span>,<span class="number">1</span>,<span class="literal">null</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">//插入数据会失败</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'充气的'</span>,<span class="number">1</span>,<span class="literal">null</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure><h4 id="技术分析"><a href="#技术分析" class="headerlink" title="技术分析:"></a>技术分析:</h4><ul><li><p>多表之间的关系如何来维护</p><p>外键约束: foreign key</p><ul><li><p>给product中的这个cno 添加一个外键约束</p><p>alter table product add foreign key(cno)  references  category(cid);</p></li><li><p>自己挖坑</p></li><li><p>从分类表中,删除分类为5信息,</p><ul><li>delete from category where cid =5;  //删除失败</li><li>首先得去product表, 删除所有分类ID5  商品</li></ul></li></ul></li><li><p>建数据库原则:</p><ul><li>通常情况下,一个项目/应用建一个数据库</li></ul></li></ul><ul><li><p>多表之间的建表原则</p><ul><li><p>一对多 : 商品和分类</p><ul><li><p>建表原则: 在多的一方添加一个外键,指向一的一方的主键</p><p>​</p></li></ul></li><li><p>多对多: 老师和学生, 学生和课程</p><p>建表原则: 建立一张中间表,将多对多的关系,拆分成一对多的关系,中间表至少要有两个外键,分别指向原来的那两张表</p><p>​</p></li><li><p>一对一: 班级和班长, 公民和身份证, 国家和国旗</p><ul><li><p>建表原则:  </p><ul><li>将一对一的情况,当作是一对多情况处理,在任意一张表添加一个外键,并且这个外键要唯一,指向另外一张表</li><li>直接将两张表合并成一张表</li><li>将两张表的主键建立起连接,让两张表里面主键相等</li></ul></li><li><p>实际用途: 用的不是很多.    (拆表操作  )</p><ul><li>相亲网站: <ul><li>个人信息 : 姓名,性别,年龄,身高,体重,三围,兴趣爱好,(年收入,  特长,学历, 职业, 择偶目标,要求)</li><li>拆表操作 : 将个人的常用信息和不常用信息,减少表的臃肿, </li></ul></li></ul><p>​</p></li></ul></li></ul></li></ul><p>​</p><ul><li><p>网上商城表实例的分析:  用户购物流程</p><p>​</p></li></ul><ul><li><p>用户表 (用户的ID,用户名,密码,手机)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">uid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  username <span class="built_in">varchar</span>(<span class="number">31</span>),</span><br><span class="line">  <span class="keyword">password</span> <span class="built_in">varchar</span>(<span class="number">31</span>),</span><br><span class="line">  phone  <span class="built_in">varchar</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'zhangsan'</span>,<span class="string">'123'</span>,<span class="string">'13811118888'</span>);</span><br></pre></td></tr></table></figure></li><li><p>订单表 (订单编号,总价,订单时间 ,地址,外键用户的ID)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orders(</span><br><span class="line"><span class="keyword">oid</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  <span class="keyword">sum</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    otime <span class="keyword">timestamp</span>,</span><br><span class="line">  address <span class="built_in">varchar</span>(<span class="number">100</span>),</span><br><span class="line">  uno <span class="built_in">int</span>,</span><br><span class="line">  foreign <span class="keyword">key</span>(uno) <span class="keyword">references</span> <span class="keyword">user</span>(uid)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">200</span>,<span class="literal">null</span>,<span class="string">'黑马前台旁边小黑屋'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">250</span>,<span class="literal">null</span>,<span class="string">'黑马后台旁边1702'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure></li><li><p>商品表 (商品ID, 商品名称,商品价格,外键cno)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">pid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  pname <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">  price <span class="keyword">double</span>,</span><br><span class="line">  cno <span class="built_in">int</span>,</span><br><span class="line">  foreign <span class="keyword">key</span>(cno) <span class="keyword">references</span> <span class="keyword">category</span>(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'小米mix4'</span>,<span class="number">998</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'锤子'</span>,<span class="number">2888</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'阿迪王'</span>,<span class="number">99</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'老村长'</span>,<span class="number">88</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'劲酒'</span>,<span class="number">35</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'小熊饼干'</span>,<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'卫龙辣条'</span>,<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'旺旺大饼'</span>,<span class="number">1</span>,<span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>​</p></li></ul><ul><li><p>订单项: 中间表(订单ID,商品ID,商品数量,订单项总价)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orderitem(</span><br><span class="line">ono <span class="built_in">int</span>,</span><br><span class="line">  pno <span class="built_in">int</span>,</span><br><span class="line">  foreign <span class="keyword">key</span>(ono) <span class="keyword">references</span> orders(<span class="keyword">oid</span>),</span><br><span class="line">  foreign <span class="keyword">key</span>(pno) <span class="keyword">references</span> product(pid),</span><br><span class="line">  ocount <span class="built_in">int</span>,</span><br><span class="line">  subsum <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">--给1号订单添加商品 200块钱的商品</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orderitem <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">7</span>,<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orderitem <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">8</span>,<span class="number">101</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--给2号订单添加商品 250块钱的商品 ()</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orderitem <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">35</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orderitem <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">99</span>);</span><br></pre></td></tr></table></figure><p>​</p></li></ul><ul><li><p>商品分类表(分类ID,分类名称,分类描述)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">category</span>(</span><br><span class="line">cid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  cname <span class="built_in">varchar</span>(<span class="number">15</span>),</span><br><span class="line">  cdesc <span class="built_in">varchar</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'手机数码'</span>,<span class="string">'电子产品,黑马生产'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'鞋靴箱包'</span>,<span class="string">'江南皮鞋厂倾情打造'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'香烟酒水'</span>,<span class="string">'黄鹤楼,茅台,二锅头'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'酸奶饼干'</span>,<span class="string">'娃哈哈,蒙牛酸酸乳'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'馋嘴零食'</span>,<span class="string">'瓜子花生,八宝粥,辣条'</span>);</span><br></pre></td></tr></table></figure></li></ul><ul><li>多表之间的关系如何维护: 外键约束 :   foreign key</li><li>添加一个外键: alter table product add foreign key(cno)  references category(cid);<ul><li>​        foreign key(cno) references category(cid)</li><li>删除的时候, 先删除外键关联的所有数据,再才能删除分类的数据</li></ul></li><li>建表原则:<ul><li>一对多:<ul><li>建表原则: 在多的一方增加一个外键,指向一的一方</li></ul></li><li>多对多:<ul><li>建表原则: 将多对多转成一对多的关系,创建一张中间表</li></ul></li><li>一对一: 不常用, 拆表操作<ul><li>建表原则:  将两张表合并成一张表<ul><li>将两张表的主键建立起关系</li><li>将一对一的关系当作一对多的关系去处理</li></ul></li></ul></li></ul></li></ul><p>主键约束: 默认就是不能为空, 唯一</p><ul><li>外键都是指向另外一张表的主键</li><li>主键一张表只能有一个</li></ul><p>唯一约束:  列面的内容, 必须是唯一, 不能出现重复情况, 为空</p><ul><li>唯一约束不可以作为其它表的外键</li><li>可以有多个唯一约束</li></ul><p>一对多 : 建表原则: 在多的一方添加一个外键,指向一的一方</p><p>多对多: 建表原则:</p><p>​        拆成一对多</p><p>​        创建一张中间表, 至少要有两个外键, 指向原来的表</p><p>一对一: 建表原则: 合并一张表, 将主键建立关系 , 将它当作一对多的情况来处理</p><ul><li><p>数据库客户端软件</p><p>​</p></li></ul><h3 id="使用商城表完成对商品信息的多表查询"><a href="#使用商城表完成对商品信息的多表查询" class="headerlink" title="使用商城表完成对商品信息的多表查询"></a>使用商城表完成对商品信息的多表查询</h3><h4 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析:"></a>需求分析:</h4><p>在我们的商城案例中,我的订单中包含很多信息.打开我的订单需要去查询表</p><h4 id="技术分析-1"><a href="#技术分析-1" class="headerlink" title="技术分析:"></a>技术分析:</h4><h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><ul><li>交叉连接查询  笛卡尔积</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">USER</span> ,orders ;</span><br></pre></td></tr></table></figure><ul><li>内连接查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="string">`user`</span> u <span class="keyword">JOIN</span> orders  o <span class="keyword">ON</span> u.uid=o.oid;</span><br></pre></td></tr></table></figure><ul><li>左外连接</li></ul><ul><li>右外连接  </li></ul><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><ul><li><p>每页数据数据3</p></li><li><p>起始索引从0 </p></li><li><p>第1页: 0</p></li><li><p>第2页: 3</p><p>起始索引:  index 代表显示第几页 页数从1开始</p><p>每页显示3条数据</p><p>startIndex  = (index-1)*3</p><p>​</p></li></ul><p>第一个参数是索引 </p><p>第二个参数显示的个数</p><p>select * from product limit 0,3;</p><p>select * from product limit 3,3;</p><h4 id="子查询-了解的内容-非常重要"><a href="#子查询-了解的内容-非常重要" class="headerlink" title="子查询(了解的内容,非常重要)"></a>子查询(了解的内容,非常重要)</h4><p>查询出(商品名称,商品分类名称)信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  查询分类名称为手机数码的所有商品</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> product <span class="keyword">where</span> cname =<span class="string">'手机数码'</span>;</span><br></pre></td></tr></table></figure><h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><ul><li>按照商品分类的名称统计商品的个数:</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure><ul><li>查询1号订单的订单项信息和商品信息</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="多表查询练习数据"><a href="#多表查询练习数据" class="headerlink" title="多表查询练习数据"></a>多表查询练习数据</h4><ul><li>员工信息表</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--员工信息表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">empno <span class="built_in">INT</span>,</span><br><span class="line">ename <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">job <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">mgr<span class="built_in">INT</span>,</span><br><span class="line">hiredate <span class="built_in">DATE</span>,</span><br><span class="line">sal<span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">comm <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">deptno <span class="built_in">INT</span></span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7369</span>,<span class="string">'SMITH'</span>,<span class="string">'CLERK'</span>,<span class="number">7902</span>,<span class="string">'1980-12-17'</span>,<span class="number">800</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7499</span>,<span class="string">'ALLEN'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-02-20'</span>,<span class="number">1600</span>,<span class="number">300</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7521</span>,<span class="string">'WARD'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-02-22'</span>,<span class="number">1250</span>,<span class="number">500</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7566</span>,<span class="string">'JONES'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-04-02'</span>,<span class="number">2975</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7654</span>,<span class="string">'MARTIN'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-09-28'</span>,<span class="number">1250</span>,<span class="number">1400</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7698</span>,<span class="string">'BLAKE'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-05-01'</span>,<span class="number">2850</span>,<span class="literal">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7782</span>,<span class="string">'CLARK'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-06-09'</span>,<span class="number">2450</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7788</span>,<span class="string">'SCOTT'</span>,<span class="string">'ANALYST'</span>,<span class="number">7566</span>,<span class="string">'1987-04-19'</span>,<span class="number">3000</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7839</span>,<span class="string">'KING'</span>,<span class="string">'PRESIDENT'</span>,<span class="literal">NULL</span>,<span class="string">'1981-11-17'</span>,<span class="number">5000</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7844</span>,<span class="string">'TURNER'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-09-08'</span>,<span class="number">1500</span>,<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7876</span>,<span class="string">'ADAMS'</span>,<span class="string">'CLERK'</span>,<span class="number">7788</span>,<span class="string">'1987-05-23'</span>,<span class="number">1100</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7900</span>,<span class="string">'JAMES'</span>,<span class="string">'CLERK'</span>,<span class="number">7698</span>,<span class="string">'1981-12-03'</span>,<span class="number">950</span>,<span class="literal">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7902</span>,<span class="string">'FORD'</span>,<span class="string">'ANALYST'</span>,<span class="number">7566</span>,<span class="string">'1981-12-03'</span>,<span class="number">3000</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7934</span>,<span class="string">'MILLER'</span>,<span class="string">'CLERK'</span>,<span class="number">7782</span>,<span class="string">'1982-01-23'</span>,<span class="number">1300</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">values</span>(<span class="number">7981</span>,<span class="string">'MILLER'</span>,<span class="string">'CLERK'</span>,<span class="number">7788</span>,<span class="string">'1992-01-23'</span>,<span class="number">2600</span>,<span class="number">500</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><ul><li>部门信息表</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">deptno<span class="built_in">INT</span>,</span><br><span class="line">dname<span class="built_in">varchar</span>(<span class="number">14</span>),</span><br><span class="line">loc<span class="built_in">varchar</span>(<span class="number">13</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">values</span>(<span class="number">10</span>, <span class="string">'ACCOUNTING'</span>, <span class="string">'NEW YORK'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">values</span>(<span class="number">20</span>, <span class="string">'RESEARCH'</span>, <span class="string">'DALLAS'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">values</span>(<span class="number">30</span>, <span class="string">'SALES'</span>, <span class="string">'CHICAGO'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">values</span>(<span class="number">40</span>, <span class="string">'OPERATIONS'</span>, <span class="string">'BOSTON'</span>);</span><br></pre></td></tr></table></figure><ul><li>基本查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--所有员工的信息</span></span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--薪资大于等于1000并且小于等于2000的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal &gt; <span class="number">1000</span> <span class="keyword">AND</span> sal &lt;<span class="number">2000</span>;</span><br><span class="line"><span class="comment">--从员工表中查询出所有的部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.<span class="string">`deptno`</span> <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> emp.deptno;</span><br><span class="line"><span class="comment">--查询出名字以A开头的员工的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`ename`</span> <span class="keyword">LIKE</span> <span class="string">'A%'</span>;</span><br><span class="line"><span class="comment">--查询出名字第二个字母是L的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`ename`</span> <span class="keyword">LIKE</span> <span class="string">'_L%'</span>;</span><br><span class="line"><span class="comment">--查询出没有奖金的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`comm`</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">--所有员工的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(emp.<span class="string">`sal`</span>) 平均工资  <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--所有员工的工资总和</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(emp.<span class="string">`sal`</span>) 平均工资  <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--所有员工的数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(emp.<span class="string">`empno`</span>)   <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">MAX</span>(emp.<span class="string">`sal`</span>) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--最少工资</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">MIN</span>(emp.<span class="string">`sal`</span>) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--最高工资的员工信息</span></span><br><span class="line"><span class="comment">--最低工资的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">HAVING</span>  emp.<span class="string">`sal`</span> = <span class="keyword">MIN</span>(emp.<span class="string">`sal`</span>);</span><br></pre></td></tr></table></figure><ul><li>分组查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--每个部门的平均工资</span></span><br></pre></td></tr></table></figure><ul><li>子查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单行子查询(&gt; &lt; &gt;= &lt;= = &lt;&gt;)</span></span><br><span class="line"><span class="comment">-- 查询出高于10号部门的平均工资的员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多行子查询(in  not in any all)    &gt;any  &gt;all</span></span><br><span class="line"><span class="comment">-- 查询出比10号部门任何员工薪资高的员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多列子查询(实际使用较少)   in</span></span><br><span class="line"><span class="comment">-- 和10号部门同名同工作的员工信息</span></span><br><span class="line"><span class="comment">-- Select接子查询</span></span><br><span class="line"><span class="comment">-- 获取员工的名字和部门的名字</span></span><br><span class="line"><span class="comment">-- from后面接子查询</span></span><br><span class="line"><span class="comment">-- 查询emp表中经理信息</span></span><br><span class="line"><span class="comment">-- where 接子查询</span></span><br><span class="line"><span class="comment">-- 薪资高于10号部门平均工资的所有员工信息</span></span><br><span class="line"><span class="comment">-- having后面接子查询</span></span><br><span class="line"><span class="comment">-- 有哪些部门的平均工资高于30号部门的平均工资</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 工资&gt;JONES工资</span></span><br><span class="line"><span class="comment">-- 查询与SCOTT同一个部门的员工</span></span><br><span class="line"><span class="comment">-- 工资高于30号部门所有人的员工信息</span></span><br><span class="line"><span class="comment">-- 查询工作和工资与MARTIN完全相同的员工信息</span></span><br><span class="line"><span class="comment">-- 有两个以上直接下属的员工信息</span></span><br><span class="line"><span class="comment">-- 查询员工编号为7788的员工名称,员工工资,部门名称,部门地址</span></span><br></pre></td></tr></table></figure><ul><li>SQL查询的综合案例</li></ul><ol><li>查询出高于本部门平均工资的员工信息</li></ol><ol start="2"><li>列出达拉斯加工作的人中,比纽约平均工资高的人</li><li>查询7369员工编号,姓名,经理编号和经理姓名</li><li>查询出各个部门薪水最高的员工所有信息</li></ol><h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">test</span>(</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">  kecheng <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">  fenshu <span class="built_in">CHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">test</span> <span class="keyword">VALUES</span>(<span class="string">'张三'</span>,<span class="string">'语文'</span>,<span class="number">81</span>),</span><br><span class="line">(<span class="string">'张三'</span>,<span class="string">'数学'</span>,<span class="number">75</span>),</span><br><span class="line">(<span class="string">'李四'</span>,<span class="string">'语文'</span>,<span class="number">76</span>),</span><br><span class="line">(<span class="string">'李四'</span>,<span class="string">'数学'</span>,<span class="number">90</span>),</span><br><span class="line">(<span class="string">'王五'</span>,<span class="string">'语文'</span>,<span class="number">81</span>),</span><br><span class="line">(<span class="string">'王五'</span>,<span class="string">'数学'</span>,<span class="number">82</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--请用一条Sql语句查处分数大于80的学生</span></span><br></pre></td></tr></table></figure>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line">- 交叉连接查询  笛卡尔积</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">category</span>;</span><br><span class="line"></span><br><span class="line">笛卡尔积 ,查出来是两张表的乘积 ,查出来的结果没有意义</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product,<span class="keyword">category</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--过滤出有意义的数据</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product,<span class="keyword">category</span> <span class="keyword">WHERE</span> cno=cid;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product <span class="keyword">AS</span> p,<span class="keyword">category</span> <span class="keyword">AS</span> c <span class="keyword">WHERE</span> p.cno=c.cid;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product p,<span class="keyword">category</span> c <span class="keyword">WHERE</span> p.cno=c.cid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--数据准备</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'耐克帝'</span>,<span class="number">10</span>,<span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">- 内连接查询</span><br><span class="line"><span class="comment">-- 隐式内链接</span></span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product p,<span class="keyword">category</span> c <span class="keyword">WHERE</span> p.cno=c.cid;</span><br><span class="line"><span class="comment">-- 显示内链接</span></span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product p <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">category</span> c <span class="keyword">ON</span> p.cno=c.cid;</span><br><span class="line"><span class="comment">-- 区别:</span></span><br><span class="line">隐式内链接: 在查询出结果的基础上去做的WHERE条件过滤</span><br><span class="line">显示内链接: 带着条件去查询结果, 执行效率要高</span><br><span class="line"></span><br><span class="line">- 左外连接</span><br><span class="line">  左外连接,会将左表中的所有数据都查询出来, 如果右表中没有对应的数据,用NULL代替</span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product p <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="keyword">category</span> c <span class="keyword">ON</span> p.cno=c.cid;</span><br><span class="line"></span><br><span class="line">- 准备工作</span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">category</span> <span class="keyword">VALUES</span>(<span class="number">100</span>,<span class="string">'电脑办公'</span>,<span class="string">'电脑叉叉差'</span>);</span><br><span class="line">- 右外连接: 会将右表所有数据都查询出来, 如果左表没有对应数据的话, 用NULL代替</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product p <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="keyword">category</span> c <span class="keyword">ON</span> p.cno=c.cid;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">-- 查询分类名称为手机数码的所有商品</span></span><br><span class="line">   1.查询分类名为手机数码的ID</span><br><span class="line">   <span class="keyword">SELECT</span> cid <span class="keyword">FROM</span> <span class="keyword">category</span> <span class="keyword">WHERE</span> cname=<span class="string">'手机数码'</span>;</span><br><span class="line">   2.得出ID为1的结果</span><br><span class="line">   <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> cno = (<span class="keyword">SELECT</span> cid <span class="keyword">FROM</span> <span class="keyword">category</span> <span class="keyword">WHERE</span> cname=<span class="string">'手机数码'</span>);</span><br><span class="line">   </span><br><span class="line"><span class="comment">-- 查询出(商品名称,商品分类名称)信息</span></span><br><span class="line">   <span class="comment">--左连接</span></span><br><span class="line">   <span class="keyword">SELECT</span> p.pname,c.cname <span class="keyword">FROM</span> product p <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="keyword">category</span> c <span class="keyword">ON</span> p.cno = c.cid;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">--子查询</span></span><br><span class="line">   <span class="keyword">SELECT</span> pname ,(<span class="keyword">SELECT</span> cname <span class="keyword">FROM</span> <span class="keyword">category</span> c <span class="keyword">WHERE</span>  p.cno=c.cid ) <span class="keyword">AS</span> 商品分类名称  <span class="keyword">FROM</span> product p;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">empno <span class="built_in">INT</span>,</span><br><span class="line">ename <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">job <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">mgr<span class="built_in">INT</span>,</span><br><span class="line">hiredate <span class="built_in">DATE</span>,</span><br><span class="line">sal<span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">comm <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">deptno <span class="built_in">INT</span></span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7369</span>,<span class="string">'SMITH'</span>,<span class="string">'CLERK'</span>,<span class="number">7902</span>,<span class="string">'1980-12-17'</span>,<span class="number">800</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7499</span>,<span class="string">'ALLEN'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-02-20'</span>,<span class="number">1600</span>,<span class="number">300</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7521</span>,<span class="string">'WARD'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-02-22'</span>,<span class="number">1250</span>,<span class="number">500</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7566</span>,<span class="string">'JONES'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-04-02'</span>,<span class="number">2975</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7654</span>,<span class="string">'MARTIN'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-09-28'</span>,<span class="number">1250</span>,<span class="number">1400</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7698</span>,<span class="string">'BLAKE'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-05-01'</span>,<span class="number">2850</span>,<span class="literal">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7782</span>,<span class="string">'CLARK'</span>,<span class="string">'MANAGER'</span>,<span class="number">7839</span>,<span class="string">'1981-06-09'</span>,<span class="number">2450</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7788</span>,<span class="string">'SCOTT'</span>,<span class="string">'ANALYST'</span>,<span class="number">7566</span>,<span class="string">'1987-04-19'</span>,<span class="number">3000</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7839</span>,<span class="string">'KING'</span>,<span class="string">'PRESIDENT'</span>,<span class="literal">NULL</span>,<span class="string">'1981-11-17'</span>,<span class="number">5000</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7844</span>,<span class="string">'TURNER'</span>,<span class="string">'SALESMAN'</span>,<span class="number">7698</span>,<span class="string">'1981-09-08'</span>,<span class="number">1500</span>,<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7876</span>,<span class="string">'ADAMS'</span>,<span class="string">'CLERK'</span>,<span class="number">7788</span>,<span class="string">'1987-05-23'</span>,<span class="number">1100</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7900</span>,<span class="string">'JAMES'</span>,<span class="string">'CLERK'</span>,<span class="number">7698</span>,<span class="string">'1981-12-03'</span>,<span class="number">950</span>,<span class="literal">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7902</span>,<span class="string">'FORD'</span>,<span class="string">'ANALYST'</span>,<span class="number">7566</span>,<span class="string">'1981-12-03'</span>,<span class="number">3000</span>,<span class="literal">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7934</span>,<span class="string">'MILLER'</span>,<span class="string">'CLERK'</span>,<span class="number">7782</span>,<span class="string">'1982-01-23'</span>,<span class="number">1300</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span>(<span class="number">7981</span>,<span class="string">'MILLER'</span>,<span class="string">'CLERK'</span>,<span class="number">7788</span>,<span class="string">'1992-01-23'</span>,<span class="number">2600</span>,<span class="number">500</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">deptno<span class="built_in">INT</span>,</span><br><span class="line">dname<span class="built_in">VARCHAR</span>(<span class="number">14</span>),</span><br><span class="line">loc<span class="built_in">VARCHAR</span>(<span class="number">13</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span>(<span class="number">10</span>, <span class="string">'ACCOUNTING'</span>, <span class="string">'NEW YORK'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span>(<span class="number">20</span>, <span class="string">'RESEARCH'</span>, <span class="string">'DALLAS'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span>(<span class="number">30</span>, <span class="string">'SALES'</span>, <span class="string">'CHICAGO'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span>(<span class="number">40</span>, <span class="string">'OPERATIONS'</span>, <span class="string">'BOSTON'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(sal) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--最少工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(sal) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">--最高工资的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal = (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(sal) <span class="keyword">FROM</span> emp);</span><br><span class="line"></span><br><span class="line"><span class="comment">--最低工资的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal = (<span class="keyword">SELECT</span> <span class="keyword">MIN</span>(sal) <span class="keyword">FROM</span> emp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 单行子查询(&gt; &lt; &gt;= &lt;= = &lt;&gt;)</span></span><br><span class="line"><span class="comment">-- 查询出高于10号部门的平均工资的员工信息</span></span><br><span class="line">   1.10号部门的平均工资</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>;</span><br><span class="line">   2. 高于上面结果员工信息 </span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal &gt; (<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>);</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多行子查询(in  not in any all)    &gt;any  &gt;all</span></span><br><span class="line"><span class="comment">-- 查询出比10号部门任何员工薪资高的员工信息</span></span><br><span class="line">1. 查询出10号部门最高工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>;</span><br><span class="line">2. 得出结果</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal &gt; (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>);</span><br><span class="line"><span class="comment">-- 查询出比10号部门任意一个员工薪资高的所有员工信息 : 只要比其中随便一个工资都可以</span></span><br><span class="line"><span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal &gt;<span class="keyword">ANY</span>(<span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = <span class="number">10</span>) <span class="keyword">AND</span> deptno != <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多列子查询(实际使用较少)   in</span></span><br><span class="line"><span class="comment">-- 和10号部门同名同工作的员工信息</span></span><br><span class="line">1. 查询出10号部门所有人 名字和工作</span><br><span class="line"><span class="keyword">SELECT</span> ename,job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">10</span>;</span><br><span class="line">2. 得出结果</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> (ename,job) <span class="keyword">IN</span> (<span class="keyword">SELECT</span> ename,job <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">10</span>) <span class="keyword">AND</span> deptno !=<span class="number">10</span>;</span><br><span class="line"><span class="comment">-- Select后面接子查询</span></span><br><span class="line"><span class="comment">-- 获取员工的名字和部门的名字</span></span><br><span class="line"><span class="keyword">SELECT</span> ename,deptno <span class="keyword">FROM</span> emp ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ename,(<span class="keyword">SELECT</span> dname <span class="keyword">FROM</span> dept d <span class="keyword">WHERE</span> d.deptno = e.deptno ) 部门名称 <span class="keyword">FROM</span> emp e ;</span><br><span class="line"><span class="comment">-- from后面接子查询</span></span><br><span class="line"><span class="comment">-- 查询emp表中所有管理层的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> mgr <span class="keyword">FROM</span> emp;</span><br><span class="line"></span><br><span class="line">- 得出结果</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp e,(<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> mgr <span class="keyword">FROM</span> emp) mgrtable <span class="keyword">WHERE</span> e.empno = mgrtable.mgr;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- where 接子查询</span></span><br><span class="line"><span class="comment">-- 薪资高于10号部门平均工资的所有员工信息</span></span><br><span class="line">1. 10号部门平均工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">10</span>;</span><br><span class="line">2. 得出结果</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal &gt; (<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">10</span>);</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line"><span class="comment">-- having后面接子查询</span></span><br><span class="line"><span class="comment">-- 有哪些部门的平均工资高于30号部门的平均工资</span></span><br><span class="line">1. 统计所有的部门的平均工资</span><br><span class="line"><span class="keyword">SELECT</span> deptno, <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line">2. 30号部门的平均工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">30</span>;</span><br><span class="line">3.得出结果:</span><br><span class="line"><span class="keyword">SELECT</span> deptno, <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno <span class="keyword">HAVING</span> <span class="keyword">AVG</span>(sal) &gt; (<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno=<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出达拉斯加工作的人中,比纽约平均工资高的人</span></span><br><span class="line">   1. 查处达拉斯加工作的人</span><br><span class="line">      1. 查询出达拉斯的部门编号</span><br><span class="line">      <span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'DALLAS'</span>;</span><br><span class="line">      2. <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = ( <span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'DALLAS'</span>);</span><br><span class="line">   </span><br><span class="line">   2. 查出纽约工作的人的平均工资</span><br><span class="line">      1. 查处纽约的部门编号</span><br><span class="line">       <span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'NEW YORK'</span>;</span><br><span class="line">      2. <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = (<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'NEW YORK'</span>);</span><br><span class="line">      </span><br><span class="line">   3. 得出最终结果:</span><br><span class="line">     <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = ( <span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'DALLAS'</span>)</span><br><span class="line">      <span class="keyword">AND</span> </span><br><span class="line">      sal &gt; (<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptno = (<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> loc =<span class="string">'NEW YORK'</span>));</span><br></pre></td></tr></table></figure><h4 id="条件表达式-case…when-MySql和Oracle-通用"><a href="#条件表达式-case…when-MySql和Oracle-通用" class="headerlink" title="条件表达式: case…when    (MySql和Oracle 通用)"></a>条件表达式: case…when    (MySql和Oracle 通用)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="keyword">case</span> ename</span><br><span class="line"><span class="keyword">when</span> <span class="string">'KING'</span> <span class="keyword">then</span> <span class="string">'彤彤'</span></span><br><span class="line">    <span class="keyword">when</span> <span class="string">'ALLEN'</span> <span class="keyword">then</span> <span class="string">'老子'</span></span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    <span class="string">'其他'</span></span><br><span class="line">    <span class="keyword">end</span> <span class="string">"中文名"</span></span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="MySql" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>IntelliJ IDEA的高效使用</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/25/IEDA%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/25/IEDA高效使用/</id>
    <published>2018-10-25T14:35:37.000Z</published>
    <updated>2018-11-20T00:53:20.725Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!</strong><excerpt in="" index="" |="" 首页摘要=""></excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h1 id="IEDA高效使用"><a href="#IEDA高效使用" class="headerlink" title="IEDA高效使用"></a>IEDA高效使用</h1><h2 id="1-无处不在的跳转"><a href="#1-无处不在的跳转" class="headerlink" title="1.无处不在的跳转"></a>1.无处不在的跳转</h2><ul><li>项目之间跳转: Ctrl + Alt + [ / ]</li><li>文件之间跳转: Ctrl + E (个人更喜欢: Ctrl + Tab)</li><li>跳转已经打开的文件:Ctrl + Alt + 左/右</li></ul><h2 id="2-高校定位代码"><a href="#2-高校定位代码" class="headerlink" title="2.高校定位代码"></a>2.高校定位代码</h2><ul><li>新建书签 ：F11 (带有数字的书签:Ctrl + F11)</li><li>添加收藏:Shift + Alt + F</li></ul><h2 id="3-精准搜索"><a href="#3-精准搜索" class="headerlink" title="3.精准搜索"></a>3.精准搜索</h2><ul><li>搜索指定类:Ctrl + N</li><li>搜索指定文件:Shift + Ctrl + N</li><li>寻找指定函数:Shift + Ctrl + Alt +N</li><li>搜索指定的字符串: Ctrl + Shift + F</li></ul><h2 id="4-列操作"><a href="#4-列操作" class="headerlink" title="4.列操作"></a>4.列操作</h2><ul><li>选中其他一样的符号:Shift + Ctrl + Alt + J</li></ul><h2 id="5-Postfix"><a href="#5-Postfix" class="headerlink" title="5.Postfix"></a>5.Postfix</h2><ul><li>快速写for循环: 100.fori</li><li>快速输出: .sout</li><li>构造器中快速生成属性: 属性名字.field</li><li>快速返回: 返回值.retu..</li><li>判断值是否不等于null: 值.null.. </li></ul><h2 id="6-Alt-Enter"><a href="#6-Alt-Enter" class="headerlink" title="6.Alt + Enter"></a>6.Alt + Enter</h2><ul><li><p>快速创建没有的函数</p></li><li><p>整理代码☞最简洁状态</p></li><li><p>快速格式化代码串</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String x= String.format(<span class="string">"name:%s,age:%d"</span>, name, age);</span><br></pre></td></tr></table></figure></li><li><p>快速实现接口</p></li><li><p>错误单词拼写提示(错的单词下方会有浪线提示)</p></li><li><p>导包</p></li></ul><h2 id="7-重构"><a href="#7-重构" class="headerlink" title="7.重构"></a>7.重构</h2><ul><li>重构变量: Shift + F6</li><li>重构函数:<ul><li>重构参数: Ctrl + F6</li><li>直接填加参数修改方法:Alt + Enter(优)</li></ul></li></ul><h2 id="8-抽取"><a href="#8-抽取" class="headerlink" title="8.抽取"></a>8.抽取</h2><ul><li>抽取字符串成变量: Ctrl + Alt + V(与有道词典快捷键重复,非常纠结)</li><li>抽取成静态常量: Ctrl + Alt + C</li><li>抽取成成员变量: Ctrl + Alt + F</li><li>抽取函数: Ctrl + Alt + M</li></ul><h2 id="9-git的集成"><a href="#9-git的集成" class="headerlink" title="9.git的集成"></a>9.git的集成</h2><ul><li>右击这行代码前方点击第一个显示作者信息</li><li>查看与版本库中修改过的部分 : Ctrl + Shift + Alt + 上/下</li><li>快速撤销:Alt + Ctrl + Z (QQ 冲突)</li></ul><h2 id="10-local-history"><a href="#10-local-history" class="headerlink" title="10 .local history"></a>10 .local history</h2><ul><li><h2 id="11-关联一切"><a href="#11-关联一切" class="headerlink" title="11.关联一切"></a>11.关联一切</h2></li><li><p>Spring :直达使用的类</p></li><li>关联上数据库:书写SQL提示</li></ul><h2 id="12-断点调试"><a href="#12-断点调试" class="headerlink" title="12.断点调试"></a>12.断点调试</h2><ul><li>添加断点:Ctrl + F8</li><li>断点运行: </li><li>单步运行: F8</li><li>下一个断点: F9</li><li>查看所有断点:Shift + Ctrl +  F8</li><li>禁止所有断点:</li><li>条件断点: Shift + Ctrl +  F8</li><li>setValue: 位置按F2</li></ul><h2 id="13-其他操作"><a href="#13-其他操作" class="headerlink" title="13.其他操作"></a>13.其他操作</h2><ul><li>复制文件: F5</li><li>移动文件: F6</li><li>复制完整文件名: Shift + Ctrl + C</li><li>调出剪切板: Ctrl + Shift + V</li></ul><h2 id="14"><a href="#14" class="headerlink" title="14 ."></a>14 .</h2><ul><li><p>查看类的大纲: Ctrl +F12</p></li><li><p>查看继承图:Ctrl + Shift + Alt + U</p></li><li><p>查看类的继承关系: Ctrl + H</p></li><li><p>方法调用层次:Ctrl + Alt + H</p></li></ul></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Java  基础大复习</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/24/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%A4%8D%E4%B9%A0/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/24/Java基础大复习/</id>
    <published>2018-10-24T14:35:37.000Z</published>
    <updated>2018-10-28T07:11:40.249Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!</strong><excerpt in="" index="" |="" 首页摘要=""><br> 复习下Java基础!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-内存分析"><a href="#1-内存分析" class="headerlink" title="1. 内存分析"></a>1. 内存分析</h2><blockquote><p>Java虚拟机的内存可以分为三个区域:栈stack,堆heap,方法区method area</p></blockquote><h3 id="1-1-栈的特点如下"><a href="#1-1-栈的特点如下" class="headerlink" title="1.1.栈的特点如下:"></a>1.1.栈的特点如下:</h3><p><img src="/img/1539781422834.png" alt="1539781422834"></p><h3 id="1-2-堆的特点如下"><a href="#1-2-堆的特点如下" class="headerlink" title="1.2.堆的特点如下:"></a>1.2.堆的特点如下:</h3><p><img src="/img/1539781521522.png" alt="1539781521522"></p><h3 id="1-3-方法区特点如下"><a href="#1-3-方法区特点如下" class="headerlink" title="1,3.方法区特点如下:"></a>1,3.方法区特点如下:</h3><p><img src="/img/1539781599776.png" alt="1539781599776"></p><h3 id="1-4-分析流程"><a href="#1-4-分析流程" class="headerlink" title="1.4.分析流程"></a>1.4.分析流程</h3><p><img src="/img/1539782448438.png" alt="1539782448438">     </p><h2 id="2-Java垃圾回收机制-Garbage-Collection"><a href="#2-Java垃圾回收机制-Garbage-Collection" class="headerlink" title="2. Java垃圾回收机制(Garbage Collection)"></a>2. Java垃圾回收机制(Garbage Collection)</h2><h3 id="2-1-垃圾回收算法"><a href="#2-1-垃圾回收算法" class="headerlink" title="2.1.垃圾回收算法:"></a>2.1.垃圾回收算法:</h3><blockquote><ul><li>引用计数法</li><li>引用可达法(根搜索算法)</li></ul></blockquote><h3 id="2-2-分代垃圾回收机制"><a href="#2-2-分代垃圾回收机制" class="headerlink" title="2.2.分代垃圾回收机制"></a>2.2.分代垃圾回收机制</h3><blockquote><ul><li>年轻代</li><li>年老代</li><li>持久代</li></ul></blockquote><h2 id="3-StringBuilder和StringBuffer的主要区别-StringBuffer方法用synchronized修饰"><a href="#3-StringBuilder和StringBuffer的主要区别-StringBuffer方法用synchronized修饰" class="headerlink" title="3.StringBuilder和StringBuffer的主要区别:StringBuffer方法用synchronized修饰"></a>3.StringBuilder和StringBuffer的主要区别:StringBuffer方法用synchronized修饰</h2><h2 id="3-关于包装类的缓存问题"><a href="#3-关于包装类的缓存问题" class="headerlink" title="3.关于包装类的缓存问题"></a>3.关于包装类的缓存问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Integer d=<span class="number">1234</span>;</span><br><span class="line">INteget d1=<span class="number">1234</span>;</span><br><span class="line">System.out.print(d==d1);     <span class="comment">//结果false;</span></span><br><span class="line">System.out.print(d.equals(d1));    <span class="comment">//结果:true</span></span><br><span class="line"></span><br><span class="line">Integer d2=<span class="number">123</span>;</span><br><span class="line">Ingeger d3=<span class="number">123</span>;</span><br><span class="line">System.out.print(d2==d3);            <span class="comment">//结果:true;        [-128,127]之间数.仍然当基本类型来处理</span></span><br><span class="line">System.out.print(d2.equals(d3));     <span class="comment">//结果:true</span></span><br></pre></td></tr></table></figure><h2 id="4-容器"><a href="#4-容器" class="headerlink" title="4.容器"></a>4.容器</h2><h3 id="4-1-接口层次示意图"><a href="#4-1-接口层次示意图" class="headerlink" title="4.1 接口层次示意图"></a>4.1 接口层次示意图</h3><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\1539949593458.png" alt="1539949593458"></p><blockquote><p>​               Collection                                                Map</p><p>​                /                  \                             |</p><p>​          Set                  List                                         HashMap</p><p>​          |                        |            \</p><p>​         HashSet          ArrayList      LinkedList</p></blockquote><h3 id="4-1-List接口"><a href="#4-1-List接口" class="headerlink" title="4.1 List接口"></a>4.1 List接口</h3><blockquote><p>有序的Collection，此接口的用户可以成对列表中的每个元素的插入位置进行精确的定位，用户可<br>以根据元素的整数索引（在列表中的位置）访问元素，并搜索列表当中的元素。<br>与set不同，列表通常允许重复的元素，更精确的讲列表通常允许满足e1.equals(e2)条件的元素e1，e2并存，并且如果列表本身允许null元素的话，通常他们允许多个null元素。</p></blockquote><h4 id="4-1-1-常用的三个子类"><a href="#4-1-1-常用的三个子类" class="headerlink" title="4.1.1 常用的三个子类"></a>4.1.1 常用的三个子类</h4><blockquote><ul><li><p>ArrayList  : 底层实现原理Object数组   查询快,修改,插入,删除慢</p></li><li><p>LinkedList :   底层实现链表      查询慢.修改,插入,删除快</p></li><li><p>Vector: 线程安全 ,效率低</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;   List list= Collections.synchronizedList(<span class="keyword">new</span> ArrayList());<span class="comment">// 线程安全 </span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h4 id="4-1-2-自己动手模拟ArrayList"><a href="#4-1-2-自己动手模拟ArrayList" class="headerlink" title="4.1.2 自己动手模拟ArrayList"></a>4.1.2 自己动手模拟ArrayList</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自己实现ArrayList</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArrayList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] elements;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyArrayList() &#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyArrayList(<span class="keyword">int</span> space) &#123;</span><br><span class="line">        elements = <span class="keyword">new</span> Object[space];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == elements.length) &#123;</span><br><span class="line">            Object[] newElements = <span class="keyword">new</span> Object[<span class="number">2</span> * size + <span class="number">2</span>];</span><br><span class="line">            System.arraycopy(elements, <span class="number">0</span>, newElements, <span class="number">0</span>, elements.length);</span><br><span class="line">            elements = newElements;</span><br><span class="line">        &#125;</span><br><span class="line">        elements[size++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        <span class="keyword">return</span> elements[index];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        System.arraycopy(elements, index + <span class="number">1</span>, elements, index, elements.length - index - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (get(i).equals(obj))</span><br><span class="line">                remove(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        Object o = elements[index];</span><br><span class="line">        elements[index] = obj;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        System.arraycopy(elements, index, elements, index + <span class="number">1</span>, elements.length - index);</span><br><span class="line">        elements[index] = obj;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rangeCheck</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyArrayList list = <span class="keyword">new</span> MyArrayList();</span><br><span class="line">        list.add(<span class="string">"111"</span>);</span><br><span class="line">        list.add(<span class="string">"222"</span>);</span><br><span class="line">        list.remove(<span class="string">"111"</span>);</span><br><span class="line">        System.out.println(list.size);</span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">        list.set(<span class="number">0</span>, <span class="string">"3333"</span>);</span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line"><span class="comment">//        System.out.println(list.get(14));</span></span><br><span class="line"><span class="comment">//        System.out.println(list.size());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-3自己动手模拟LinkedList"><a href="#4-1-3自己动手模拟LinkedList" class="headerlink" title="4.1.3自己动手模拟LinkedList"></a>4.1.3自己动手模拟LinkedList</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        Node n = <span class="keyword">new</span> Node();</span><br><span class="line">        n.setObj(obj);</span><br><span class="line">        <span class="keyword">if</span> (first == <span class="keyword">null</span>) &#123;</span><br><span class="line">            first = n;</span><br><span class="line">            last = n;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            last.setNextNode(n);</span><br><span class="line">            n.setPreNode(last);</span><br><span class="line">            last = n;</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rangeCheck</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= size || index &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        <span class="keyword">return</span> node(index).getObj();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node n = node(index);</span><br><span class="line">        Node up = n.getPreNode();</span><br><span class="line">        Node down = n.getNextNode();</span><br><span class="line">        up.setNextNode(down);</span><br><span class="line">        down.setPreNode(up);</span><br><span class="line"><span class="comment">//        n.getPreNode().setNextNode(n.getNextNode());</span></span><br><span class="line"><span class="comment">//        n.getNextNode().setPreNode(n.getPreNode());</span></span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (first != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Node temp = first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">                temp = temp.getNextNode();</span><br><span class="line">            <span class="keyword">return</span> temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, Object obj)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node();</span><br><span class="line">        newNode.setObj(obj);</span><br><span class="line">        Node n = node(index);</span><br><span class="line">        Node up = n.getPreNode();</span><br><span class="line">        up.setNextNode(newNode);</span><br><span class="line">        newNode.setPreNode(up);</span><br><span class="line">        newNode.setNextNode(n);</span><br><span class="line">        n.setPreNode(newNode);</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyLinkedList list = <span class="keyword">new</span> MyLinkedList();</span><br><span class="line">        list.add(<span class="string">"111"</span>);</span><br><span class="line">        list.add(<span class="string">"222"</span>);</span><br><span class="line">        list.add(<span class="string">"333"</span>);</span><br><span class="line">        list.add(<span class="number">1</span>, <span class="string">"AAA"</span>);</span><br><span class="line">        System.out.println(list.size());</span><br><span class="line">        System.out.println(list.get(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node preNode;</span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">private</span> Node nextNode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Node preNode, Object obj, Node nextNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preNode = preNode;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">        <span class="keyword">this</span>.nextNode = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">getPreNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> preNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPreNode</span><span class="params">(Node preNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preNode = preNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getObj</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObj</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">getNextNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nextNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNextNode</span><span class="params">(Node nextNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nextNode = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2Map"><a href="#4-2Map" class="headerlink" title="4.2Map"></a>4.2Map</h3><blockquote><p>实现原理:数组+链表</p></blockquote><h4 id="4-2-1常用实现类"><a href="#4-2-1常用实现类" class="headerlink" title="4.2.1常用实现类:"></a>4.2.1常用实现类:</h4><blockquote><ul><li>HashMap       快,不安全</li><li>HashTable      慢,安全</li></ul></blockquote><h4 id="4-2-2-HashMap-的简单模拟"><a href="#4-2-2-HashMap-的简单模拟" class="headerlink" title="4.2.2 HashMap 的简单模拟"></a>4.2.2 HashMap 的简单模拟</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LinkedList[] arr = <span class="keyword">new</span> LinkedList[<span class="number">999</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Object key, Object value)</span> </span>&#123;</span><br><span class="line">        MyEntry entry = <span class="keyword">new</span> MyEntry();</span><br><span class="line">        entry.value = value;</span><br><span class="line">        entry.key = key;</span><br><span class="line">        <span class="keyword">int</span> hashKey = key.hashCode() % arr.length;</span><br><span class="line">        <span class="keyword">if</span> (arr[hashKey] == <span class="keyword">null</span>) &#123;</span><br><span class="line">            arr[hashKey] = <span class="keyword">new</span> LinkedList();</span><br><span class="line">            arr[hashKey].add(entry);</span><br><span class="line">            size++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr[hashKey].size(); i++) &#123;</span><br><span class="line">                MyEntry e = ((MyEntry) arr[hashKey].get(i));</span><br><span class="line">                <span class="keyword">if</span> (e.value.equals(value)) &#123;</span><br><span class="line">                    e.value = value;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                arr[hashKey].add(entry);</span><br><span class="line">                size++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hashKey = key.hashCode() % arr.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr[hashKey].size(); i++) &#123;</span><br><span class="line">            MyEntry e = ((MyEntry) arr[hashKey].get(i));</span><br><span class="line">            <span class="keyword">if</span> (e.key.equals(key))</span><br><span class="line">                <span class="keyword">return</span> e.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyMap map = <span class="keyword">new</span> MyMap();</span><br><span class="line">        map.put(<span class="string">"111"</span>, <span class="string">"wewe"</span>);</span><br><span class="line">        map.put(<span class="string">"222"</span>, <span class="string">"wewe1"</span>);</span><br><span class="line">        map.put(<span class="string">"333"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        map.put(<span class="string">"444"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        map.put(<span class="string">"555"</span>, <span class="string">"wewe2"</span>);</span><br><span class="line">        System.out.println(map.size());</span><br><span class="line">        System.out.println(map.get(<span class="string">"111"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEntry</span> </span>&#123;</span><br><span class="line">    Object key;</span><br><span class="line">    Object value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-如果两个对象内容相同-equals为true-那么他们的hash一定相同"><a href="#4-2-3-如果两个对象内容相同-equals为true-那么他们的hash一定相同" class="headerlink" title="4.2.3 如果两个对象内容相同(equals为true),那么他们的hash一定相同"></a>4.2.3 如果两个对象内容相同(equals为true),那么他们的hash一定相同</h4><h3 id="4-3-Set"><a href="#4-3-Set" class="headerlink" title="4.3 Set"></a>4.3 Set</h3><blockquote><p>HashSet :底层用HashMap实现 </p></blockquote><h3 id="5-线程"><a href="#5-线程" class="headerlink" title="5.线程"></a>5.线程</h3><h4 id="5-1多线程-多线程并行和并发的区别-了解"><a href="#5-1多线程-多线程并行和并发的区别-了解" class="headerlink" title="5.1多线程(多线程并行和并发的区别)(了解)"></a>5.1多线程(多线程并行和并发的区别)(了解)</h4><ul><li>并行就是两个任务同时运行，就是甲任务进行的同时，乙任务也在进行。(需要多核CPU)</li><li>并发是指两个任务都请求运行，而处理器只能按受一个任务，就把这两个任务安排轮流进行，由于时间间隔较短，使人感觉两个任务都在运行。</li><li>比如我跟两个网友聊天，左手操作一个电脑跟甲聊，同时右手用另一台电脑跟乙聊天，这就叫并行。</li><li>如果用一台电脑我先给甲发个消息，然后立刻再给乙发消息，然后再跟甲聊，再跟乙聊。这就叫并发。</li></ul><h4 id="5-2JVM启动是多线程的-至少启动一个主线程和垃圾管理线程"><a href="#5-2JVM启动是多线程的-至少启动一个主线程和垃圾管理线程" class="headerlink" title="5.2JVM启动是多线程的(至少启动一个主线程和垃圾管理线程)"></a>5.2JVM启动是多线程的(至少启动一个主线程和垃圾管理线程)</h4><h4 id="5-3多线程-Java程序运行原理和JVM的启动是多线程的吗-了解"><a href="#5-3多线程-Java程序运行原理和JVM的启动是多线程的吗-了解" class="headerlink" title="5.3多线程(Java程序运行原理和JVM的启动是多线程的吗)(了解)"></a>5.3多线程(Java程序运行原理和JVM的启动是多线程的吗)(了解)</h4><ul><li><p>A:Java程序运行原理</p><ul><li>Java命令会启动java虚拟机，启动JVM，等于启动了一个应用程序，也就是启动了一个进程。该进程会自动启动一个 “主线程” ，然后主线程去调用某个类的 main 方法。</li></ul></li><li><p>B:JVM的启动是多线程的吗</p><ul><li>JVM启动至少启动了垃圾回收线程和主线程，所以是多线程的。</li></ul></li><li><p>继承Thread</p><ul><li>好处是:可以直接使用Thread类中的方法,代码简单</li><li>弊端是:如果已经有了父类,就不能用这种方法</li></ul></li><li>实现Runnable接口<ul><li>好处是:即使自己定义的线程类有了父类也没关系,因为有了父类也可以实现接口,而且接口是可以多实现的</li><li>弊端是:不能直接使用Thread中的方法需要先获取到线程对象后,才能得到Thread的方法,代码复杂</li></ul></li></ul><h4 id="5-4线程匿名内部类的实现"><a href="#5-4线程匿名内部类的实现" class="headerlink" title="5,4线程匿名内部类的实现"></a>5,4线程匿名内部类的实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1111</span>;i++)</span><br><span class="line">                    System.out.println(<span class="string">"aaaa"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">11111</span>; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"b"</span>);</span><br><span class="line">                &#125;            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-4-Sleep-不解释"><a href="#5-4-Sleep-不解释" class="headerlink" title="5.4 Sleep (不解释)"></a>5.4 Sleep (不解释)</h4><h4 id="5-5-守护线程-被人挂掉自己也挂掉"><a href="#5-5-守护线程-被人挂掉自己也挂掉" class="headerlink" title="5.5 守护线程(被人挂掉自己也挂掉)"></a>5.5 守护线程(被人挂掉自己也挂掉)</h4><blockquote><p>比如: QQ正在传输文件(守护线程),关闭QQ程序文件传输马上停止.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">                    System.out.println(<span class="string">"aaaaa"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">                    System.out.println(i + <span class="string">" bb"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-6-join-插队-join执行完其他线程再执行"><a href="#5-6-join-插队-join执行完其他线程再执行" class="headerlink" title="5.6 join(插队)(join执行完其他线程再执行)"></a>5.6 join(插队)(join执行完其他线程再执行)</h4><ul><li>join(), 当前线程暂停, 等待指定的线程执行结束后, 当前线程再继续</li><li>join(int), 可以等待指定的毫秒之后继续(插队int毫秒)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo06</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span>  Thread t1=<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">30</span> ; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"线程111"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t2=<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;             </span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">30</span> ; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(i&gt;<span class="number">10</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            t1.join();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">"线程222"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         t1.start();</span><br><span class="line">         t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-7-yield-礼让线程"><a href="#5-7-yield-礼让线程" class="headerlink" title="5.7 yield(礼让线程)"></a>5.7 yield(礼让线程)</h4><blockquote><p>让其他线程先执行</p></blockquote><h4 id="5-8优先级-任然交替执行线程-但是优先级高的线程执行次数更多"><a href="#5-8优先级-任然交替执行线程-但是优先级高的线程执行次数更多" class="headerlink" title="5.8优先级(任然交替执行线程,但是优先级高的线程执行次数更多)"></a>5.8优先级(任然交替执行线程,但是优先级高的线程执行次数更多)</h4><blockquote><p>setPriority(1~10);</p></blockquote><h4 id="5-9Synchronized"><a href="#5-9Synchronized" class="headerlink" title="5.9Synchronized"></a>5.9Synchronized</h4><blockquote><ul><li><figure class="highlight plain"><figcaption><span>&#125;  ```      :同步代码块,可以传任意对象,但是必须是同一个对象</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&gt; * ``` public Synchronized void method()  ```     :非静态的同步所对象是this</span><br><span class="line">&gt; * ``` public static Synchronized void method()``` : 静态的同步方法使用的所对象是字节码对象(类名.class)</span><br><span class="line"></span><br><span class="line">#### 5.10死锁(哲学家进餐问题)</span><br><span class="line"></span><br><span class="line">&gt; 为了避免死锁:尽量Synchronized 嵌套</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">package thread;</span><br><span class="line"></span><br><span class="line">public class Demo07 &#123;</span><br><span class="line">    private static Object s2 = &quot;筷子2&quot;;</span><br><span class="line">    private static Object s1 = &quot;筷子1&quot;;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    synchronized (s1) &#123;</span><br><span class="line">                        System.out.println(getName() + &quot;:拿到s1&quot;);</span><br><span class="line">                        synchronized (s2) &#123;</span><br><span class="line">                            System.out.println(getName() + &quot;:拿到s2   哲学家开始吃饭&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    synchronized (s2) &#123;</span><br><span class="line">                        System.out.println(getName() + &quot;:拿到s2&quot;);</span><br><span class="line">                        synchronized (s1) &#123;</span><br><span class="line">                            System.out.println(getName() + &quot;:拿到s1   哲学家开始吃饭&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h4 id="5-11-三种单例设计模式"><a href="#5-11-三种单例设计模式" class="headerlink" title="5.11 三种单例设计模式"></a>5.11 三种单例设计模式</h4><blockquote><p>jdk中单例模式的类:Runtime,Timer</p></blockquote><h4 id="5-12线程之间的通讯"><a href="#5-12线程之间的通讯" class="headerlink" title="5.12线程之间的通讯"></a>5.12线程之间的通讯</h4><blockquote><ul><li>wait() 当前线程等待</li><li>notify() 随机唤醒一个等待的线程</li><li>notifyAll()   唤醒所有等待线程</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo09</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        test t = <span class="keyword">new</span> test();</span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">                    t.method();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line"></span><br><span class="line">                    t.method2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag != <span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"111111"</span>);</span><br><span class="line">        flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag != <span class="keyword">false</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"222222"</span>);</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-12ReentrantLock"><a href="#5-12ReentrantLock" class="headerlink" title="5.12ReentrantLock"></a>5.12ReentrantLock</h4><h4 id="5-13-线程组"><a href="#5-13-线程组" class="headerlink" title="5.13 线程组"></a>5.13 线程组</h4><h4 id="5-14线程的五种状态"><a href="#5-14线程的五种状态" class="headerlink" title="5.14线程的五种状态"></a>5.14线程的五种状态</h4><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\1540126331767.png" alt="1540126331767"></p><h4 id="5-15线程池"><a href="#5-15线程池" class="headerlink" title="5.15线程池"></a>5.15线程池</h4><blockquote><p>创建线程时需要耗费许多资源,线程池可以先创建几个线程,其他线程需要就过来用</p><p> <strong>ExecutorService pool = Executors.newFixedThreadPool(2);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo10</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService pool = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"   "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        pool.shutdownNow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-15-Callable"><a href="#5-15-Callable" class="headerlink" title="5.15 Callable"></a>5.15 Callable</h4><blockquote><p>线程的第三种实现方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建线程池对象</span></span><br><span class="line">ExecutorService pool = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以执行Runnable对象或者Callable对象代表的线程</span></span><br><span class="line">Future&lt;Integer&gt; f1 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">100</span>));</span><br><span class="line">Future&lt;Integer&gt; f2 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">200</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// V get()</span></span><br><span class="line">Integer i1 = f1.get();</span><br><span class="line">Integer i2 = f2.get();</span><br><span class="line"></span><br><span class="line">System.out.println(i1);</span><br><span class="line">System.out.println(i2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束</span></span><br><span class="line">pool.shutdown();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyCallable</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.number = number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt;= number; x++) &#123;</span><br><span class="line">sum += x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-反射"><a href="#6-反射" class="headerlink" title="6.反射"></a>6.反射</h3><h4 id="6-1-获取Class的三种方式"><a href="#6-1-获取Class的三种方式" class="headerlink" title="6.1 获取Class的三种方式"></a>6.1 获取Class的三种方式</h4><blockquote><ul><li>根据类名</li><li>根据class</li><li>根据对象的实例</li></ul></blockquote><p><img src="C:\Users\JIA\AppData\Roaming\Typora\typora-user-images\154018482338.png" alt="154018482338"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        Class clazz1 = Class.forName(<span class="string">"reflect.Student"</span>);</span><br><span class="line">        Class clazz2 = Student.class;</span><br><span class="line">        Student s = <span class="keyword">new</span> Student();</span><br><span class="line">        Class clazz3 = s.getClass();</span><br><span class="line">        System.out.println(clazz1 == clazz2);</span><br><span class="line">        System.out.println(clazz1 == clazz3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-2-反射-配置-实现动态调用"><a href="#6-2-反射-配置-实现动态调用" class="headerlink" title="6.2 反射+配置 实现动态调用"></a>6.2 反射+配置 实现动态调用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reflect.Orange</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"E:\\idea_workSpace\\java_review\\src\\fruit.properties"</span>));</span><br><span class="line">        Class clazz = Class.forName(br.readLine());</span><br><span class="line"></span><br><span class="line">        zzj z = <span class="keyword">new</span> zzj();</span><br><span class="line">        z.run((Fruit) clazz.newInstance());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zzj</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Fruit r)</span> </span>&#123;</span><br><span class="line">        r.juice();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"苹果汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Orange</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"橘子汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Banana</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"香蕉汁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">juice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-3-反射可以拿到私有的属性-方法"><a href="#6-3-反射可以拿到私有的属性-方法" class="headerlink" title="6.3 反射可以拿到私有的属性,方法"></a>6.3 反射可以拿到私有的属性,方法</h4><h4 id="6-4-使用反射对泛型进行擦除"><a href="#6-4-使用反射对泛型进行擦除" class="headerlink" title="6.4 使用反射对泛型进行擦除"></a>6.4 使用反射对泛型进行擦除</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="number">111</span>);</span><br><span class="line">        list.add(<span class="number">222</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        Class clazz = Class.forName(<span class="string">"java.util.ArrayList"</span>);</span><br><span class="line">        Method method = clazz.getMethod(<span class="string">"add"</span>, Object.class);</span><br><span class="line">        method.invoke(list, <span class="string">"aaaa "</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-4-jdk-1-8后接口可以创建普通可执行方法-也可以创建静态方法"><a href="#6-4-jdk-1-8后接口可以创建普通可执行方法-也可以创建静态方法" class="headerlink" title="6.4 jdk 1,8后接口可以创建普通可执行方法,也可以创建静态方法"></a>6.4 jdk 1,8后接口可以创建普通可执行方法,也可以创建静态方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Inter() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;.print();</span><br><span class="line">        Inter.print2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Inter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"jdk1.8 新特性"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"jdk1.8 lllllllllllllll"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-Socket-码头"><a href="#7-Socket-码头" class="headerlink" title="7.Socket(码头)"></a>7.Socket(码头)</h3><h4 id="7-1-Socket进行消息通信"><a href="#7-1-Socket进行消息通信" class="headerlink" title="7.1 Socket进行消息通信"></a>7.1 Socket进行消息通信</h4><blockquote><p>1.发送Send</p><ul><li>创建DatagramSocket, 随机端口号</li><li>创建DatagramPacket, 指定数据, 长度, 地址, 端口</li><li>使用DatagramSocket发送DatagramPacket</li><li>关闭DatagramSocket</li></ul><p>2.接收Receive</p><ul><li>创建DatagramSocket, 指定端口号</li><li>创建DatagramPacket, 指定数组, 长度</li><li>使用DatagramSocket接收DatagramPacket</li><li>关闭DatagramSocket</li><li>从DatagramPacket中获取数据</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.crypto.Data;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1.发送Send</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - 创建DatagramSocket, 随机端口号</span></span><br><span class="line"><span class="comment"> - 创建DatagramPacket, 指定数据, 长度, 地址, 端口</span></span><br><span class="line"><span class="comment"> - 使用DatagramSocket发送DatagramPacket</span></span><br><span class="line"><span class="comment"> - 关闭DatagramSocket</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Send</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        String msg=<span class="string">"正在学习socket编程"</span>;</span><br><span class="line">        DatagramSocket socket =<span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        DatagramPacket  packet=<span class="keyword">new</span></span><br><span class="line">                DatagramPacket(msg.getBytes(),msg.getBytes().length,</span><br><span class="line">                InetAddress.getLocalHost(),<span class="number">8888</span>);</span><br><span class="line">        socket.send(packet);</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> socket;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2.接收Receive</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - 创建DatagramSocket, 指定端口号</span></span><br><span class="line"><span class="comment"> - 创建DatagramPacket, 指定数组, 长度</span></span><br><span class="line"><span class="comment"> - 使用DatagramSocket接收DatagramPacket</span></span><br><span class="line"><span class="comment"> - 关闭DatagramSocket</span></span><br><span class="line"><span class="comment"> - 从DatagramPacket中获取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receive</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[] args)</span> <span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        <span class="keyword">byte</span> [] arr=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        DatagramSocket socket=<span class="keyword">new</span> DatagramSocket(<span class="number">8888</span>);</span><br><span class="line">        DatagramPacket packet=<span class="keyword">new</span> DatagramPacket(arr,arr.length);</span><br><span class="line">        socket.receive(packet);</span><br><span class="line">        <span class="keyword">byte</span> [] arr2=packet.getData();</span><br><span class="line">        <span class="keyword">int</span> len=packet.getLength();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> java.lang.String(arr2,<span class="number">0</span>,len));</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-异常-Exception"><a href="#8-异常-Exception" class="headerlink" title="8.异常(Exception)"></a>8.异常(Exception)</h3><p>﻿#### 8.01_异常(异常的概述和分类)</p><ul><li>A:异常的概述<ul><li>异常就是Java程序在运行过程中出现的错误。</li></ul></li><li>B:异常的分类<ul><li>通过API查看Throwable</li><li>Error<ul><li>服务器宕机,数据库崩溃等</li></ul></li><li>Exception<br>C:异常的继承体系</li><li>Throwable<ul><li>Error    </li><li>Exception<ul><li>RuntimeException</li></ul></li></ul></li></ul></li></ul><h4 id="8-02-异常-JVM默认是如何处理异常的"><a href="#8-02-异常-JVM默认是如何处理异常的" class="headerlink" title="8.02_异常(JVM默认是如何处理异常的)"></a>8.02_异常(JVM默认是如何处理异常的)</h4><ul><li>A:JVM默认是如何处理异常的<ul><li>main函数收到这个问题时,有两种处理方式:</li><li>a:自己将该问题处理,然后继续运行</li><li>b:自己没有针对的处理方式,只有交给调用main的jvm来处理</li><li>jvm有一个默认的异常处理机制,就将该异常进行处理.</li><li>并将该异常的名称,异常的信息.异常出现的位置打印在了控制台上,同时将程序停止运行</li></ul></li><li>B:案例演示<ul><li>JVM默认如何处理异常</li></ul></li></ul><h4 id="8-03-异常-try…catch的方式处理异常1"><a href="#8-03-异常-try…catch的方式处理异常1" class="headerlink" title="8.03_异常(try…catch的方式处理异常1)"></a>8.03_异常(try…catch的方式处理异常1)</h4><ul><li>A:异常处理的两种方式<ul><li>a:try…catch…finally<ul><li>try catch</li><li>try catch finally</li><li>try finally </li></ul></li><li>b:throws</li></ul></li><li>B:try…catch处理异常的基本格式<ul><li>try…catch…finally</li></ul></li><li>C:案例演示<ul><li>try…catch的方式处理1个异常</li></ul></li></ul><h4 id="8-04-异常-try…catch的方式处理异常2"><a href="#8-04-异常-try…catch的方式处理异常2" class="headerlink" title="8.04_异常(try…catch的方式处理异常2)"></a>8.04_异常(try…catch的方式处理异常2)</h4><ul><li>A:案例演示<ul><li>try…catch的方式处理多个异常</li><li>JDK7以后处理多个异常的方式及注意事项</li></ul></li></ul><h4 id="8-05-异常-编译期异常和运行期异常的区别"><a href="#8-05-异常-编译期异常和运行期异常的区别" class="headerlink" title="8.05_异常(编译期异常和运行期异常的区别)"></a>8.05_异常(编译期异常和运行期异常的区别)</h4><ul><li><p>A:编译期异常和运行期异常的区别</p><ul><li>Java中的异常被分为两大类：编译时异常和运行时异常。</li><li><p>所有的RuntimeException类及其子类的实例被称为运行时异常，其他的异常就是编译时异常</p></li><li><p>编译时异常</p><ul><li>Java程序必须显示处理，否则程序就会发生错误，无法通过编译</li></ul></li><li>运行时异常<ul><li>无需显示处理，也可以和编译时异常一样处理</li></ul></li></ul></li><li>B:案例演示<ul><li>编译期异常和运行期异常的区别</li></ul></li></ul><h4 id="8-06-异常-Throwable的几个常见方法"><a href="#8-06-异常-Throwable的几个常见方法" class="headerlink" title="8.06_异常(Throwable的几个常见方法)"></a>8.06_异常(Throwable的几个常见方法)</h4><ul><li>A:Throwable的几个常见方法<ul><li>a:getMessage()<ul><li>获取异常信息，返回字符串。</li></ul></li><li>b:toString()<ul><li>获取异常类名和异常信息，返回字符串。</li></ul></li><li>c:printStackTrace()<ul><li>获取异常类名和异常信息，以及异常出现在程序中的位置。返回值void。</li></ul></li></ul></li><li>B:案例演示<ul><li>Throwable的几个常见方法的基本使用</li></ul></li></ul><h4 id="8-07-异常-throws的方式处理异常"><a href="#8-07-异常-throws的方式处理异常" class="headerlink" title="8.07_异常(throws的方式处理异常)"></a>8.07_异常(throws的方式处理异常)</h4><ul><li>A:throws的方式处理异常<ul><li>定义功能方法时，需要把出现的问题暴露出来让调用者去处理。</li><li>那么就通过throws在方法上标识。</li></ul></li><li>B:案例演示<ul><li>举例分别演示编译时异常和运行时异常的抛出</li></ul></li></ul><h4 id="8-08-异常-throw的概述以及和throws的区别"><a href="#8-08-异常-throw的概述以及和throws的区别" class="headerlink" title="8.08_异常(throw的概述以及和throws的区别)"></a>8.08_异常(throw的概述以及和throws的区别)</h4><ul><li>A:throw的概述<ul><li>在功能方法内部出现某种情况，程序不能继续运行，需要进行跳转时，就用throw把异常对象抛出。</li></ul></li><li>B:案例演示    <ul><li>分别演示编译时异常对象和运行时异常对象的抛出</li></ul></li><li>C:throws和throw的区别<ul><li>a:throws<ul><li>用在方法声明后面，跟的是异常类名</li><li>可以跟多个异常类名，用逗号隔开</li><li>表示抛出异常，由该方法的调用者来处理</li></ul></li><li>b:throw<ul><li>用在方法体内，跟的是异常对象名</li><li>只能抛出一个异常对象名</li><li>表示抛出异常，由方法体内的语句处理</li></ul></li></ul></li></ul><h4 id="8-09-异常-finally关键字的特点及作用"><a href="#8-09-异常-finally关键字的特点及作用" class="headerlink" title="8.09_异常(finally关键字的特点及作用)"></a>8.09_异常(finally关键字的特点及作用)</h4><ul><li>A:finally的特点<ul><li>被finally控制的语句体一定会执行</li><li>特殊情况：在执行到finally之前jvm退出了(比如System.exit(0))</li></ul></li><li>B:finally的作用<ul><li>用于释放资源，在IO流操作和数据库操作中会见到</li></ul></li><li>C:案例演示<ul><li>finally关键字的特点及作用</li></ul></li></ul><h4 id="8-10-异常-finally关键字的面试题"><a href="#8-10-异常-finally关键字的面试题" class="headerlink" title="8.10_异常(finally关键字的面试题)"></a>8.10_异常(finally关键字的面试题)</h4><ul><li>A:面试题1<ul><li>final,finally和finalize的区别</li></ul></li><li>B:面试题2<ul><li>如果catch里面有return语句，请问finally的代码还会执行吗?如果会，请问是在return前还是return后。</li></ul></li></ul><h4 id="8-11-异常-自定义异常概述和基本使用"><a href="#8-11-异常-自定义异常概述和基本使用" class="headerlink" title="8.11_异常(自定义异常概述和基本使用)"></a>8.11_异常(自定义异常概述和基本使用)</h4><ul><li>A:为什么需要自定义异常<ul><li>举例：人的年龄</li></ul></li><li>B:自定义异常概述<ul><li>继承自Exception</li><li>继承自RuntimeException</li></ul></li><li>C:案例演示<ul><li>自定义异常的基本使用</li></ul></li></ul><h4 id="8-12-异常-异常的注意事项及如何使用异常处理"><a href="#8-12-异常-异常的注意事项及如何使用异常处理" class="headerlink" title="8.12_异常(异常的注意事项及如何使用异常处理)"></a>8.12_异常(异常的注意事项及如何使用异常处理)</h4><ul><li>A:异常注意事项<ul><li>a:子类重写父类方法时，子类的方法必须抛出相同的异常或父类异常的子类。(父亲坏了,儿子不能比父亲更坏)</li><li>b:如果父类抛出了多个异常,子类重写父类时,只能抛出相同的异常或者是他的子集,子类不能抛出父类没有的异常</li><li>c:如果被重写的方法没有异常抛出,那么子类的方法绝对不可以抛出异常,如果子类方法内有异常发生,那么子类只能try,不能throws</li></ul></li><li><p>B:如何使用异常处理</p><ul><li>原则:如果该功能内部可以将问题处理,用try,如果处理不了,交由调用者处理,这是用throws</li><li><p>区别:</p><ul><li>后续程序需要继续运行就try</li><li>后续程序不需要继续运行就throws</li></ul></li><li><p>如果JDK没有提供对应的异常，需要自定义异常。</p></li></ul></li></ul><h4 id="8-13-异常-练习"><a href="#8-13-异常-练习" class="headerlink" title="8.13_异常(练习)"></a>8.13_异常(练习)</h4><ul><li>键盘录入一个int类型的整数,对其求二进制表现形式<ul><li>如果录入的整数过大,给予提示,录入的整数过大请重新录入一个整数BigInteger<ul><li>如果录入的是小数,给予提示,录入的是小数,请重新录入一个整数</li><li>如果录入的是其他字符,给予提示,录入的是非法字符,请重新录入一个整数</li></ul></li></ul></li></ul><h3 id="9-File"><a href="#9-File" class="headerlink" title="9.File"></a>9.File</h3><h4 id="9-1-File类-File类的概述和构造方法"><a href="#9-1-File类-File类的概述和构造方法" class="headerlink" title="9.1_File类(File类的概述和构造方法)"></a>9.1_File类(File类的概述和构造方法)</h4><ul><li>A:File类的概述<ul><li>File更应该叫做一个路径<ul><li>文件路径或者文件夹路径  </li><li>路径分为绝对路径和相对路径</li><li>绝对路径是一个固定的路径,从盘符开始</li><li>相对路径相对于某个位置,在eclipse下是指当前项目下,在dos下</li></ul></li><li>查看API指的是当前路径</li><li>文件和目录路径名的抽象表示形式</li></ul></li><li>B:构造方法<ul><li>File(String pathname)：根据一个路径得到File对象</li><li>File(String parent, String child):根据一个目录和一个子文件/目录得到File对象</li><li>File(File parent, String child):根据一个父File对象和一个子文件/目录得到File对象</li></ul></li><li>C:案例演示<ul><li>File类的构造方法</li></ul></li></ul><h4 id="9-2-File类-File类的创建功能"><a href="#9-2-File类-File类的创建功能" class="headerlink" title="9.2_File类(File类的创建功能)"></a>9.2_File类(File类的创建功能)</h4><ul><li>A:创建功能<ul><li>public boolean createNewFile():创建文件 如果存在这样的文件，就不创建了</li><li>public boolean mkdir():创建文件夹 如果存在这样的文件夹，就不创建了</li><li>public boolean mkdirs():创建文件夹,如果父文件夹不存在，会帮你创建出来</li></ul></li><li><p>B:案例演示</p><ul><li><p>File类的创建功能</p></li><li><p>注意事项：</p><ul><li>如果你创建文件或者文件夹忘了写盘符路径，那么，默认在项目路径下。</li></ul></li></ul></li></ul><h4 id="9-3-File类-File类的重命名和删除功能"><a href="#9-3-File类-File类的重命名和删除功能" class="headerlink" title="9.3_File类(File类的重命名和删除功能)"></a>9.3_File类(File类的重命名和删除功能)</h4><ul><li>A:重命名和删除功能<ul><li>public boolean renameTo(File dest):把文件重命名为指定的文件路径</li><li>public boolean delete():删除文件或者文件夹</li></ul></li><li>B:重命名注意事项<ul><li>如果路径名相同，就是改名。</li><li>如果路径名不同，就是改名并剪切。</li></ul></li><li>C:删除注意事项：<ul><li>Java中的删除不走回收站。</li><li>要删除一个文件夹，请注意该文件夹内不能包含文件或者文件夹</li></ul></li></ul><h4 id="9-4-File类-File类的判断功能"><a href="#9-4-File类-File类的判断功能" class="headerlink" title="9.4_File类(File类的判断功能)"></a>9.4_File类(File类的判断功能)</h4><ul><li>A:判断功能<ul><li>public boolean isDirectory():判断是否是目录</li><li>public boolean isFile():判断是否是文件</li><li>public boolean exists():判断是否存在</li><li>public boolean canRead():判断是否可读</li><li>public boolean canWrite():判断是否可写</li><li>public boolean isHidden():判断是否隐藏</li></ul></li><li>B:案例演示<ul><li>File类的判断功能</li></ul></li></ul><h4 id="9-5-File类-File类的获取功能"><a href="#9-5-File类-File类的获取功能" class="headerlink" title="9.5_File类(File类的获取功能)"></a>9.5_File类(File类的获取功能)</h4><ul><li>A:获取功能<ul><li>public String getAbsolutePath()：获取绝对路径</li><li>public String getPath():获取路径</li><li>public String getName():获取名称</li><li>public long length():获取长度。字节数</li><li>public long lastModified():获取最后一次的修改时间，毫秒值</li><li>public String[] list():获取指定目录下的所有文件或者文件夹的名称数组</li><li>public File[] listFiles():获取指定目录下的所有文件或者文件夹的File数组 </li></ul></li><li>B:案例演示<ul><li>File类的获取功能</li></ul></li></ul><h4 id="9-6-File类-输出指定目录下指定后缀的文件名"><a href="#9-6-File类-输出指定目录下指定后缀的文件名" class="headerlink" title="9.6_File类(输出指定目录下指定后缀的文件名)"></a>9.6_File类(输出指定目录下指定后缀的文件名)</h4><ul><li>A:案例演示<ul><li>需求：判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出该文件名称</li></ul></li></ul><h4 id="9-7-File类-文件名称过滤器的概述及使用"><a href="#9-7-File类-文件名称过滤器的概述及使用" class="headerlink" title="9.7_File类(文件名称过滤器的概述及使用)"></a>9.7_File类(文件名称过滤器的概述及使用)</h4><ul><li>A:文件名称过滤器的概述<ul><li>public String[] list(FilenameFilter filter)</li><li>public File[] listFiles(FileFilter filter)</li></ul></li><li>B:文件名称过滤器的使用<ul><li>需求：判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出该文件名称</li></ul></li><li>C:源码分析<ul><li>带文件名称过滤器的list()方法的源码</li></ul></li></ul><h3 id="10-IO"><a href="#10-IO" class="headerlink" title="10.IO"></a>10.IO</h3><h4 id="10-01-IO流-IO流概述及其分类"><a href="#10-01-IO流-IO流概述及其分类" class="headerlink" title="10.01_IO流(IO流概述及其分类)"></a>10.01_IO流(IO流概述及其分类)</h4><ul><li>1.概念<ul><li>IO流用来处理设备之间的数据传输</li><li>Java对数据的操作是通过流的方式</li><li>Java用于操作流的类都在IO包中</li><li>流按流向分为两种：输入流，输出流。</li><li>流按操作类型分为两种：<ul><li>字节流 : 字节流可以操作任何数据,因为在计算机中任何数据都是以字节的形式存储的</li><li>字符流 : 字符流只能操作纯字符数据，比较方便。</li></ul></li></ul></li><li>2.IO流常用父类<ul><li>字节流的抽象父类：<ul><li>InputStream </li><li>OutputStream</li></ul></li><li>字符流的抽象父类：<ul><li>Reader </li><li>Writer        </li></ul></li></ul></li><li>3.IO程序书写<ul><li>使用前，导入IO包中的类</li><li>使用时，进行IO异常处理</li><li>使用后，释放资源</li></ul></li></ul><h4 id="10-02-IO流-FileInputStream"><a href="#10-02-IO流-FileInputStream" class="headerlink" title="10.02_IO流(FileInputStream)"></a>10.02_IO流(FileInputStream)</h4><ul><li>read()一次读取一个字节</li><li> FileInputStream fis = new FileInputStream(“aaa.txt”);    //创建一个文件输入流对象,并关联aaa.txt<br> ​    int b;                                                    //定义变量,记录每次读到的字节<br> ​    while((b = fis.read()) != -1) {                            //将每次读到的字节赋值给b并判断是否是-1<br> ​        System.out.println(b);                                //打印每一个字节<br> ​    }<br> ​<br> ​    fis.close();                                            //关闭流释放资源</li></ul><h4 id="10-03-IO流-read-方法返回值为什么是int"><a href="#10-03-IO流-read-方法返回值为什么是int" class="headerlink" title="10.03_IO流(read()方法返回值为什么是int)"></a>10.03_IO流(read()方法返回值为什么是int)</h4><ul><li>read()方法读取的是一个字节,为什么返回是int,而不是byte</li><li>因为字节输入流可以操作任意类型的文件,比如图片音频等,这些文件底层都是以二进制形式的存储的,如果每次读取都返回byte,有可能在读到中间的时候遇到111111111<br> ​    那么这11111111是byte类型的-1,我们的程序是遇到-1就会停止不读了,后面的数据就读不到了,所以在读取的时候用int类型接收,如果11111111会在其前面补上<br> ​    24个0凑足4个字节,那么byte类型的-1就变成int类型的255了这样可以保证整个数据读完,而结束标记的-1就是int类型<h4 id="10-04-IO流-FileOutputStream"><a href="#10-04-IO流-FileOutputStream" class="headerlink" title="10.04_IO流(FileOutputStream)"></a>10.04_IO流(FileOutputStream)</h4></li><li>write()一次写出一个字节</li><li>FileOutputStream fos = new FileOutputStream(“bbb.txt”);    //如果没有bbb.txt,会创建出一个<br> ​    //fos.write(97);                        //虽然写出的是一个int数,但是在写出的时候会将前面的24个0去掉,所以写出的是一个byte<br> ​    fos.write(98);<br> ​    fos.write(99);<br> ​    fos.close();</li></ul><h4 id="10-05-IO流-FileOutputStream追加"><a href="#10-05-IO流-FileOutputStream追加" class="headerlink" title="10.05_IO流(FileOutputStream追加)"></a>10.05_IO流(FileOutputStream追加)</h4><ul><li><p>A:案例演示</p><ul><li>FileOutputStream的构造方法写出数据如何实现数据的追加写入</li></ul></li><li> FileOutputStream fos = new FileOutputStream(“bbb.txt”,true);    //如果没有bbb.txt,会创建出一个<br> ​    //fos.write(97);                        //虽然写出的是一个int数,但是在写出的时候会将前面的24个0去掉,所以写出的一个byte<br> ​    fos.write(98);<br> ​    fos.write(99);<br> ​    fos.close();</li></ul><h4 id="10-06-IO流-拷贝图片"><a href="#10-06-IO流-拷贝图片" class="headerlink" title="10.06_IO流(拷贝图片)"></a>10.06_IO流(拷贝图片)</h4><ul><li>FileInputStream读取</li><li><p>FileOutputStream写出</p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);    //创建输入流对象,关联致青春.mp3<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);//创建输出流对象,关联copy.mp3<br> ​<br> ​    int b;<br> ​    while((b = fis.read()) != -1) {<br> ​        fos.write(b);<br> ​    }<br> ​    </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="10-07-IO流-拷贝音频文件画原理图"><a href="#10-07-IO流-拷贝音频文件画原理图" class="headerlink" title="10.07_IO流(拷贝音频文件画原理图)"></a>10.07_IO流(拷贝音频文件画原理图)</h4><ul><li>A:案例演示<ul><li>字节流一次读写一个字节复制音频</li></ul></li><li>弊端:效率太低</li></ul><h4 id="10-08-IO流-字节数组拷贝之available-方法"><a href="#10-08-IO流-字节数组拷贝之available-方法" class="headerlink" title="10.08_IO流(字节数组拷贝之available()方法)"></a>10.08_IO流(字节数组拷贝之available()方法)</h4><ul><li>A:案例演示<ul><li>int read(byte[] b):一次读取一个字节数组</li><li>write(byte[] b):一次写出一个字节数组</li><li>available()获取读的文件所有的字节个数</li></ul></li><li><p>弊端:有可能会内存溢出 </p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);<br> ​    byte[] arr = new byte[fis.available()];                    //根据文件大小做一个字节数组<br> ​    fis.read(arr);                                            //将文件上的所有字节读取到数组中<br> ​    fos.write(arr);                                            //将数组中的所有字节一次写到了文件上<br> ​    fis.close();<br> ​    fos.close();<br> ​    </p><h4 id="10-09-IO流-定义小数组"><a href="#10-09-IO流-定义小数组" class="headerlink" title="10.09_IO流(定义小数组)"></a>10.09_IO流(定义小数组)</h4></li><li>write(byte[] b)</li><li><p>write(byte[] b, int off, int len)写出有效的字节个数</p><p>​    </p><h4 id="10-10-IO流-定义小数组的标准格式"><a href="#10-10-IO流-定义小数组的标准格式" class="headerlink" title="10.10_IO流(定义小数组的标准格式)"></a>10.10_IO流(定义小数组的标准格式)</h4></li><li><p>A:案例演示</p><ul><li><p>字节流一次读写一个字节数组复制图片和视频<br>FileInputStream fis = new FileInputStream(“致青春.mp3”);<br>FileOutputStream fos = new FileOutputStream(“copy.mp3”);<br>int len;<br>byte[] arr = new byte[1024 * 8];                    //自定义字节数组</p><p>while((len = fis.read(arr)) != -1) {<br>​    //fos.write(arr);<br>​    fos.write(arr, 0, len);                            //写出字节数组写出有效个字节个数<br>}</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="10-11-IO流-BufferedInputStream和BufferOutputStream拷贝"><a href="#10-11-IO流-BufferedInputStream和BufferOutputStream拷贝" class="headerlink" title="10.11_IO流(BufferedInputStream和BufferOutputStream拷贝)"></a>10.11_IO流(BufferedInputStream和BufferOutputStream拷贝)</h4></li></ul></li><li>A:缓冲思想<ul><li>字节流一次读写一个数组的速度明显比一次读写一个字节的速度快很多，</li><li>这是加入了数组这样的缓冲区效果，java本身在设计的时候，</li><li>也考虑到了这样的设计思想(装饰设计模式后面讲解)，所以提供了字节缓冲区流</li></ul></li><li>B.BufferedInputStream<ul><li>BufferedInputStream内置了一个缓冲区(数组)</li><li>从BufferedInputStream中读取一个字节时</li><li>BufferedInputStream会一次性从文件中读取8192个, 存在缓冲区中, 返回给程序一个</li><li>程序再次读取时, 就不用找文件了, 直接从缓冲区中获取</li><li>直到缓冲区中所有的都被使用过, 才重新从文件中读取8192个</li></ul></li><li>C.BufferedOutputStream<ul><li>BufferedOutputStream也内置了一个缓冲区(数组)</li><li>程序向流中写出字节时, 不会直接写到文件, 先写到缓冲区中</li><li>直到缓冲区写满, BufferedOutputStream才会把缓冲区中的数据一次性写到文件里</li></ul></li><li><p>D.拷贝的代码 </p><p> FileInputStream fis = new FileInputStream(“致青春.mp3”);            //创建文件输入流对象,关联致青春.mp3<br> ​    BufferedInputStream bis = new BufferedInputStream(fis);            //创建缓冲区对fis装饰<br> ​    FileOutputStream fos = new FileOutputStream(“copy.mp3”);        //创建输出流对象,关联copy.mp3<br> ​    BufferedOutputStream bos = new BufferedOutputStream(fos);        //创建缓冲区对fos装饰<br> ​<br> ​    int b;<br> ​    while((b = bis.read()) != -1) {<br> ​        bos.write(b);<br> ​    }<br> ​<br> ​    bis.close();                        //只关装饰后的对象即可<br> ​    bos.close();</p></li><li><p>E.小数组的读写和带Buffered的读取哪个更快?</p><ul><li>定义小数组如果是8192个字节大小和Buffered比较的话</li><li>定义小数组会略胜一筹,因为读和写操作的是同一个数组</li><li>而Buffered操作的是两个数组</li></ul></li></ul><h4 id="10-12-IO流-flush和close方法的区别"><a href="#10-12-IO流-flush和close方法的区别" class="headerlink" title="10.12_IO流(flush和close方法的区别)"></a>10.12_IO流(flush和close方法的区别)</h4><ul><li><p>flush()方法</p><ul><li>用来刷新缓冲区的,刷新后可以再次写出 </li></ul></li><li><p>close()方法</p><ul><li><p>用来关闭流释放资源的的,如果是带缓冲区的流对象的close()方法,不但会关闭流,还会再关闭流之前刷新缓冲区,关闭后不能再写出 </p><h4 id="10-13-IO流-字节流读写中文"><a href="#10-13-IO流-字节流读写中文" class="headerlink" title="10.13_IO流(字节流读写中文)"></a>10.13_IO流(字节流读写中文)</h4></li></ul></li><li><p>字节流读取中文的问题</p><ul><li>字节流在读中文的时候有可能会读到半个中文,造成乱码 </li></ul></li><li>字节流写出中文的问题<ul><li>字节流直接操作的字节,所以写出中文必须将字符串转换成字节数组 </li><li>写出回车换行 write(“\r\n”.getBytes());</li></ul></li></ul><h4 id="10-14-IO流-流的标准处理异常代码1-6版本及其以前"><a href="#10-14-IO流-流的标准处理异常代码1-6版本及其以前" class="headerlink" title="10.14_IO流(流的标准处理异常代码1.6版本及其以前)"></a>10.14_IO流(流的标准处理异常代码1.6版本及其以前)</h4><ul><li>try finally嵌套</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">fis = <span class="keyword">new</span> FileInputStream(<span class="string">"aaa.txt"</span>);</span><br><span class="line">fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"bbb.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(fis != <span class="keyword">null</span>)</span><br><span class="line">fis.close();</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(fos != <span class="keyword">null</span>)</span><br><span class="line">fos.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-15-IO流-流的标准处理异常代码1-7版本"><a href="#10-15-IO流-流的标准处理异常代码1-7版本" class="headerlink" title="10.15_IO流(流的标准处理异常代码1.7版本)"></a>10.15_IO流(流的标准处理异常代码1.7版本)</h4><ul><li><p>try close</p><p> try(<br> ​        FileInputStream fis = new FileInputStream(“aaa.txt”);<br> ​        FileOutputStream fos = new FileOutputStream(“bbb.txt”);<br> ​        MyClose mc = new MyClose();<br> ​    ){<br> ​        int b;<br> ​        while((b = fis.read()) != -1) {<br> ​            fos.write(b);<br> ​        }<br> ​    }</p></li><li><p>原理</p><ul><li>在try()中创建的流对象必须实现了AutoCloseable这个接口,如果实现了,在try后面的{}(读写代码)执行后就会自动调用,流对象的close方法将流关掉 </li></ul></li></ul><h4 id="10-16-IO流-图片加密"><a href="#10-16-IO流-图片加密" class="headerlink" title="10.16_IO流(图片加密)"></a>10.16_IO流(图片加密)</h4><ul><li><p>给图片加密</p><p> BufferedInputStream bis = new BufferedInputStream(new FileInputStream(“a.jpg”));<br> ​    BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(“b.jpg”));<br> ​<br> ​    int b;<br> ​    while((b = bis.read()) != -1) {<br> ​        bos.write(b ^ 123);<br> ​    }<br> ​<br> ​    bis.close();<br> ​    bos.close();</p></li></ul><h4 id="10-17-IO流-拷贝文件"><a href="#10-17-IO流-拷贝文件" class="headerlink" title="10.17_IO流(拷贝文件)"></a>10.17_IO流(拷贝文件)</h4><ul><li><p>在控制台录入文件的路径,将文件拷贝到当前项目下</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">System.out.println(<span class="string">"请输入一个文件路径"</span>);</span><br><span class="line">String line = sc.nextLine();<span class="comment">//将键盘录入的文件路径存储在line中</span></span><br><span class="line">File file = <span class="keyword">new</span> File(line);<span class="comment">//封装成File对象</span></span><br><span class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file.getName());</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">byte</span>[] arr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8192</span>];<span class="comment">//定义缓冲区</span></span><br><span class="line"><span class="keyword">while</span>((len = fis.read(arr)) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(arr,<span class="number">0</span>,len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="10-18-IO流-录入数据拷贝到文件"><a href="#10-18-IO流-录入数据拷贝到文件" class="headerlink" title="10.18_IO流(录入数据拷贝到文件)"></a>10.18_IO流(录入数据拷贝到文件)</h4><ul><li>将键盘录入的数据拷贝到当前项目下的text.txt文件中,键盘录入数据当遇到quit时就退出</li></ul>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"text.txt"</span>);</span><br><span class="line">System.out.println(<span class="string">"请输入:"</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">String line = sc.nextLine();</span><br><span class="line"><span class="keyword">if</span>(<span class="string">"quit"</span>.equals(line))</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">fos.write(line.getBytes());</span><br><span class="line">fos.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="10-19-day20总结"><a href="#10-19-day20总结" class="headerlink" title="10.19_day20总结"></a>10.19_day20总结</h4><h3 id="11-字符流-字符流FileReader"><a href="#11-字符流-字符流FileReader" class="headerlink" title="11.字符流(字符流FileReader)"></a>11.字符流(字符流FileReader)</h3><ul><li><p>1.字符流是什么</p><ul><li>字符流是可以直接读写字符的IO流</li><li>字符流读取字符, 就要先读取到字节数据, 然后转为字符. 如果要写出字符, 需要把字符转为字节再写出.    </li></ul></li><li><p>2.FileReader</p><ul><li>FileReader类的read()方法可以按照字符大小读取</li></ul></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"aaa.txt"</span>);<span class="comment">//创建输入流对象,关联aaa.txt</span></span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = fr.read()) != -<span class="number">1</span>) &#123;<span class="comment">//将读到的字符赋值给ch</span></span><br><span class="line">System.out.println((<span class="keyword">char</span>)ch);<span class="comment">//将读到的字符强转后打印</span></span><br><span class="line">&#125;</span><br><span class="line">fr.close();<span class="comment">//关流</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="11-02-IO流-字符流FileWriter"><a href="#11-02-IO流-字符流FileWriter" class="headerlink" title="11.02_IO流(字符流FileWriter)"></a>11.02_IO流(字符流FileWriter)</h4><ul><li><p>FileWriter类的write()方法可以自动把字符转</p></li><li></li><li><p>为字节写出</p><p>FileWriter fw = new FileWriter(“aaa.txt”);<br>​    fw.write(“aaa”);<br>​    fw.close();</p></li></ul><h4 id="11-03-IO流-字符流的拷贝"><a href="#11-03-IO流-字符流的拷贝" class="headerlink" title="11.03_IO流(字符流的拷贝)"></a>11.03_IO流(字符流的拷贝)</h4><p>​<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"a.txt"</span>);</span><br><span class="line">FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"b.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fw.write(ch);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fr.close();</span><br><span class="line">fw.close();</span><br></pre></td></tr></table></figure><h4 id="11-04-IO流-什么情况下使用字符流"><a href="#11-04-IO流-什么情况下使用字符流" class="headerlink" title="11.04_IO流(什么情况下使用字符流)"></a>11.04_IO流(什么情况下使用字符流)</h4><ul><li>字符流也可以拷贝文本文件, 但不推荐使用. 因为读取时会把字节转为字符, 写出时还要把字符转回字节.</li><li>程序需要读取一段文本, 或者需要写出一段文本的时候可以使用字符流</li><li>读取的时候是按照字符的大小读取的,不会出现半个中文</li><li>写出的时候可以直接将字符串写出,不用转换为字节数组</li></ul><h4 id="11-05-IO流-字符流是否可以拷贝非纯文本的文件"><a href="#11-05-IO流-字符流是否可以拷贝非纯文本的文件" class="headerlink" title="11.05_IO流(字符流是否可以拷贝非纯文本的文件)"></a>11.05_IO流(字符流是否可以拷贝非纯文本的文件)</h4><ul><li>不可以拷贝非纯文本的文件</li><li>因为在读的时候会将字节转换为字符,在转换过程中,可能找不到对应的字符,就会用?代替,写出的时候会将字符转换成字节写出去</li><li>如果是?,直接写出,这样写出之后的文件就乱了,看不了了  </li></ul><h4 id="11-06-IO流-自定义字符数组的拷贝"><a href="#11-06-IO流-自定义字符数组的拷贝" class="headerlink" title="11.06_IO流(自定义字符数组的拷贝)"></a>11.06_IO流(自定义字符数组的拷贝)</h4><ul><li><p>​<br>FileReader fr = new FileReader(“aaa.txt”);            //创建字符输入流,关联aaa.txt<br>​    FileWriter fw = new FileWriter(“bbb.txt”);            //创建字符输出流,关联bbb.txt<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">char</span>[] arr = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>*<span class="number">8</span>];<span class="comment">//创建字符数组</span></span><br><span class="line"><span class="keyword">while</span>((len = fr.read(arr)) != -<span class="number">1</span>) &#123;<span class="comment">//将数据读到字符数组中</span></span><br><span class="line">fw.write(arr, <span class="number">0</span>, len);<span class="comment">//从字符数组将数据写到文件上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fr.close();<span class="comment">//关流释放资源</span></span><br><span class="line">fw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-07-IO流-带缓冲的字符流"><a href="#11-07-IO流-带缓冲的字符流" class="headerlink" title="11.07_IO流(带缓冲的字符流)"></a>11.07_IO流(带缓冲的字符流)</h4><ul><li><p>BufferedReader的read()方法读取字符时会一次读取若干字符到缓冲区, 然后逐个返回给程序, 降低读取文件的次数, 提高效率</p></li><li><p>BufferedWriter的write()方法写出字符时会先写到缓冲区, 缓冲区写满时才会写到文件, 降低写文件的次数, 提高效率</p></li><li><p>BufferedReader br = new BufferedReader(new FileReader(“aaa.txt”));    //创建字符输入流对象,关联aaa.txt<br>​    BufferedWriter bw = new BufferedWriter(new FileWriter(“bbb.txt”));    //创建字符输出流对象,关联bbb.txt<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = br.read()) != -<span class="number">1</span>) &#123;<span class="comment">//read一次,会先将缓冲区读满,从缓冲去中一个一个的返给临时变量ch</span></span><br><span class="line">bw.write(ch);<span class="comment">//write一次,是将数据装到字符数组,装满后再一起写出去</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">br.close();<span class="comment">//关流</span></span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-08-IO流-readLine-和newLine-方法"><a href="#11-08-IO流-readLine-和newLine-方法" class="headerlink" title="11.08_IO流(readLine()和newLine()方法)"></a>11.08_IO流(readLine()和newLine()方法)</h4><ul><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> BufferedReader的readLine()方法可以读取一行字符(不包含换行符号)</span><br><span class="line"> BufferedWriter的newLine()可以输出一个跨平台的换行符号<span class="string">"\r\n"</span></span><br><span class="line"> BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"aaa.txt"</span>));</span><br><span class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"bbb.txt"</span>));</span><br><span class="line">String line;</span><br><span class="line"><span class="keyword">while</span>((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">bw.write(line);</span><br><span class="line"><span class="comment">//bw.write("\r\n");//只支持windows系统</span></span><br><span class="line">bw.newLine();<span class="comment">//跨平台的</span></span><br><span class="line">&#125;</span><br><span class="line">br.close();</span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-09-IO流-将文本反转"><a href="#11-09-IO流-将文本反转" class="headerlink" title="11.09_IO流(将文本反转)"></a>11.09_IO流(将文本反转)</h4><ul><li>将一个文本文档上的文本反转,第一行和倒数第一行交换,第二行和倒数第二行交换</li></ul><h4 id="11-10-IO流-LineNumberReader"><a href="#11-10-IO流-LineNumberReader" class="headerlink" title="11.10_IO流(LineNumberReader)"></a>11.10_IO流(LineNumberReader)</h4><ul><li><p>LineNumberReader是BufferedReader的子类, 具有相同的功能, 并且可以统计行号</p><ul><li>调用getLineNumber()方法可以获取当前行号</li><li>调用setLineNumber()方法可以设置当前行号</li></ul></li><li><p>LineNumberReader lnr = new LineNumberReader(new FileReader(“aaa.txt”));<br>​    String line;<br>​    lnr.setLineNumber(100);                                    //设置行号<br>​    while((line = lnr.readLine()) != null) {<br>​        System.out.println(lnr.getLineNumber() + “:” + line);//获取行号<br>​    }<br>​    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lnr.close();</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-11-IO流-装饰设计模式"><a href="#11-11-IO流-装饰设计模式" class="headerlink" title="11.11_IO流(装饰设计模式)"></a>11.11_IO流(装饰设计模式)</h4><ul><li><p>interface Coder {<br>​        public void code();<br>​    }<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Coder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"javase"</span>);</span><br><span class="line">System.out.println(<span class="string">"javaweb"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeiMaStudent</span> <span class="keyword">implements</span> <span class="title">Coder</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Student s;<span class="comment">//获取到被包装的类的引用</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HeiMaStudent</span><span class="params">(Student s)</span> </span>&#123;<span class="comment">//通过构造函数创建对象的时候,传入被包装的对象</span></span><br><span class="line"><span class="keyword">this</span>.s = s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;<span class="comment">//对其原有功能进行升级</span></span><br><span class="line">s.code();</span><br><span class="line">System.out.println(<span class="string">"数据库"</span>);</span><br><span class="line">System.out.println(<span class="string">"ssh"</span>);</span><br><span class="line">System.out.println(<span class="string">"安卓"</span>);</span><br><span class="line">System.out.println(<span class="string">"....."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-12-IO流-使用指定的码表读写字符"><a href="#11-12-IO流-使用指定的码表读写字符" class="headerlink" title="11.12_IO流(使用指定的码表读写字符)"></a>11.12_IO流(使用指定的码表读写字符)</h4><ul><li><p>FileReader是使用默认码表读取文件, 如果需要使用指定码表读取, 那么可以使用InputStreamReader(字节流,编码表)</p></li><li><p>FileWriter是使用默认码表写出文件, 如果需要使用指定码表写出, 那么可以使用OutputStreamWriter(字节流,编码表)</p></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader br = <span class="comment">//高效的用指定的编码表读</span></span><br><span class="line"><span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"UTF-8.txt"</span>), <span class="string">"UTF-8"</span>));</span><br><span class="line">BufferedWriter bw = <span class="comment">//高效的用指定的编码表写</span></span><br><span class="line"><span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"GBK.txt"</span>), <span class="string">"GBK"</span>));</span><br><span class="line"><span class="keyword">int</span> ch;</span><br><span class="line"><span class="keyword">while</span>((ch = br.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">bw.write(ch);</span><br><span class="line">&#125;</span><br><span class="line">br.close();</span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure><h4 id="11-13-IO流-转换流图解"><a href="#11-13-IO流-转换流图解" class="headerlink" title="11.13_IO流(转换流图解)"></a>11.13_IO流(转换流图解)</h4></li><li><p>画图分析转换流</p></li></ul><h4 id="11-14-IO流-获取文本上字符出现的次数"><a href="#11-14-IO流-获取文本上字符出现的次数" class="headerlink" title="11.14_IO流(获取文本上字符出现的次数)"></a>11.14_IO流(获取文本上字符出现的次数)</h4><ul><li>获取一个文本上每个字符出现的次数,将结果写在times.txt上</li></ul><h4 id="11-15-IO流-试用版软件"><a href="#11-15-IO流-试用版软件" class="headerlink" title="11.15_IO流(试用版软件)"></a>11.15_IO流(试用版软件)</h4><ul><li>当我们下载一个试用版软件,没有购买正版的时候,每执行一次就会提醒我们还有多少次使用机会用学过的IO流知识,模拟试用版软件,试用10次机会,执行一次就提示一次您还有几次机会,如果次数到了提示请购买正版</li></ul><h4 id="11-16-File类-递归"><a href="#11-16-File类-递归" class="headerlink" title="11.16_File类(递归)"></a>11.16_File类(递归)</h4><ul><li>5的阶乘    </li></ul><h4 id="11-17-File类-练习"><a href="#11-17-File类-练习" class="headerlink" title="11.17_File类(练习)"></a>11.17_File类(练习)</h4><ul><li>需求:从键盘输入接收一个文件夹路径,打印出该文件夹下所有的.java文件名</li></ul><h4 id="11-18-IO流-总结"><a href="#11-18-IO流-总结" class="headerlink" title="11.18_IO流(总结)"></a>11.18_IO流(总结)</h4><ul><li>1.会用BufferedReader读取GBK码表和UTF-8码表的字符</li><li>2.会用BufferedWriter写出字符到GBK码表和UTF-8码表的文件中</li><li>3.会使用BufferedReader从键盘读取一行</li><li></li></ul><h3 id="12-其他流"><a href="#12-其他流" class="headerlink" title="12.其他流"></a>12.其他流</h3><p>﻿####  12.01_IO流(序列流)(了解)</p><ul><li><p>1.什么是序列流</p><ul><li>序列流可以把多个字节输入流整合成一个, 从序列流中读取数据时, 将从被整合的第一个流开始读, 读完一个之后继续读第二个, 以此类推.</li></ul></li><li><p>2.使用方式</p><ul><li><p>整合两个: SequenceInputStream(InputStream, InputStream)</p></li><li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis1 = <span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>);<span class="comment">//创建输入流对象,关联a.txt</span></span><br><span class="line">FileInputStream fis2 = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>);<span class="comment">//创建输入流对象,关联b.txt</span></span><br><span class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(fis1, fis2);<span class="comment">//将两个流整合成一个流</span></span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"c.txt"</span>);<span class="comment">//创建输出流对象,关联c.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = sis.read()) != -<span class="number">1</span>) &#123;<span class="comment">//用整合后的读</span></span><br><span class="line">fos.write(b);<span class="comment">//写到指定文件上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="12-02-IO流-序列流整合多个-了解"><a href="#12-02-IO流-序列流整合多个-了解" class="headerlink" title="12.02_IO流(序列流整合多个)(了解)"></a>12.02_IO流(序列流整合多个)(了解)</h4></li></ul></li><li><p>整合多个: SequenceInputStream(Enumeration)</p></li></ul>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis1 = <span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>);<span class="comment">//创建输入流对象,关联a.txt</span></span><br><span class="line">FileInputStream fis2 = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>);<span class="comment">//创建输入流对象,关联b.txt</span></span><br><span class="line">FileInputStream fis3 = <span class="keyword">new</span> FileInputStream(<span class="string">"c.txt"</span>);<span class="comment">//创建输入流对象,关联c.txt</span></span><br><span class="line">Vector&lt;InputStream&gt; v = <span class="keyword">new</span> Vector&lt;&gt;();<span class="comment">//创建vector集合对象</span></span><br><span class="line">v.add(fis1);<span class="comment">//将流对象添加</span></span><br><span class="line">v.add(fis2);</span><br><span class="line">v.add(fis3);</span><br><span class="line">Enumeration&lt;InputStream&gt; en = v.elements();<span class="comment">//获取枚举引用</span></span><br><span class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(en);<span class="comment">//传递给SequenceInputStream构造</span></span><br><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"d.txt"</span>);</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = sis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">fos.write(b);</span><br><span class="line">&#125;</span><br><span class="line">sis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h4 id="12-03-IO流-内存输出流-掌握"><a href="#12-03-IO流-内存输出流-掌握" class="headerlink" title="12.03_IO流(内存输出流*)(掌握)"></a>12.03_IO流(内存输出流<strong>*</strong>)(掌握)</h4><ul><li><p>1.什么是内存输出流</p><ul><li>该输出流可以向内存中写数据, 把内存当作一个缓冲区, 写出之后可以一次性获取出所有数据</li></ul></li><li><p>2.使用方式</p><ul><li><p>创建对象: new ByteArrayOutputStream()</p></li><li><p>写出数据: write(int), write(byte[])</p></li><li><p>获取数据: toByteArray()</p></li><li><p>FileInputStream fis = new FileInputStream(“a.txt”);<br>​    ByteArrayOutputStream baos = new ByteArrayOutputStream();<br>​    int b;<br>​    while((b = fis.read()) != -1) {<br>​        baos.write(b);<br>​    }<br>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//byte[] newArr = baos.toByteArray();//将内存缓冲区中所有的字节存储在newArr中</span></span><br><span class="line"><span class="comment">//System.out.println(new String(newArr));</span></span><br><span class="line">System.out.println(baos);</span><br><span class="line">fis.close();</span><br></pre></td></tr></table></figure><h4 id="12-04-IO流-内存输出流之黑马面试题-掌握"><a href="#12-04-IO流-内存输出流之黑马面试题-掌握" class="headerlink" title="12.04_IO流(内存输出流之黑马面试题)(掌握)"></a>12.04_IO流(内存输出流之黑马面试题)(掌握)</h4></li></ul></li><li><p>定义一个文件输入流,调用read(byte[] b)方法,将a.txt文件中的内容打印出来(byte数组大小限制为5)</p></li><li><p>FileInputStream fis = new FileInputStream(“a.txt”);                //创建字节输入流,关联a.txt<br>​        ByteArrayOutputStream baos = new ByteArrayOutputStream();        //创建内存输出流<br>​        byte[] arr = new byte[5];                                        //创建字节数组,大小为5<br>​        int len;<br>​        while((len = fis.read(arr)) != -1) {                            //将文件上的数据读到字节数组中<br>​            baos.write(arr, 0, len);                                    //将字节数组的数据写到内存缓冲区中<br>​        }<br>​        System.out.println(baos);                                        //将内存缓冲区的内容转换为字符串打印<br>​        fis.close();</p><h4 id="12-05-IO流-随机访问流概述和读写数据-了解"><a href="#12-05-IO流-随机访问流概述和读写数据-了解" class="headerlink" title="12.05_IO流(随机访问流概述和读写数据)(了解)"></a>12.05_IO流(随机访问流概述和读写数据)(了解)</h4></li><li><p>A:随机访问流概述</p><ul><li>RandomAccessFile概述</li><li>RandomAccessFile类不属于流，是Object类的子类。但它融合了InputStream和OutputStream的功能。</li><li>支持对随机访问文件的读取和写入。</li></ul></li><li><p>B:read(),write(),seek()</p></li></ul><h4 id="12-06-IO流-对象操作流ObjecOutputStream-了解"><a href="#12-06-IO流-对象操作流ObjecOutputStream-了解" class="headerlink" title="12.06_IO流(对象操作流ObjecOutputStream)(了解)"></a>12.06_IO流(对象操作流ObjecOutputStream)(了解)</h4><ul><li><p>1.什么是对象操作流</p><ul><li>该流可以将一个对象写出, 或者读取一个对象到程序中. 也就是执行了序列化和反序列化的操作.</li></ul></li><li><p>2.使用方式</p><ul><li><p>写出: new ObjectOutputStream(OutputStream), writeObject()</p><p>public class Demo3_ObjectOutputStream {</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> * 将对象写出,序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">Person p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">23</span>);</span><br><span class="line">Person p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">24</span>);</span><br><span class="line"><span class="comment">//FileOutputStream fos = new FileOutputStream("e.txt");</span></span><br><span class="line"><span class="comment">//fos.write(p1);</span></span><br><span class="line"><span class="comment">//FileWriter fw = new FileWriter("e.txt");</span></span><br><span class="line"><span class="comment">//fw.write(p1);</span></span><br><span class="line"><span class="comment">//无论是字节输出流,还是字符输出流都不能直接写出对象</span></span><br><span class="line">ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"e.txt"</span>));<span class="comment">//创建对象输出流</span></span><br><span class="line">oos.writeObject(p1);</span><br><span class="line">oos.writeObject(p2);</span><br><span class="line">oos.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="12-07-IO流-对象操作流ObjectInputStream-了解"><a href="#12-07-IO流-对象操作流ObjectInputStream-了解" class="headerlink" title="12.07_IO流(对象操作流ObjectInputStream)(了解)"></a>12.07_IO流(对象操作流ObjectInputStream)(了解)</h4></li></ul></li><li><p>读取: new ObjectInputStream(InputStream), readObject()</p><ul><li><p>public class Demo3_ObjectInputStream {</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ClassNotFoundException </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> FileNotFoundException </span></span><br><span class="line"><span class="comment"> * 读取对象,反序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"e.txt"</span>));</span><br><span class="line">Person p1 = (Person) ois.readObject();</span><br><span class="line">Person p2 = (Person) ois.readObject();</span><br><span class="line">System.out.println(p1);</span><br><span class="line">System.out.println(p2);</span><br><span class="line">ois.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="12-08-IO流-对象操作流优化-了解"><a href="#12-08-IO流-对象操作流优化-了解" class="headerlink" title="12.08_IO流(对象操作流优化)(了解)"></a>12.08_IO流(对象操作流优化)(了解)</h4><ul><li>将对象存储在集合中写出</li></ul><p>  ​    </p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- Person p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">23</span>);</span><br><span class="line">  Person p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">24</span>);</span><br><span class="line">  Person p3 = <span class="keyword">new</span> Person(<span class="string">"马哥"</span>, <span class="number">18</span>);</span><br><span class="line">  Person p4 = <span class="keyword">new</span> Person(<span class="string">"辉哥"</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">  ArrayList&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  list.add(p1);</span><br><span class="line">  list.add(p2);</span><br><span class="line">  list.add(p3);</span><br><span class="line">  list.add(p4);</span><br><span class="line"></span><br><span class="line">  ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"f.txt"</span>));</span><br><span class="line">  oos.writeObject(list);<span class="comment">//写出集合对象</span></span><br><span class="line"></span><br><span class="line">  oos.close();</span><br><span class="line"></span><br><span class="line">- 读取到的是一个集合对象</span><br><span class="line"></span><br><span class="line">  ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"f.txt"</span>));</span><br><span class="line">  ArrayList&lt;Person&gt; list = (ArrayList&lt;Person&gt;)ois.readObject();<span class="comment">//泛型在运行期会被擦除,索引运行期相当于没有泛型</span></span><br><span class="line">  <span class="comment">//想去掉黄色可以加注解</span></span><br><span class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">  <span class="keyword">for</span> (Person person : list) &#123;</span><br><span class="line">  System.out.println(person);</span><br><span class="line">  &#125;</span><br><span class="line">ois.close();</span><br></pre></td></tr></table></figure><h4 id="12-09-IO流-加上id号-了解"><a href="#12-09-IO流-加上id号-了解" class="headerlink" title="12.09_IO流(加上id号)(了解)"></a>12.09_IO流(加上id号)(了解)</h4><ul><li><p>注意</p><ul><li>要写出的对象必须实现Serializable接口才能被序列化</li><li>不用必须加id号</li></ul></li></ul><h4 id="12-10-IO流-数据输入输出流-了解"><a href="#12-10-IO流-数据输入输出流-了解" class="headerlink" title="12.10_IO流(数据输入输出流)(了解)"></a>12.10_IO流(数据输入输出流)(了解)</h4><ul><li><p>1.什么是数据输入输出流</p><ul><li>DataInputStream, DataOutputStream可以按照基本数据类型大小读写数据</li><li>例如按Long大小写出一个数字, 写出时该数据占8字节. 读取的时候也可以按照Long类型读取, 一次读取8个字节.</li></ul></li><li><p>2.使用方式</p><ul><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DataOutputStream(OutputStream), writeInt(), writeLong() </span><br><span class="line"></span><br><span class="line">DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"b.txt"</span>));</span><br><span class="line">dos.writeInt(<span class="number">997</span>);</span><br><span class="line">dos.writeInt(<span class="number">998</span>);</span><br><span class="line">dos.writeInt(<span class="number">999</span>);</span><br><span class="line">dos.close();</span><br><span class="line">DataInputStream(InputStream), readInt(), readLong()</span><br><span class="line"></span><br><span class="line">DataInputStream dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>));</span><br><span class="line"><span class="keyword">int</span> x = dis.readInt();</span><br><span class="line"><span class="keyword">int</span> y = dis.readInt();</span><br><span class="line"><span class="keyword">int</span> z = dis.readInt();</span><br><span class="line">System.out.println(x);</span><br><span class="line">System.out.println(y);</span><br><span class="line">System.out.println(z);</span><br><span class="line">dis.close();</span><br></pre></td></tr></table></figure></li><li></li></ul></li></ul><h4 id="12-11-IO流-打印流的概述和特点-掌握"><a href="#12-11-IO流-打印流的概述和特点-掌握" class="headerlink" title="12.11_IO流(打印流的概述和特点)(掌握)"></a>12.11_IO流(打印流的概述和特点)(掌握)</h4><ul><li><p>1.什么是打印流</p><ul><li><p>该流可以很方便的将对象的toString()结果输出, 并且自动加上换行, 而且可以使用自动刷出的模式</p></li><li><p>System.out就是一个PrintStream, 其默认向控制台输出信息</p><p>PrintStream ps = System.out;<br>​    ps.println(97);                    //其实底层用的是Integer.toString(x),将x转换为数字字符串打印<br>​    ps.println(“xxx”);<br>​    ps.println(new Person(“张三”, 23));<br>​    Person p = null;<br>​    ps.println(p);                    //如果是null,就返回null,如果不是null,就调用对象的toString()</p></li></ul></li><li><p>2.使用方式</p><ul><li><p>打印: print(), println()</p></li><li><p>自动刷出: PrintWriter(OutputStream out, boolean autoFlush, String encoding) </p></li><li><p>打印流只操作数据目的</p><p>PrintWriter pw = new PrintWriter(new FileOutputStream(“g.txt”), true);<br>​    pw.write(97);<br>​    pw.print(“大家好”);<br>​    pw.println(“你好”);                //自动刷出,只针对的是println方法<br>​    pw.close();</p></li></ul></li></ul><h4 id="12-12-IO流-标准输入输出流概述和输出语句"><a href="#12-12-IO流-标准输入输出流概述和输出语句" class="headerlink" title="12.12_IO流(标准输入输出流概述和输出语句)"></a>12.12_IO流(标准输入输出流概述和输出语句)</h4><ul><li><p>1.什么是标准输入输出流(掌握)</p><ul><li>System.in是InputStream, 标准输入流, 默认可以从键盘输入读取字节数据</li><li>System.out是PrintStream, 标准输出流, 默认可以向Console中输出字符和字节数据</li></ul></li><li><p>2.修改标准输入输出流(了解)</p><ul><li><p>修改输入流: System.setIn(InputStream)</p></li><li><p>修改输出流: System.setOut(PrintStream)</p></li><li><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">System.setIn(<span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>));<span class="comment">//修改标准输入流System.setOut(new PrintStream("b.txt"));//修改标准输出流</span></span><br><span class="line">InputStream in = System.in;<span class="comment">//获取标准输入流</span></span><br><span class="line">PrintStream ps = System.out;<span class="comment">//获取标准输出流</span></span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">while</span>((b = in.read()) != -<span class="number">1</span>) &#123;<span class="comment">//从a.txt上读取数据</span></span><br><span class="line">ps.write(b);<span class="comment">//将数据写到b.txt上</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">in.close();</span><br><span class="line">ps.close();</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="12-13-IO流-修改标准输入输出流拷贝图片-了解"><a href="#12-13-IO流-修改标准输入输出流拷贝图片-了解" class="headerlink" title="12.13_IO流(修改标准输入输出流拷贝图片)(了解)"></a>12.13_IO流(修改标准输入输出流拷贝图片)(了解)</h4><p>​<br>​        </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">System.setIn(<span class="keyword">new</span> FileInputStream(<span class="string">"IO图片.png"</span>));<span class="comment">//改变标准输入流</span></span><br><span class="line">System.setOut(<span class="keyword">new</span> PrintStream(<span class="string">"copy.png"</span>)); <span class="comment">//改变标准输出流</span></span><br><span class="line">InputStream is = System.in;<span class="comment">//获取标准输入流</span></span><br><span class="line">PrintStream ps = System.out;<span class="comment">//获取标准输出流</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">byte</span>[] arr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>((len = is.read(arr)) != -<span class="number">1</span>) &#123;</span><br><span class="line">ps.write(arr, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">is.close();</span><br><span class="line">ps.close();</span><br></pre></td></tr></table></figure><h4 id="12-14-IO流-两种方式实现键盘录入-了解"><a href="#12-14-IO流-两种方式实现键盘录入-了解" class="headerlink" title="12.14_IO流(两种方式实现键盘录入)(了解)"></a>12.14_IO流(两种方式实现键盘录入)(了解)</h4><ul><li>A:BufferedReader的readLine方法。<ul><li>BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</li></ul></li><li>B:Scanner</li></ul><h4 id="12-15-IO流-Properties的概述和作为Map集合的使用-了解"><a href="#12-15-IO流-Properties的概述和作为Map集合的使用-了解" class="headerlink" title="12.15_IO流(Properties的概述和作为Map集合的使用)(了解)"></a>12.15_IO流(Properties的概述和作为Map集合的使用)(了解)</h4><ul><li>A:Properties的概述<ul><li>Properties 类表示了一个持久的属性集。</li><li>Properties 可保存在流中或从流中加载。</li><li>属性列表中每个键及其对应值都是一个字符串。 </li></ul></li><li>B:案例演示<ul><li>Properties作为Map集合的使用</li></ul></li></ul><h4 id="12-16-IO流-Properties的特殊功能使用-了解"><a href="#12-16-IO流-Properties的特殊功能使用-了解" class="headerlink" title="12.16_IO流(Properties的特殊功能使用)(了解)"></a>12.16_IO流(Properties的特殊功能使用)(了解)</h4><ul><li>A:Properties的特殊功能<ul><li>public Object setProperty(String key,String value)</li><li>public String getProperty(String key)</li><li>public Enumeration<string> stringPropertyNames()</string></li></ul></li><li>B:案例演示<ul><li>Properties的特殊功能</li></ul></li></ul><h4 id="12-17-IO流-Properties的load-和store-功能-了解"><a href="#12-17-IO流-Properties的load-和store-功能-了解" class="headerlink" title="12.17_IO流(Properties的load()和store()功能)(了解)"></a>12.17_IO流(Properties的load()和store()功能)(了解)</h4><ul><li>A:Properties的load()和store()功能</li><li>B:案例演示<ul><li>Properties的load()和store()功能</li></ul></li></ul><h4 id="12-18-day22总结"><a href="#12-18-day22总结" class="headerlink" title="12.18_day22总结"></a>12.18_day22总结</h4><ul><li>把今天的知识点总结一遍。</li></ul></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; 复习下Java基础!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>用第三方sdk解决微信授权</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9sdk%E8%A7%A3%E5%86%B3%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/用第三方sdk解决微信授权/</id>
    <published>2018-10-22T14:35:37.000Z</published>
    <updated>2018-10-24T12:40:45.875Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>好身材才是男人最美丽的衣服</strong><excerpt in="" index="" |="" 首页摘要=""><br> 运用sdk快速解决微信授权,解决大量的微信文档!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖:"></a>1.引入依赖:</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.binarywang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>weixin-java-mp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-建立一个Controller"><a href="#2-建立一个Controller" class="headerlink" title="2.建立一个Controller"></a>2.建立一个Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.imooc.config.ProjectUrlConfig;</span><br><span class="line"><span class="keyword">import</span> com.imooc.enums.ResultEnum;</span><br><span class="line"><span class="keyword">import</span> com.imooc.exception.SellException;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.common.api.WxConsts;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.common.exception.WxErrorException;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpService;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.bean.result.WxMpOAuth2AccessToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 廖师兄</span></span><br><span class="line"><span class="comment"> * 2017-07-03 01:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/wechat"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WxMpService wxMpService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WxMpService wxOpenService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectUrlConfig projectUrlConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/authorize"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">authorize</span><span class="params">(@RequestParam(<span class="string">"returnUrl"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        <span class="comment">//1. 配置</span></span><br><span class="line">        <span class="comment">//2. 调用方法</span></span><br><span class="line">        String url = projectUrlConfig.getWechatMpAuthorize() + <span class="string">"/sell/wechat/userInfo"</span>;</span><br><span class="line">        String redirectUrl = wxMpService.oauth2buildAuthorizationUrl(url, WxConsts.OAUTH2_SCOPE_BASE, URLEncoder.encode(returnUrl));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/userInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">userInfo</span><span class="params">(@RequestParam(<span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                         @<span class="title">RequestParam</span><span class="params">(<span class="string">"state"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        WxMpOAuth2AccessToken wxMpOAuth2AccessToken = <span class="keyword">new</span> WxMpOAuth2AccessToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            wxMpOAuth2AccessToken = wxMpService.oauth2getAccessToken(code);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (WxErrorException e) &#123;</span><br><span class="line">            log.error(<span class="string">"【微信网页授权】&#123;&#125;"</span>, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SellException(ResultEnum.WECHAT_MP_ERROR.getCode(), e.getError().getErrorMsg());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String openId = wxMpOAuth2AccessToken.getOpenId();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + returnUrl + <span class="string">"?openid="</span> + openId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/qrAuthorize"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">qrAuthorize</span><span class="params">(@RequestParam(<span class="string">"returnUrl"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        String url = projectUrlConfig.getWechatOpenAuthorize() + <span class="string">"/sell/wechat/qrUserInfo"</span>;</span><br><span class="line">        String redirectUrl = wxOpenService.buildQrConnectUrl(url, WxConsts.QRCONNECT_SCOPE_SNSAPI_LOGIN, URLEncoder.encode(returnUrl));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/qrUserInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">qrUserInfo</span><span class="params">(@RequestParam(<span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                             @<span class="title">RequestParam</span><span class="params">(<span class="string">"state"</span>)</span> String returnUrl) </span>&#123;</span><br><span class="line">        WxMpOAuth2AccessToken wxMpOAuth2AccessToken = <span class="keyword">new</span> WxMpOAuth2AccessToken();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            wxMpOAuth2AccessToken = wxOpenService.oauth2getAccessToken(code);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (WxErrorException e) &#123;</span><br><span class="line">            log.error(<span class="string">"【微信网页授权】&#123;&#125;"</span>, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SellException(ResultEnum.WECHAT_MP_ERROR.getCode(), e.getError().getErrorMsg());</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">"wxMpOAuth2AccessToken=&#123;&#125;"</span>, wxMpOAuth2AccessToken);</span><br><span class="line">        String openId = wxMpOAuth2AccessToken.getOpenId();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:"</span> + returnUrl + <span class="string">"?openid="</span> + openId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-配置文件"><a href="#3-配置文件" class="headerlink" title="3.配置文件"></a>3.配置文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpConfigStorage;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpInMemoryConfigStorage;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.WxMpService;</span><br><span class="line"><span class="keyword">import</span> me.chanjar.weixin.mp.api.impl.WxMpServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 廖师兄</span></span><br><span class="line"><span class="comment"> * 2017-07-03 01:25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatMpConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WechatAccountConfig accountConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WxMpService <span class="title">wxMpService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WxMpService wxMpService = <span class="keyword">new</span> WxMpServiceImpl();</span><br><span class="line">        wxMpService.setWxMpConfigStorage(wxMpConfigStorage());</span><br><span class="line">        <span class="keyword">return</span> wxMpService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WxMpConfigStorage <span class="title">wxMpConfigStorage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WxMpInMemoryConfigStorage wxMpConfigStorage = <span class="keyword">new</span> WxMpInMemoryConfigStorage();</span><br><span class="line">        wxMpConfigStorage.setAppId(accountConfig.getMpAppId());</span><br><span class="line">        wxMpConfigStorage.setSecret(accountConfig.getMpAppSecret());</span><br><span class="line">        <span class="keyword">return</span> wxMpConfigStorage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;好身材才是男人最美丽的衣服&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; 运用sdk快速解决微信授权,解决大量的微信文档!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>并查集(Union Find)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/%E5%B9%B6%E6%9F%A5%E9%9B%86(Union%20Find)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/并查集(Union Find)/</id>
    <published>2018-10-22T14:35:37.000Z</published>
    <updated>2018-10-22T06:30:34.696Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="并查集-Union-Find"><a href="#并查集-Union-Find" class="headerlink" title="并查集(Union Find)"></a>并查集(Union Find)</h1><h2 id="1-什么是并查集"><a href="#1-什么是并查集" class="headerlink" title="1.什么是并查集"></a>1.什么是并查集</h2><blockquote><ul><li>是一种很不一样的树形结构</li><li>适合解决链接问题</li><li>网络中节点的链接状态</li><li>数学中集合类的实现(并集)</li></ul></blockquote><h2 id="2-并查集1-0版本的实现-Quick-find-查的快-并的慢"><a href="#2-并查集1-0版本的实现-Quick-find-查的快-并的慢" class="headerlink" title="2.并查集1.0版本的实现(Quick find 查的快,并的慢)"></a>2.并查集1.0版本的实现(Quick find 查的快,并的慢)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span> :</span><br><span class="line">    <span class="keyword">int</span> *id;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UnionFind(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        count = n;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~UnionFind() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[]id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">        assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">        <span class="keyword">return</span> id[p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p ,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid=find(p);</span><br><span class="line">        <span class="keyword">int</span> qid=find(q);</span><br><span class="line">        <span class="keyword">if</span>(q!=p)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(id[i]==pid)</span><br><span class="line">                    id[i]=qid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="3-使用指向父亲节点实现并查集"><a href="#3-使用指向父亲节点实现并查集" class="headerlink" title="3.使用指向父亲节点实现并查集"></a>3.使用指向父亲节点实现并查集</h2><p><img src="/img/1539598030956.png" alt="1539598030956"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//ARITHMETIC_IMOOC_UNIONFIND2_H</span></span></span><br><span class="line"><span class="keyword">namespace</span> UP2 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> *parent;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        UnionFind(<span class="keyword">int</span> count) &#123;</span><br><span class="line">            parent = <span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            <span class="keyword">this</span>-&gt;count = count;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">                parent[i] = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ~UnionFind() &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">            assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">            <span class="keyword">while</span>(p!=parent[p])</span><br><span class="line">                p=parent[p];</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isConnection</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> pRoot=find(p);</span><br><span class="line">            <span class="keyword">int</span> qRoot=find(q);</span><br><span class="line">            <span class="keyword">if</span>(pRoot!=qRoot)</span><br><span class="line">                parent[pRoot]=parent[qRoot];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-并查集的优化-判断元素的层级尺寸再合并"><a href="#4-并查集的优化-判断元素的层级尺寸再合并" class="headerlink" title="4.并查集的优化(判断元素的层级尺寸再合并)"></a>4.并查集的优化(判断元素的层级尺寸再合并)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/15.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ARITHMETIC_IMOOC_UNIONFIND2_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//ARITHMETIC_IMOOC_UNIONFIND2_H</span></span></span><br><span class="line"><span class="keyword">namespace</span> UP3 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> *parent;</span><br><span class="line">        <span class="keyword">int</span> *sz;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        UnionFind(<span class="keyword">int</span> count) &#123;</span><br><span class="line">            parent = <span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            sz=<span class="keyword">new</span> <span class="keyword">int</span>[count];</span><br><span class="line">            <span class="keyword">this</span>-&gt;count = count;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">                parent[i] = i;</span><br><span class="line">                sz[i]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ~UnionFind() &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">            assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">            <span class="keyword">while</span>(p!=parent[p])</span><br><span class="line">                p=parent[p];</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isConnection</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> find(p)==find(q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> pRoot=find(p);</span><br><span class="line">            <span class="keyword">int</span> qRoot=find(q);</span><br><span class="line">            <span class="keyword">if</span>(pRoot==qRoot)</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            <span class="keyword">if</span>(sz[pRoot]&lt;sz[qRoot])&#123;</span><br><span class="line">                parent[pRoot]=qRoot;</span><br><span class="line">                sz[qRoot]+=sz[pRoot];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                parent[qRoot]=pRoot;</span><br><span class="line">                sz[pRoot]+=sz[qRot];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-通过路径压缩算法实现并查集的优化"><a href="#5-通过路径压缩算法实现并查集的优化" class="headerlink" title="5.通过路径压缩算法实现并查集的优化"></a>5.通过路径压缩算法实现并查集的优化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">      assert(p&gt;=<span class="number">0</span>&amp;&amp;p&lt;count);</span><br><span class="line">      <span class="keyword">while</span>(p!=parent[p])&#123;</span><br><span class="line">          p=parent[p];</span><br><span class="line">          parent[p]=parent[parent[p]];<span class="comment">//路径压缩的实现</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> p;     </span><br><span class="line">    <span class="comment">//第二个版本的路径压缩算法,使用递归实现</span></span><br><span class="line">      <span class="keyword">if</span> (p != parent[p])</span><br><span class="line">          parent[p] != find(parent[p]);</span><br><span class="line">      <span class="keyword">return</span> parent[p];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>SpringMvc的一些方法</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/22/SpringMvc%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B9%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/22/SpringMvc的一些方法/</id>
    <published>2018-10-21T16:00:00.000Z</published>
    <updated>2018-10-24T12:47:31.285Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 失败者找理由,成功者找方法!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>对SpringMvc的一些常用方法<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><h2 id="1-Spring-mvc中关于表单中String日期转换为Date的工具类-实现Converter接口"><a href="#1-Spring-mvc中关于表单中String日期转换为Date的工具类-实现Converter接口" class="headerlink" title="1.Spring-mvc中关于表单中String日期转换为Date的工具类(实现Converter接口)"></a>1.Spring-mvc中关于表单中String日期转换为Date的工具类(实现<em>Converter</em>接口)</h2><blockquote><p>需要实现一个接口,并重写一个方法,如下:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.springmvc.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConvert2</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String arg0)</span> </span>&#123;</span><br><span class="line">Date date=<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">SimpleDateFormat df=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">date=df.parse(arg0);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用这个转换器需要在spring的配置文件中添加相应的bean,如下:</p></blockquote><pre><code> &lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;&lt;!-- 使用自定义转换器 --&gt;&lt;mvc:annotation-driven conversion-service=&quot;MyConvert&quot; /&gt;&lt;!-- 定义转换器 --&gt;&lt;bean id=&quot;MyConvert&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;    &lt;property name=&quot;converters&quot;&gt;        &lt;set&gt;            &lt;bean class=&quot;com.itheima.springmvc.utils.DateConvert&quot; /&gt;        &lt;/set&gt;    &lt;/property&gt;&lt;/bean&gt;</code></pre><h2 id="2-web端关于get和post请求乱码的解决方案-web-xml中添加过滤器"><a href="#2-web端关于get和post请求乱码的解决方案-web-xml中添加过滤器" class="headerlink" title="2.web端关于get和post请求乱码的解决方案(web.xml中添加过滤器)"></a>2.web端关于get和post请求乱码的解决方案(web.xml中添加过滤器)</h2><pre><code>    &lt;!-- 解决post乱码问题 --&gt;&lt;filter&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;    &lt;!-- 设置编码参是UTF8 --&gt;    &lt;init-param&gt;        &lt;param-name&gt;encoding&lt;/param-name&gt;        &lt;param-value&gt;UTF-8&lt;/param-value&gt;    &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;</code></pre><hr><blockquote><p>修改tomcat中server.xml 文件解决get请求乱码(最方便的方法)</p><ul><li><strong>URLEncoding=”utf-8”</strong> 为添加部分<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URLEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><hr><blockquote><p>也可以使用自定义的拦截器实现(get和post请求均解决乱码问题):</p><ul><li>运用动态代理的设计模式</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Filter04</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">HttpServletRequest req=(HttpServletRequest)request;</span><br><span class="line">Proxy.newProxyInstance(Filter04.class.getClassLoader(), xxx.class.getInterfaces(), <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(method.getName().equalsIgnoreCase(<span class="string">"getAttribute"</span>)) &#123;</span><br><span class="line">String md=req.getMethod();</span><br><span class="line"><span class="keyword">if</span>(<span class="string">"get"</span>.equals(md)) &#123;</span><br><span class="line">String reuslt=(String)method.invoke(req, args);</span><br><span class="line">String str=<span class="keyword">new</span> String(reuslt.getBytes(<span class="string">"iso-8858-1"</span>),<span class="string">"utf-8"</span>);</span><br><span class="line"><span class="keyword">return</span> str;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>##3.在Controller中返回值为String时可以跳转到相应的页面</p><blockquote><p>直接跳转到固定页面:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RequestMapping(<span class="string">"itemEdit"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">itemEdit</span><span class="params">(Model model, @RequestParam(value = <span class="string">"id"</span>, required = <span class="keyword">true</span>, defaultValue = <span class="string">"1"</span>)</span> Integer ids) </span>&#123;</span><br><span class="line"><span class="comment">// 查询商品信息</span></span><br><span class="line">Item item = itemService.getItemById(ids);</span><br><span class="line"><span class="comment">// model返回数据模型</span></span><br><span class="line">model.addAttribute(<span class="string">"item"</span>, item);</span><br><span class="line"><span class="comment">// mav.addObject("item", item);</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"itemEdit"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><hr><blockquote><p>请求跳转到其他页面</p><ul><li>“forward:xxx.action”</li></ul><p>重定向到其他页面</p><ul><li>“redirect:yyy.action”</li></ul></blockquote><hr><h2 id="4-HandlerExceptionResolver-接口处理全局异常"><a href="#4-HandlerExceptionResolver-接口处理全局异常" class="headerlink" title="4.HandlerExceptionResolver 接口处理全局异常"></a>4.HandlerExceptionResolver 接口处理全局异常</h2><hr><h2 id="5-springmvc上传文件写法-图片"><a href="#5-springmvc上传文件写法-图片" class="headerlink" title="5.springmvc上传文件写法(图片)"></a>5.springmvc上传文件写法(图片)</h2><p><img src="/img/1534579880860.png" alt="Alt text"></p><blockquote><p>需要加载的jar包<br><img src="/img/1534579925554.png" alt="Alt text"><br>配置多媒体解析器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置多媒体处理器 --&gt;</span><br><span class="line">&lt;!-- 注意：这里id必须填写：multipartResolver --&gt;</span><br><span class="line">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;</span><br><span class="line">&lt;!-- 最大上传文件大小 --&gt;</span><br><span class="line">&lt;property name=&quot;maxUploadSize&quot; value=&quot;8388608&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>前端代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 上传图片是需要指定属性 enctype="multipart/form-data" --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;form id="itemForm" action="" method="post" enctype="multipart/form-data"&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"itemForm"</span><span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/updateItem.action"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.id &#125;"</span> /&gt;</span> 修改商品信息：</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>商品图片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;item.pic !=null&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/pic/$&#123;item.pic&#125;"</span> <span class="attr">width</span>=<span class="string">100</span> <span class="attr">height</span>=<span class="string">100/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>  <span class="attr">name</span>=<span class="string">"pictureFile"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>上传文件后端代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图片上传用MultipartFile接收文件</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"updateItem"</span>, method = &#123; RequestMethod.POST, RequestMethod.GET &#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateItem</span><span class="params">(Item item, Model model, MultipartFile picFile)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片新名字</span></span><br><span class="line">String name = UUID.randomUUID().toString();</span><br><span class="line"><span class="comment">// 图片原名字</span></span><br><span class="line">String oldName = picFile.getOriginalFilename();</span><br><span class="line"><span class="comment">// 后缀名</span></span><br><span class="line">String exeName = oldName.substring(oldName.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line"></span><br><span class="line">File pic = <span class="keyword">new</span> File(<span class="string">"D:\\WebWork\\"</span> + name + exeName);</span><br><span class="line"><span class="comment">// 保存图片到本地磁盘</span></span><br><span class="line">picFile.transferTo(pic); </span><br><span class="line"><span class="comment">// 更新商品图片信息</span></span><br><span class="line">item.setPic(name + exeName);</span><br><span class="line"></span><br><span class="line">itemServices.update(item);</span><br><span class="line">model.addAttribute(<span class="string">"item"</span>, item);</span><br><span class="line">model.addAttribute(<span class="string">"msg"</span>, <span class="string">"修改商品成功"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"itemEdit"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 失败者找理由,成功者找方法!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对SpringMvc的一些常用方法&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>二分搜索树(Binary Seacher  Tree)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/14/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91(Binary%20Seacher%20%20Tree)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/14/二分搜索树(Binary Seacher  Tree)/</id>
    <published>2018-10-14T14:35:37.000Z</published>
    <updated>2018-10-15T08:20:16.355Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h3 id="1-二分查找"><a href="#1-二分查找" class="headerlink" title="1.二分查找"></a>1.二分查找</h3><blockquote><p>一份为二,折半查找</p><p><strong>要求</strong>:待查找数组必须有序</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(T arr[],<span class="keyword">int</span> n,T target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">0</span>,r=n<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">        <span class="comment">//int mid=(l+r)/2;  这样写存在bug,可能会溢出</span></span><br><span class="line">        <span class="keyword">int</span> mid=l+(r-l)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr[mid]==target)</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">if</span>(target&lt;mid)</span><br><span class="line">            r=mid<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>递归实现二分查找</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">reBinarySearch</span><span class="params">(T arr[], T k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (arr[mid] == k)</span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; arr[mid])</span><br><span class="line">        reBinarySearch(arr, k, l, mid - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        reBinarySearch(arr, k, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-二分搜索树"><a href="#2-二分搜索树" class="headerlink" title="2.二分搜索树"></a>2.二分搜索树</h3><h4 id="2-1二分搜索树的优势"><a href="#2-1二分搜索树的优势" class="headerlink" title="2.1二分搜索树的优势:"></a>2.1二分搜索树的优势:</h4><ul><li><p>高效:</p><p>​    在查找,插入,删除都能以O(lgn)的时间复杂度完成</p></li><li><p>min,max,floor,ceil,rank,select 实现都将很方便</p></li><li><p>在实际应用中,比如要查找一篇文章中某个词出现的次数,用二分搜索树效率将会异常的高</p></li></ul><p><img src="/img/1539167904772.png" alt="1539167904772"></p><h4 id="2-2-二分搜索树的定义"><a href="#2-2-二分搜索树的定义" class="headerlink" title="2.2 二分搜索树的定义:"></a>2.2 二分搜索树的定义:</h4><blockquote><ul><li>在定义中天然的包括了递归结构</li><li>二分搜索树不一定是一颗完全二叉树</li></ul></blockquote><p><img src="/img/1539168446767.png" alt="1539168446767"></p><h4 id="2-3向二叉搜索树中插入新的健值对的实现"><a href="#2-3向二叉搜索树中插入新的健值对的实现" class="headerlink" title="2.3向二叉搜索树中插入新的健值对的实现"></a>2.3向二叉搜索树中插入新的健值对的实现</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST()&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = insert(root ,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line">    <span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node* <span class="title">insert</span><span class="params">(Node *node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            node-&gt;value=value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(node-&gt;key&lt;key)</span><br><span class="line">            node-&gt;left=insert(node-&gt;left,key,value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right=insert(node-&gt;right,key,value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-4二分搜索树实现搜素和是否存在某个值得函数"><a href="#2-4二分搜索树实现搜素和是否存在某个值得函数" class="headerlink" title="2.4二分搜索树实现搜素和是否存在某个值得函数"></a>2.4二分搜索树实现搜素和是否存在某个值得函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST()&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = insert(root ,key,value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找二叉搜索树是否存在key</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> contain(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找key相应节点所对应的Value地址</span></span><br><span class="line">    <span class="function">Value* <span class="title">search</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> search(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line">    <span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node* <span class="title">insert</span><span class="params">(Node *node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            node-&gt;value=value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(node-&gt;key&lt;key)</span><br><span class="line">            node-&gt;left=insert(node-&gt;left,key,value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right=insert(node-&gt;right,key,value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Node* node ,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key&lt;node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;key,key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;right.key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Value* <span class="title">search</span><span class="params">(Node* node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;key==key)</span><br><span class="line">            <span class="keyword">return</span> &amp;(node-&gt;value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key&lt;node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;left,key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;right,key);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-5二分搜索树的前-中-后序遍历-以及二分搜素树的销毁"><a href="#2-5二分搜索树的前-中-后序遍历-以及二分搜素树的销毁" class="headerlink" title="2.5二分搜索树的前,中,后序遍历,以及二分搜素树的销毁"></a>2.5二分搜索树的前,中,后序遍历,以及二分搜素树的销毁</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BST</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node *left;</span><br><span class="line">        Node *right;</span><br><span class="line">        Node(Key key, Value value) &#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">            <span class="keyword">this</span> - value = value;</span><br><span class="line">            <span class="keyword">this</span>-&gt;right = <span class="keyword">this</span>-&gt;left = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;<span class="comment">//存根</span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//存一共有的节点个数</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BST() &#123;</span><br><span class="line">        root = <span class="literal">NULL</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~BST() &#123;</span><br><span class="line">        destory(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key, Value value)</span> </span>&#123;</span><br><span class="line">        root = insert(root, key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找二叉搜索树是否存在key</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> contain(root, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找key相应节点所对应的Value地址</span></span><br><span class="line">    <span class="function">Value *<span class="title">search</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> search(root, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//前序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preOreder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        preOreder(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//中序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        inOrder(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//后序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        postOrder(root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="comment">//以node为根的二叉搜索树中插入节点(key,value)</span></span><br><span class="line"><span class="comment">//放回插入新节点后的二叉搜索树的根</span></span><br><span class="line">    <span class="function">Node *<span class="title">insert</span><span class="params">(Node *node, Key key, Value value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            count++;</span><br><span class="line"><span class="comment">//            node-&gt;key=key;</span></span><br><span class="line"><span class="comment">//            node-&gt;value=value;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            node-&gt;value = value;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (node-&gt;key &lt; key)</span><br><span class="line">            node-&gt;left = insert(node-&gt;left, key, value);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            node-&gt;right = insert(node-&gt;right, key, value);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contain</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;key, key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> contain(node-&gt;right.key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Value *<span class="title">search</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;key == key)</span><br><span class="line">            <span class="keyword">return</span> &amp;(node-&gt;value);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; node-&gt;key)</span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;left, key);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> search(node-&gt;right, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node.key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            preOreder(node-&gt;left);</span><br><span class="line">            preOrder(node-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            inOrder(node-&gt;left);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            inOrder(node-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            postOrder(node-&gt;left);</span><br><span class="line">            postOrder(node-&gt;right);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destory</span><span class="params">(Node *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            destory(node-&gt;left);</span><br><span class="line">            destory(node-&gt;right);</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-6二分搜索树的广度优先遍历-层序遍历"><a href="#2-6二分搜索树的广度优先遍历-层序遍历" class="headerlink" title="2.6二分搜索树的广度优先遍历(层序遍历)"></a>2.6二分搜索树的广度优先遍历(层序遍历)</h3><p><img src="/img/1539226708430.png" alt="1539226708430"></p><blockquote><p>代码实现</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二叉搜索树的程序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">levelOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;Node *&gt; q;</span><br><span class="line">        q.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">            Node node = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            count &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span> &lt;&lt; node-&gt;value &lt;&lt; <span class="string">"  "</span>;</span><br><span class="line">            <span class="keyword">if</span> (node.left)</span><br><span class="line">                q.push(node.left);</span><br><span class="line">            <span class="keyword">if</span> (node.right)</span><br><span class="line">                q.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-7找出最大值和最小值函数实现"><a href="#2-7找出最大值和最小值函数实现" class="headerlink" title="2.7找出最大值和最小值函数实现"></a>2.7找出最大值和最小值函数实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Key <span class="title">minimum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       assert(count != <span class="number">0</span>);</span><br><span class="line">       Node node = root;</span><br><span class="line">       <span class="keyword">while</span> (node.left != <span class="literal">NULL</span>)</span><br><span class="line">           node = node.left;</span><br><span class="line">       <span class="keyword">return</span> node.key;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function">Key <span class="title">maximum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       assert(count != <span class="number">0</span>);</span><br><span class="line">       Node node = root;</span><br><span class="line">       <span class="keyword">while</span> (node.right != <span class="literal">NULL</span>)</span><br><span class="line">           node = node.right;</span><br><span class="line">       <span class="keyword">return</span> node;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="2-8二分搜素树的删除节点"><a href="#2-8二分搜素树的删除节点" class="headerlink" title="2.8二分搜素树的删除节点"></a>2.8二分搜素树的删除节点</h3><blockquote><p>删除最大值和最小值函数的实现:</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除二分搜索树的最小节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root)</span><br><span class="line">            root = removeMin(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//删除二分搜索树的最大节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root)</span><br><span class="line">            root=removeMax(root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function">Node* <span class="title">removeMin</span><span class="params">(Node* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;left==<span class="literal">NULL</span>)&#123;</span><br><span class="line">           Node* rightNode=node-&gt;right;</span><br><span class="line">           <span class="keyword">delete</span>  node;</span><br><span class="line">           count--;</span><br><span class="line">           <span class="keyword">return</span> rightNode;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;left=removeMin(node-&gt;left);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Node* <span class="title">removeMax</span><span class="params">(Node* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;right==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            Node* leftNode=node-&gt;left;</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">            <span class="keyword">return</span> leftNode;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;right=removeMax(node-&gt;right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>二分搜索树删除指定节点:</p></blockquote><p><img src="/img/1539588249714.png" alt="1539588249714"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//删除二叉树的指定节点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        root = remove(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:    </span><br><span class="line">    <span class="function">Node *<span class="title">remove</span><span class="params">(Node *node, Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node-&gt;key) &#123;</span><br><span class="line">            node-&gt;left = remove(node-&gt;left, key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; node-&gt;key) &#123;</span><br><span class="line">            node-&gt;right = remove(node-&gt;right, key);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;   <span class="comment">//key=node.key的情况</span></span><br><span class="line">            <span class="keyword">if</span> (node-&gt;left == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                Node *rightNode = node-&gt;right;</span><br><span class="line">                <span class="keyword">delete</span> node;</span><br><span class="line">                count--;</span><br><span class="line">                <span class="keyword">return</span> rightNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;right == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                Node *leftNode = node-&gt;left;</span><br><span class="line">                <span class="keyword">delete</span> node;</span><br><span class="line">                count--;</span><br><span class="line">                <span class="keyword">return</span> leftNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//node.left!=null&amp;&amp;node.right!=null;</span></span><br><span class="line">            Node *successor = <span class="keyword">new</span> Node(minimum(node-&gt;right));</span><br><span class="line">            count++;</span><br><span class="line">            successor-&gt;right = removeMin(node-&gt;right);</span><br><span class="line">            successor-&gt;left = node-&gt;left;</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">            count--;</span><br><span class="line">            <span class="keyword">return</span> successor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-9二分查找树的局限性"><a href="#2-9二分查找树的局限性" class="headerlink" title="2.9二分查找树的局限性"></a>2.9二分查找树的局限性</h3></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>堆排序(heapSort)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/13/%E5%A0%86%E6%8E%92%E5%BA%8F(heapSort)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/13/堆排序(heapSort)/</id>
    <published>2018-10-13T15:35:37.000Z</published>
    <updated>2018-10-15T05:29:02.232Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><the rest="" of="" contents="" |="" 余下全文=""><h2 id="堆排序-heapSort"><a href="#堆排序-heapSort" class="headerlink" title="堆排序(heapSort)"></a>堆排序(heapSort)</h2><h3 id="1-堆排序的实现"><a href="#1-堆排序的实现" class="headerlink" title="1.堆排序的实现:"></a>1.堆排序的实现:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> __shiftDown(T arr[],<span class="keyword">int</span> n,<span class="keyword">int</span> k)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">2</span>*k+<span class="number">1</span>&lt;n)&#123;</span><br><span class="line">        <span class="keyword">int</span> j=<span class="number">2</span>*k+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(j+<span class="number">1</span>&lt;n&amp;&amp;arr[j+<span class="number">1</span>]&gt;arr[j])</span><br><span class="line">            j+=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr[k]&gt;arr[j])</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            swap(arr[j],arr[k]);</span><br><span class="line">            k=j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=(n<span class="number">-1</span>)/<span class="number">2</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    __shiftDown(arr,n,i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;<span class="number">0</span>;i--)&#123;</span><br><span class="line">        swap(arr[<span class="number">0</span>],arr[i]);</span><br><span class="line">        __shiftDown(arr,i,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-排序算法总结"><a href="#2-排序算法总结" class="headerlink" title="2.排序算法总结:"></a>2.排序算法总结:</h3><blockquote><p>排序苏算法的稳定性:对于相等的元素,在排序后,原来靠前的元素依然靠前.相等元素的相对位置没有发生改变.</p><p>在某次场景会考虑到排序算法的稳定性.比如:学生的姓名是按字典序排列的,根据分数排序后,相同分数的学生还应该按照字典序排列.(插入排序和归并排序是稳定的排序算法)</p><p><img src="/img/1539159816193.png" alt="1539159816193"></p></blockquote><p><img src="/img/1539159633630.png" alt="1539159633630"></p></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>堆(Heap)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/13/%E5%A0%86%E7%9A%84%E5%AD%A6%E4%B9%A0(Heap)/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/13/堆的学习(Heap)/</id>
    <published>2018-10-13T14:35:37.000Z</published>
    <updated>2018-10-15T04:52:13.485Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h2 id="堆的学习-Heap"><a href="#堆的学习-Heap" class="headerlink" title="堆的学习(Heap)"></a>堆的学习(Heap)</h2><blockquote><p>什么是优先队列:</p><blockquote><p>普通队列:先进先出;后进后出</p><p>优先队列:出队列和入队列和优先级有关(动态)</p></blockquote><p><img src="/img/1539084361286.png" alt="1539084361286"></p></blockquote><h4 id="1二叉堆"><a href="#1二叉堆" class="headerlink" title="1二叉堆"></a>1二叉堆</h4><p><img src="/img/1539085506624.png" alt="1539085506624"></p><h3 id="1-1用数组储存二叉堆"><a href="#1-1用数组储存二叉堆" class="headerlink" title="1.1用数组储存二叉堆"></a>1.1用数组储存二叉堆</h3><p><img src="/img/1539085717026.png" alt="1539085717026"><img src="/img/1539085824560.png" alt="1539085824560">### 1.2定义一个基本的堆</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity)&#123;</span><br><span class="line">        data =<span class="keyword">new</span> Item[capacity+<span class="number">1</span>];</span><br><span class="line">        count=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~Maxheap()&#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;maxheap.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3Shit-Up的实现-向堆中插入元素"><a href="#1-3Shit-Up的实现-向堆中插入元素" class="headerlink" title="1.3Shit Up的实现(向堆中插入元素)"></a>1.3Shit Up的实现(向堆中插入元素)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/9.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[k / <span class="number">2</span>] &lt; data[k]) &#123;</span><br><span class="line">            swap(data[k / <span class="number">2</span>, data[k]]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Maxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        data[count + <span class="number">1</span>] = item;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        maxheap.insert(rand() % <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxheap.data[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4ShiftDown和queryMax-的实现-取出堆中最大的元素"><a href="#1-4ShiftDown和queryMax-的实现-取出堆中最大的元素" class="headerlink" title="1.4ShiftDown和queryMax()的实现(取出堆中最大的元素)"></a>1.4ShiftDown和queryMax()的实现(取出堆中最大的元素)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by JIA on 2018/10/9.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[k / <span class="number">2</span>] &lt; data[k]) &#123;</span><br><span class="line">            swap(data[k / <span class="number">2</span>, data[k]]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftDown</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//        while(data[k]&gt;data[2*k]||data[k]&gt;data[2*k+1])</span></span><br><span class="line">          <span class="keyword">while</span>(<span class="number">2</span>*k&lt;=count)&#123;</span><br><span class="line">              <span class="keyword">int</span> j=<span class="number">2</span>*k;</span><br><span class="line">              <span class="keyword">if</span>(j+<span class="number">1</span>&lt;count&amp;&amp;data[j]&lt;data[j+<span class="number">1</span>])</span><br><span class="line">                  j+=<span class="number">1</span>;</span><br><span class="line">              <span class="keyword">if</span>(data[k]&gt;data[j])</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              swap(data[k],data[j]);</span><br><span class="line">              k=j;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Maxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Maxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        data[count + <span class="number">1</span>] = item;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">queryMax</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Item ret=data[<span class="number">1</span>];</span><br><span class="line">        swap(ret ,data[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Maxheap&lt;<span class="keyword">int</span>&gt; maxheap = Maxheap&lt;<span class="keyword">int</span>&gt;(<span class="number">100</span>);</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        maxheap.insert(rand() % <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxheap.data[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-堆排序"><a href="#3-堆排序" class="headerlink" title="3.堆排序"></a>3.堆排序</h2><blockquote><p>借助大顶堆,每次将对顶元素取出;</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    Maxheap&lt;T&gt; maxheap=<span class="keyword">new</span> Maxheap&lt;T&gt;(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i =n<span class="number">-1</span> ; i&gt;=<span class="number">0</span>  ; i--) &#123;</span><br><span class="line">        arr[i]=maxheap.queryMax();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5堆排序的优化"><a href="#1-5堆排序的优化" class="headerlink" title="1.5堆排序的优化"></a>1.5堆排序的优化</h3><blockquote><p>直接将待排序的数组初始化成一个大顶堆堆</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Maxheap(Item arr[],<span class="keyword">int</span> n)&#123;</span><br><span class="line">        data=<span class="keyword">new</span> Item[n+<span class="number">1</span>];</span><br><span class="line">        capacity=n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;n ; i++) &#123;</span><br><span class="line">            data[i+<span class="number">1</span>]=arr[i];</span><br><span class="line">            count=n;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=count/<span class="number">2</span>;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">                shiftDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="1-6Heapify的算法复杂度"><a href="#1-6Heapify的算法复杂度" class="headerlink" title="1.6Heapify的算法复杂度"></a>1.6Heapify的算法复杂度</h3><p><img src="/img/1539091417707.png" alt="1539091417707">## 2索引堆(Index Heap)</p><blockquote><p>Heapify时只讲数组的索引堆化  </p><p>为什么使用索引堆:</p><p>  Heapify的过程会进行频繁的交换,当元素足够复杂时,交换元素将会异常的耗费资源</p></blockquote><h3 id="2-1-最大索引堆得代码实现"><a href="#2-1-最大索引堆得代码实现" class="headerlink" title="2.1 最大索引堆得代码实现"></a>2.1 最大索引堆得代码实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexMaxheap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span>* indexes;</span><br><span class="line">    Item *data;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">int</span> cacacity;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftUp</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; data[indexes[k / <span class="number">2</span>]] &lt; data[indexes[k]]) &#123;</span><br><span class="line">            swap(indexes[k / <span class="number">2</span>], indexes[k]);</span><br><span class="line"></span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shiftDown</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//        while(data[k]&gt;data[2*k]||data[k]&gt;data[2*k+1])</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="number">2</span>*k&lt;=count)&#123;</span><br><span class="line">            <span class="keyword">int</span> j=<span class="number">2</span>*k;</span><br><span class="line">            <span class="keyword">if</span>(j+<span class="number">1</span>&lt;count&amp;&amp;data[indexes[j]]&lt;data[indexes[j+<span class="number">1</span>]])</span><br><span class="line">                j+=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(data[indexes[k]&gt;data[indexes[j]])</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            swap(indexes[k],indexes[j]);</span><br><span class="line">            k=j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    IndexMaxheap(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> Item[capacity + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">this</span>-&gt;indexes=<span class="keyword">new</span> <span class="keyword">int</span>[capacity];</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;cacacity=capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~IndexMaxheap() &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">        <span class="keyword">delete</span>[] indexes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> i,Item item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        data[i+<span class="number">1</span>]=item;</span><br><span class="line">        indexes[count+<span class="number">1</span>]=i;</span><br><span class="line">        count++;</span><br><span class="line">        shiftUp(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Item <span class="title">queryMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item ret=data[indexes[<span class="number">1</span>]];</span><br><span class="line">        swap(indexes[<span class="number">1</span>] ,indexes[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">queryMaxIdex</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret =indexes[<span class="number">1</span>]<span class="number">-1</span>;</span><br><span class="line">        swap(indexes[<span class="number">1</span>] ,indexes[count]);</span><br><span class="line">        count--;</span><br><span class="line">        shiftDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Item <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> data[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> i,Item item)</span></span>&#123;</span><br><span class="line">        i+=<span class="number">1</span>;</span><br><span class="line">        data[i]=item;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=count;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(indexes[j]==i)&#123;</span><br><span class="line">                shiftDown(indexes[j]);</span><br><span class="line">                shiftUp(indexes[j]);</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-2-反向查找"><a href="#2-2-反向查找" class="headerlink" title="2.2 反向查找"></a>2.2 反向查找</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>高级排序算法(n*logN)</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/11/%E9%AB%98%E7%BA%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/11/高级排序算法/</id>
    <published>2018-10-11T14:35:37.000Z</published>
    <updated>2018-10-11T04:34:51.942Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="高级排序算法-n-logN"><a href="#高级排序算法-n-logN" class="headerlink" title="高级排序算法(n*logN)"></a>高级排序算法(n*logN)</h1><h2 id="1-归并排序-Merge-Sort"><a href="#1-归并排序-Merge-Sort" class="headerlink" title="1.归并排序(Merge Sort)"></a>1.归并排序(Merge Sort)</h2><blockquote><p>将待排序的数组无数次分成两部分,最后将剩下的排序(减少了时间复杂度,增加了空间复杂度),归并的过程需要开辟新的数组 </p></blockquote><p><img src="/img/1539061916200.png" alt="1539061916200"></p><p><img src="/img/1539062061025.png" alt="1539062061025"></p><h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><ul><li>注释出代码为接近有序的代码进行优化:如果左面比右面小就不用归并操作</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将arr[l,mid]和[mid+1,r]进行归并</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __marge(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    T aux[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)</span><br><span class="line">        aux[i - l] = arr[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = l;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = l; k &lt;= r; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; r) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[i - l] &lt; aux[j - l]) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对arr[l....r]的范围进行排序</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __mergeSort(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    __mergeSort(arr, l, mid);</span><br><span class="line">    __mergeSort(arr, mid+<span class="number">1</span>, r);</span><br><span class="line">    <span class="comment">//if (arr[mid] &gt; arr[mid + 1])  //对接近有序的数组进行优化</span></span><br><span class="line">    __marge(arr, l, mid, r);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    __mergeSort(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自底向上实现归并排序-不用进行递归操作"><a href="#自底向上实现归并排序-不用进行递归操作" class="headerlink" title="自底向上实现归并排序(不用进行递归操作)"></a>自底向上实现归并排序(不用进行递归操作)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将arr[l,mid]和[mid+1,r]进行归并</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> __marge(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r) &#123;</span><br><span class="line">    T aux[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)</span><br><span class="line">        aux[i - l] = arr[i];</span><br><span class="line">    <span class="keyword">int</span> i = l;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = l; k &lt;= r; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; r) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[i - l] &lt; aux[j - l]) &#123;</span><br><span class="line">            arr[k] = aux[i - l];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k] = aux[j - l];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergerSortBU</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt;= n; sz += sz) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + sz &lt; n; i+= sz + sz) &#123;</span><br><span class="line">            __marge(arr, i, i + sz - <span class="number">1</span>, min(i + sz + sz - <span class="number">1</span>, n - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-快速排序-Quick-Sort"><a href="#2-快速排序-Quick-Sort" class="headerlink" title="2.快速排序(Quick Sort)"></a>2.快速排序(Quick Sort)</h2><blockquote><p>最好理解,实现最容易的排序算法,但是如果数组接近有序时,性能将会异常的差</p><p>使用: swap(arr[l],arr[rand()%(h-l+1)+l]);  随机取一个数可以对代码进行优化</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> __privo(<span class="keyword">int</span> arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> h) &#123;</span><br><span class="line">    <span class="keyword">int</span> p = arr[l];</span><br><span class="line">    <span class="keyword">while</span> (l &lt; h) &#123;</span><br><span class="line">        swap(arr[l],arr[rand()%(h-l+<span class="number">1</span>)+l]);   <span class="comment">//对代码的优化</span></span><br><span class="line">        <span class="keyword">while</span> (l &lt; h &amp;&amp; arr[h] &gt;= p) --h;</span><br><span class="line">        swap(arr[l], arr[h]);</span><br><span class="line">        <span class="keyword">while</span> (l &lt; h &amp;&amp; p &gt; arr[l]) ++l;</span><br><span class="line">        swap(arr[l], arr[h]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; h)&#123;</span><br><span class="line">        <span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">int</span> p = __privo(arr, l, h);</span><br><span class="line">    quickSort(arr, l, p - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, p + <span class="number">1</span>, h);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"abc"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> a[] = &#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">6</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    quickSort(a, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"))))"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>基础排序算法</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/10/%E5%9F%BA%E7%A1%80%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/10/基础的排序算法/</id>
    <published>2018-10-10T14:35:37.000Z</published>
    <updated>2018-10-11T04:27:28.668Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>仰望星空,脚踏实地,暗无天日,登峰造极</strong><excerpt in="" index="" |="" 首页摘要=""><br>学习算法思想,修炼编程内功!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="基础排序算法"><a href="#基础排序算法" class="headerlink" title="基础排序算法"></a>基础排序算法</h1><h2 id="1选择排序-Selection-Sort"><a href="#1选择排序-Selection-Sort" class="headerlink" title="1选择排序(Selection Sort)"></a>1选择排序(Selection Sort)</h2><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><blockquote><p>基本思想,从0开始每一次找第n小的元素与当前第n位置的元素交换.时间复杂度O(n2) ,无论怎样的数组必须都将两层循环跑完.</p></blockquote><p><img src="/img/1539000224817.png" alt="1539000224817"></p><h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">( <span class="keyword">int</span> arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">        <span class="comment">//寻找[i,n)区间最小值</span></span><br><span class="line">        <span class="keyword">int</span> minIndex=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[minIndex]&gt;arr[j])&#123;</span><br><span class="line">                minIndex=j;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr[minIndex],arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    selectionSort(a,<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用c-模板进行扩展"><a href="#使用c-模板进行扩展" class="headerlink" title="使用c++模板进行扩展"></a>使用c++模板进行扩展</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//c++模板,或者泛型</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">( T arr[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">        <span class="comment">//寻找[i,n)区间最小值</span></span><br><span class="line">        <span class="keyword">int</span> minIndex=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&lt;arr[minIndex])&#123;</span><br><span class="line">                minIndex=j;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr[minIndex],arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    selectionSort(a,<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">float</span> b[]=&#123;<span class="number">1.2</span>,<span class="number">2.4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2.2</span>&#125;;</span><br><span class="line">    selectionSort(b,<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;b[i]&lt;&lt;<span class="string">"  "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">     <span class="built_in">string</span> c[]=&#123;<span class="string">"d"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"a"</span>,<span class="string">"f"</span>&#125;;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;c[i]&lt;&lt;<span class="string">"  "</span>;</span><br><span class="line">     &#125;</span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">      Student d[<span class="number">3</span>]=&#123;&#123;<span class="string">"A"</span>,<span class="number">90</span>&#125;,&#123;<span class="string">"B"</span>,<span class="number">80</span>&#125;,&#123;<span class="string">"C"</span>,<span class="number">85</span>&#125;&#125;;</span><br><span class="line">      selectionSort(d,<span class="number">3</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;d[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> STUDENT_H_INCLUDED</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STUDENT_H_INCLUDED</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Student &amp;otherStudent)&#123;</span><br><span class="line">        <span class="keyword">return</span> score &lt; otherStudent.score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os ,<span class="keyword">const</span> Student &amp;student)&#123;</span><br><span class="line">        os&lt;&lt;<span class="string">"Student: "</span>&lt;&lt;student.name&lt;&lt;<span class="string">" "</span>&lt;&lt;student.score&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> os;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// STUDENT_H_INCLUDED</span></span></span><br></pre></td></tr></table></figure><h2 id="2-插入排序-Insertion-Sort"><a href="#2-插入排序-Insertion-Sort" class="headerlink" title="2.插入排序(Insertion Sort)"></a>2.插入排序(Insertion Sort)</h2><blockquote><p>再循环中每次将元素与前面位置元素比较,如果小就交换位置.时间复杂度O(n2).插入排序对接近有序的数组排序性能将会更好</p></blockquote><p><img src="/img/1539003860047.png" alt="1539003860047"></p><h3 id="实现代码-1"><a href="#实现代码-1" class="headerlink" title="实现代码:"></a>实现代码:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(T arr [],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&gt;<span class="number">0</span>&amp;&amp;arr[j]&lt;arr[j<span class="number">-1</span>];j--)&#123;</span><br><span class="line">            swap(arr[j],arr[j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="优化代码"><a href="#优化代码" class="headerlink" title="优化代码:"></a>优化代码:</h3><blockquote><p>每次循环标记元素的值,将每一次交换改成赋值操作,</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSortOpt</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        T e = arr[i];</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span> ( j = i; j &gt; <span class="number">0</span> &amp;&amp; arr[j - <span class="number">1</span>] &gt; e; j--) &#123;</span><br><span class="line">            arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j] = e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;仰望星空,脚踏实地,暗无天日,登峰造极&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;学习算法思想,修炼编程内功!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法学习" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="算法" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud微服务学习总结</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/04/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/04/SpringCloud微服务学习总结/</id>
    <published>2018-10-03T16:00:00.000Z</published>
    <updated>2018-10-05T13:11:51.250Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 骗的了别人骗不了自己,做什么都要用心!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>对SpringCloud学习做一个总结,供以后应用查看<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><p>微服务的特点:</p><blockquote><ul><li>一系列微小的服务共同组成</li><li>单独部署,跑在自己的进程里</li><li>每个服务为独立的业务开发</li><li>分布式的管理</li></ul></blockquote><p>传统vs微服务</p><p><img src="/img/1538629111529.png" alt="1538629111529"></p><blockquote><p>业务形态上不适合微服务的场景</p><ul><li>系统中包含很多很多强事务的场景</li><li>业务相对稳定,迭代周期长</li><li>访问压力不大,可用性要求不高</li><li>…</li></ul></blockquote><p><img src="/img/1538628687788.png" alt="1538628687788"></p><p><img src="/img/1538628921984.png" alt="1538628921984"></p><h2 id="1-Eureka服务注册中心"><a href="#1-Eureka服务注册中心" class="headerlink" title="1.Eureka服务注册中心"></a>1.Eureka服务注册中心</h2><h3 id="1-1构建项目"><a href="#1-1构建项目" class="headerlink" title="1.1构建项目"></a>1.1构建项目</h3><blockquote><p>选择eureka Server</p></blockquote><p><img src="/img/1538625976475.png" alt="1538625976475"> </p><h3 id="1-2-启动类上添加"><a href="#1-2-启动类上添加" class="headerlink" title="1.2 启动类上添加"></a>1.2 启动类上添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line"></span><br><span class="line">package com.jia.eureka;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableEurekaServer</span><br><span class="line">public class EurekaApplication &#123;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h3><h3 id="1-3-application-yml配置"><a href="#1-3-application-yml配置" class="headerlink" title="1.3 application.yml配置"></a>1.3 application.yml配置</h3><blockquote><ul><li>register-with-eureka: false       是否注册到服务注册中心,因为自己就是服务注册注册中心,所以false</li><li>enable-self-preservation: false      关闭心跳检测保留链接(开发环境为了查看服务状态)</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">    register-with-eureka: <span class="keyword">false</span></span><br><span class="line">  server:</span><br><span class="line">    enable-self-preservation: <span class="keyword">false</span></span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: eureka</span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">8761</span></span><br></pre></td></tr></table></figure><h3 id="1-4启动效果"><a href="#1-4启动效果" class="headerlink" title="1.4启动效果"></a>1.4启动效果</h3><p><img src="/img/1538626591475.png" alt="1538626591475">### 1.5小结</p><blockquote><p>eureka服务注册中心在生产环境中可以做到高可用,启动多个eureka服务注册中心,彼此相互注册,每个客户端服务再分别注册到这些eureka服务注册中心.即使一个eureka垮掉,整个微服务也可以正常运行.</p><p><img src="/img/1538628284808.png" alt="1538628284808"></p></blockquote><h2 id="2-Eureka客户端的使用"><a href="#2-Eureka客户端的使用" class="headerlink" title="2.Eureka客户端的使用"></a>2.Eureka客户端的使用</h2><h3 id="2-1构建项目"><a href="#2-1构建项目" class="headerlink" title="2.1构建项目"></a>2.1构建项目</h3><blockquote><p>选择Eureka Discovery</p></blockquote><p><img src="/img/1538627464924.png" alt="1538627464924">2.2 启动类上添加@EnableDiscoveryClient注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-application-yml的配置"><a href="#2-3-application-yml的配置" class="headerlink" title="2.3 application.yml的配置"></a>2.3 application.yml的配置</h3><blockquote><ul><li><p>instance:</p><p>​        hostname: clientName     客户端服务跳转的名字</p></li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">#  instance:</span><br><span class="line">#    hostname: clientName</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: client</span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">10001</span></span><br></pre></td></tr></table></figure><h3 id="2-4-启动效果"><a href="#2-4-启动效果" class="headerlink" title="2.4 启动效果"></a>2.4 启动效果</h3><p><img src="/img/1538628237602.png" alt="1538628237602"></p><h3 id="2-5小结"><a href="#2-5小结" class="headerlink" title="2.5小结"></a>2.5小结</h3><blockquote><ul><li>@EnableEurekaServer @EnabeEurekaClient</li><li>心跳检测,健康检查,负载均衡等功能</li><li>Eureka的高可用,生产上建议使用两台</li><li>分布式系统中,服务注册中心是重要的基础部分</li></ul></blockquote><h2 id="3-统一配置中心config"><a href="#3-统一配置中心config" class="headerlink" title="3.统一配置中心config"></a>3.统一配置中心config</h2><h3 id="3-1-为什么需要统一配置中心"><a href="#3-1-为什么需要统一配置中心" class="headerlink" title="3.1.为什么需要统一配置中心"></a>3.1.为什么需要统一配置中心</h3><ul><li>不方便维护</li><li>配置内容安全与权限</li><li>更新配置项目启动</li></ul><h3 id="3-2-统一配置中心总体架构"><a href="#3-2-统一配置中心总体架构" class="headerlink" title="3.2.统一配置中心总体架构"></a>3.2.统一配置中心总体架构</h3><p><img src="/img/1538630591518.png" alt="1538630591518"></p><h3 id="3-3-统一配置中心的Server端"><a href="#3-3-统一配置中心的Server端" class="headerlink" title="3.3.统一配置中心的Server端"></a>3.3.统一配置中心的Server端</h3><blockquote><ul><li>项目构建 </li></ul><p><img src="/img/1538630755571.png" alt="1538630687494"></p><ul><li><p>启动类上添加注解@EnableConfigServer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.config;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.config.server.EnableConfigServer;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableConfigServer</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ConfigApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>gitee上创建一个仓库用来存放配置文件</p></li><li><blockquote><p>gitee地址:<a href="https://gitee.com/shltj/config-repo" target="_blank" rel="noopener">https://gitee.com/shltj/config-repo</a></p></blockquote><p><img src="/img/1538631315904.png" alt="1538631315904"></p><ul><li><p>application.yml的配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;       spring:</span><br><span class="line">&gt;         application:</span><br><span class="line">&gt;           name: config</span><br><span class="line">&gt;         cloud:</span><br><span class="line">&gt;           config:</span><br><span class="line">&gt;             server:</span><br><span class="line">&gt;               git:</span><br><span class="line">&gt;                 uri: https:<span class="comment">//gitee.com/shltj/config-repo</span></span><br><span class="line">&gt;                 username: shltj</span><br><span class="line">&gt;                 password: xxxxxxxx</span><br><span class="line">&gt;                 basedir: e:/config</span><br><span class="line">&gt;       eureka:</span><br><span class="line">&gt;         client:</span><br><span class="line">&gt;           service-url:</span><br><span class="line">&gt;             defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul></blockquote><blockquote><pre><code>* 启动效果  ![1538633264680](/img/1538633264680.png)</code></pre></blockquote><h3 id="3-4统一配置中心Client端"><a href="#3-4统一配置中心Client端" class="headerlink" title="3.4统一配置中心Client端"></a>3.4统一配置中心Client端</h3><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>gitee上新建client-dev.yml</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;   eureka:</span><br><span class="line">&gt;     client:</span><br><span class="line">&gt;       service-url:</span><br><span class="line">&gt;         defaultZone: http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line">&gt;   #  instance:</span><br><span class="line">&gt;   #    hostname: clientName</span><br><span class="line">&gt;   spring:</span><br><span class="line">&gt;     application:</span><br><span class="line">&gt;       name: client</span><br><span class="line">&gt;   server:</span><br><span class="line">&gt;     port: <span class="number">10001</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>将applicatiion.yml 修改为bootstrap.yml springboot默认先加载applicatiion.yml </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;     spring:</span><br><span class="line">&gt;       cloud:</span><br><span class="line">&gt;         config:</span><br><span class="line">&gt;           discovery:</span><br><span class="line">&gt;             enabled: <span class="keyword">true</span></span><br><span class="line">&gt;             service-id: config</span><br><span class="line">&gt;           profile: dev</span><br><span class="line">&gt;       application:</span><br><span class="line">&gt;         name: client</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote></blockquote><h2 id="4-SpringCloud-Bus-自动刷新配置"><a href="#4-SpringCloud-Bus-自动刷新配置" class="headerlink" title="4.SpringCloud Bus 自动刷新配置"></a>4.SpringCloud Bus 自动刷新配置</h2><h3 id="4-1自动刷新配置原理"><a href="#4-1自动刷新配置原理" class="headerlink" title="4.1自动刷新配置原理"></a>4.1自动刷新配置原理</h3><p><img src="/img/1538635206179.png" alt="1538635206179">### 4.2在config服务端添加amqp的依赖</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="4-3-在application-yml-中添加rabbitmq的配置并且暴露访问端口-后期可由git服务器的webhook-访问"><a href="#4-3-在application-yml-中添加rabbitmq的配置并且暴露访问端口-后期可由git服务器的webhook-访问" class="headerlink" title="4.3  在application.yml 中添加rabbitmq的配置并且暴露访问端口(后期可由git服务器的webhook 访问)"></a>4.3  在application.yml 中添加rabbitmq的配置并且暴露访问端口(后期可由git服务器的webhook 访问)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  rabbitmq:</span><br><span class="line">    port: <span class="number">5672</span></span><br><span class="line">    host: <span class="number">101.200</span>.44.222</span><br><span class="line">    username: tong</span><br><span class="line">    password: tong</span><br><span class="line">management:</span><br><span class="line">  endpoints:</span><br><span class="line">    web:</span><br><span class="line">      exposure:</span><br><span class="line">        include: <span class="string">"*"</span></span><br></pre></td></tr></table></figure><h3 id="4-4在client服务端添加rabbitmap的依赖"><a href="#4-4在client服务端添加rabbitmap的依赖" class="headerlink" title="4.4在client服务端添加rabbitmap的依赖"></a>4.4在client服务端添加rabbitmap的依赖</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="4-5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT-M3存在bug"><a href="#4-5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT-M3存在bug" class="headerlink" title="4.5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT,M3存在bug."></a>4.5注意将springboot和springcloud的版本改成BUILD-SNAPSHOT,M3存在bug.</h3><blockquote><p><strong>别忘记需要在更新配置的地方添加@RefreshScope注解</strong></p></blockquote><blockquote><p>访问<a href="http://localhost:8080/actuator/bus-refresh(用post请求方式)可以实现动态更新配置,github上的webhook已经支持访问改接口" target="_blank" rel="noopener">http://localhost:8080/actuator/bus-refresh(用post请求方式)可以实现动态更新配置,github上的webhook已经支持访问改接口</a></p></blockquote><h2 id="5-mq的使用"><a href="#5-mq的使用" class="headerlink" title="5.mq的使用"></a>5.mq的使用</h2><h3 id="5-1-mq的应用场景"><a href="#5-1-mq的应用场景" class="headerlink" title="5.1 mq的应用场景"></a>5.1 mq的应用场景</h3><blockquote><ul><li>异步处理</li><li>流量削峰</li><li>日志处理</li><li>应用解耦</li></ul></blockquote><h2 id="6-服务网关Zuul"><a href="#6-服务网关Zuul" class="headerlink" title="6.服务网关Zuul"></a>6.服务网关Zuul</h2><h3 id="6-1服务网关所应具备的要素"><a href="#6-1服务网关所应具备的要素" class="headerlink" title="6.1服务网关所应具备的要素"></a>6.1服务网关所应具备的要素</h3><blockquote><ul><li>稳定性,高可用(7*25小时服务)</li><li>性能,并发性</li><li>安全性</li><li>扩展性</li></ul></blockquote><h3 id="6-2常见的服务网关"><a href="#6-2常见的服务网关" class="headerlink" title="6.2常见的服务网关"></a>6.2常见的服务网关</h3><p><img src="/img/1538648760855.png" alt="1538648760855">### 6.3Zuul的特点</p><blockquote><ul><li><p>路由+过滤器=zuul</p></li><li><p>核心是一些列的过滤器</p><p><img src="/img/1538648953468.png" alt="1538648953468"><img src="/img/1538649013623.png" alt="1538649013623"></p></li></ul></blockquote><h3 id="6-4Zuul的使用"><a href="#6-4Zuul的使用" class="headerlink" title="6.4Zuul的使用"></a>6.4Zuul的使用</h3><blockquote><ul><li><p>项目的构建</p><p><img src="/img/1538649205460.png" alt="1538649205460">*  再启动类上添加@EnableZuulProxy注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.apigetway;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.netflix.zuul.EnableZuulProxy;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span> </span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableZuulProxy</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiGetwayApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ApiGetwayApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li>经过服务网关和直接访问服务写法对比(网关+服务+方法)</li></ul><pre><code>&gt; ![1538650336849](/img/1538650336849.png)&gt;&gt; ![1538650399065](/img/1538650399065.png)</code></pre></blockquote><blockquote><ul><li><p>自定义路由bootstrap.yml添加配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;  management:</span><br><span class="line">&gt;    security:</span><br><span class="line">&gt;      enabled: <span class="keyword">false</span></span><br><span class="line">&gt;  zuul:</span><br><span class="line">&gt;    routes:</span><br><span class="line">&gt;      aaaaa:</span><br><span class="line">&gt;        path: /myclient<span class="comment">/**</span></span><br><span class="line"><span class="comment">&gt;        serviceId: client</span></span><br><span class="line"><span class="comment">&gt;</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><hr><p> 简介写法:</p><p> <img src="/img/1538650911129.png" alt="1538650911129"></p></blockquote><blockquote><ul><li><p>排除某些路由的写法:</p><p><img src="/img/1538651042319.png" alt="1538651042319">* Zuul默认服务间不能传递cookie,传递cookId配置方法</p><p><img src="/img/1538651174961.png" alt="1538651174961"></p></li></ul></blockquote><h3 id="6-5Zuul典型的使用场景"><a href="#6-5Zuul典型的使用场景" class="headerlink" title="6.5Zuul典型的使用场景"></a>6.5Zuul典型的使用场景</h3><ul><li>前置过滤器: 限流,鉴权,参数校验调整</li><li>后置过滤器:统计,日志</li></ul><h3 id="6-6Zuul的权限校验"><a href="#6-6Zuul的权限校验" class="headerlink" title="6.6Zuul的权限校验"></a>6.6Zuul的权限校验</h3><blockquote><p>规定请求的参数必须带Token.如果Token为空,校验不通过,实现代码如下:</p><blockquote><p>注意: shouldFilter方法返回值设置为true</p><p>​         filterType()方法中配置参数类型</p><p>​          filterOrder()方法中配置拦截器的优先级</p></blockquote></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.apigetway.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.zuul.ZuulFilter;</span><br><span class="line"><span class="keyword">import</span> com.netflix.zuul.context.RequestContext;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PRE_DECORATION_FILTER_ORDER;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PROXY_KEY;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tocken</span> <span class="keyword">extends</span> <span class="title">ZuulFilter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">filterType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PROXY_KEY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">filterOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PRE_DECORATION_FILTER_ORDER-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RequestContext requestContext = RequestContext.getCurrentContext();</span><br><span class="line">        HttpServletRequest request=requestContext.getRequest();</span><br><span class="line">        String token=request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty(token))&#123;</span><br><span class="line">            requestContext.setSendZuulResponse(<span class="keyword">false</span>);</span><br><span class="line">            requestContext.setResponseStatusCode(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-7Zuul的限流"><a href="#6-7Zuul的限流" class="headerlink" title="6.7Zuul的限流"></a>6.7Zuul的限流</h3><blockquote><p>Zuul使用的是Google开发的令牌桶限流,具体如下图:</p><p><img src="/img/1538652781643.png" alt="1538652781643"></p></blockquote><blockquote><p>代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">package</span> com.jia.apigetway.filter;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="keyword">import</span> com.google.common.util.concurrent.RateLimiter;</span><br><span class="line">&gt; <span class="keyword">import</span> com.netflix.zuul.ZuulFilter;</span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.PRE_TYPE;</span><br><span class="line">&gt; <span class="keyword">import</span> <span class="keyword">static</span> org.springframework.cloud.netflix.zuul.filters.support.FilterConstants.SERVLET_DETECTION_FILTER_ORDER;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="meta">@Component</span></span><br><span class="line">&gt; <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RateLimiterFilter</span> <span class="keyword">extends</span> <span class="title">ZuulFilter</span> </span>&#123;</span><br><span class="line">&gt;     <span class="comment">//每秒钟放100令牌</span></span><br><span class="line">&gt;     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RateLimiter RATE_LIMITER=RateLimiter.create(<span class="number">100</span>);</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> String <span class="title">filterType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> PRE_TYPE;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">filterOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> SERVLET_DETECTION_FILTER_ORDER-<span class="number">1</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;     <span class="meta">@Override</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> Object <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;         <span class="keyword">if</span>(!RATE_LIMITER.tryAcquire())&#123;</span><br><span class="line">&gt;            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();   <span class="comment">//通过令牌桶限流,如果拿不到令牌就抛出一个异常,感觉好像有bug</span></span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;         <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="6-8Zuul的权限校验"><a href="#6-8Zuul的权限校验" class="headerlink" title="6.8Zuul的权限校验"></a>6.8Zuul的权限校验</h3><blockquote><p>通过Zuul的拦截器实现如下鉴权功能</p><p><img src="/img/1538654024968.png" alt="1538654024968"></p><p>在拦截器中具体代码实现如下:</p><p><img src="/img/1538654539209.png" alt="1538654539209"></p></blockquote><h3 id="6-8Zuul的跨域解决方法"><a href="#6-8Zuul的跨域解决方法" class="headerlink" title="6.8Zuul的跨域解决方法"></a>6.8Zuul的跨域解决方法</h3><blockquote><p>基本解决跨域</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.apigetway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跨域配置</span></span><br><span class="line"><span class="comment"> * C-Cross O-Origin  R-Resource S-Sharing</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span>  </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsFilter <span class="title">corsFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> UrlBasedCorsConfigurationSource source=<span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        <span class="keyword">final</span> CorsConfiguration config=<span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        config.setAllowCredentials(<span class="keyword">true</span>);</span><br><span class="line">        config.setAllowedOrigins(Arrays.asList(<span class="string">"*"</span>)); <span class="comment">//http://www.a.com</span></span><br><span class="line">        config.setAllowedHeaders(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        config.setAllowedMethods(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        config.setMaxAge(<span class="number">300l</span>);</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">"/**"</span>,config);</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> CorsFilter(source)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>通用跨域解决方案</p><p><img src="/img/1538655791286.png" alt="1538655791286"></p></blockquote><h2 id="7-服务容错Hystrix"><a href="#7-服务容错Hystrix" class="headerlink" title="7.服务容错Hystrix"></a>7.服务容错Hystrix</h2><blockquote><p>同步等待会造成资源耗尽</p></blockquote><h3 id="7-1Hystrix的功能"><a href="#7-1Hystrix的功能" class="headerlink" title="7,1Hystrix的功能"></a>7,1Hystrix的功能</h3><blockquote><ul><li>服务降级</li><li>依赖隔离</li><li>服务熔断</li><li>监控(Hystrix Dashboard)</li></ul></blockquote><h3 id="7-2服务降级"><a href="#7-2服务降级" class="headerlink" title="7.2服务降级"></a>7.2服务降级</h3><blockquote><p>优先核心服务,非核心服务不可用或若可用</p><p>通过HystrixCommand注解指定</p><p>fallbackMethod(回退函数)中具体实现降级逻辑</p></blockquote><h3 id="7-3Hystrix的使用"><a href="#7-3Hystrix的使用" class="headerlink" title="7,3Hystrix的使用"></a>7,3Hystrix的使用</h3><blockquote><p>在client服务去访问client2服务的getMessage方法</p><ul><li><p>在client服务端添加Hystrix依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加@EnableCircuitBreaker注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.netflix.hystrix.EnableHystrix;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;     <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;     <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;     SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>* 定义HystrixController实验服务降级  &gt;在方法上添加  @HystrixCommand(fallbackMethod = &quot;fallback&quot;)注解当方法出现异常或者超时会自动调用fallback();  &gt;  &gt;如果想所有的方法都实现服务降级,可以在Controller上添加@DefaultProperties(defaultFallback=&quot;xxxxx&quot;) xxxxx为自定义服务降级走的方法  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&gt;       <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       <span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line">&gt;       <span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       <span class="meta">@RestController</span></span><br><span class="line">&gt;       <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixController</span> </span>&#123;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;            RestTemplate restTemplate=<span class="keyword">new</span> RestTemplate();</span><br><span class="line">&gt;       </span><br><span class="line">&gt;            <span class="meta">@GetMapping</span>(<span class="string">"/get"</span>)</span><br><span class="line">&gt;            <span class="meta">@HystrixCommand</span>(fallbackMethod = <span class="string">"fallback"</span>)</span><br><span class="line">&gt;            <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">&gt;                String msg=restTemplate.getForObject(<span class="string">"http://localhost:10005/getMessage"</span>,String.class);</span><br><span class="line">&gt;                <span class="keyword">try</span> &#123;</span><br><span class="line">&gt;                    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">&gt;                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">&gt;                    e.printStackTrace();</span><br><span class="line">&gt;                &#125;</span><br><span class="line">&gt;                <span class="keyword">return</span> <span class="string">"from client2 message"</span>+msg;</span><br><span class="line">&gt;            &#125;</span><br><span class="line">&gt;            <span class="function"><span class="keyword">private</span>  String <span class="title">fallback</span><span class="params">()</span></span>&#123;</span><br><span class="line">&gt;                <span class="keyword">return</span> <span class="string">"人太多,挤爆了"</span>;</span><br><span class="line">&gt;            &#125;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;       &#125;</span><br><span class="line">&gt;       </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><h3 id="7-4Hystrix服务的熔断"><a href="#7-4Hystrix服务的熔断" class="headerlink" title="7,4Hystrix服务的熔断"></a>7,4Hystrix服务的熔断</h3><blockquote><p>断路器实现服务熔断:</p><p><img src="/img/1538702279205.png" alt="1538702279205"></p><p>   访问getMessage方法,当参数为奇数是抛异常,当异常达到一定次数是(60%)启动断路开关</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.imooc.client3.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.DefaultProperties;</span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixProperty;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@DefaultProperties</span>(defaultFallback = <span class="string">"defaultFallback"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"><span class="comment">//    服务的超时配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    @HystrixCommand(fallbackMethod = "fallback",commandProperties =&#123;</span></span><br><span class="line"><span class="comment">//            @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds",value="3500")</span></span><br><span class="line"><span class="comment">//    &#125; )</span></span><br><span class="line">    <span class="meta">@HystrixCommand</span>(commandProperties = &#123;</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.enabled"</span>,value = <span class="string">"true"</span>),   <span class="comment">//设置熔断</span></span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.requestVolumeThreshold"</span>,value = <span class="string">"10"</span>),</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.sleepWindowInMilliseconds"</span>,value = <span class="string">"10000"</span>),</span><br><span class="line">            <span class="meta">@HystrixProperty</span>(name=<span class="string">"circuitBreaker.errorThresholdPercentage"</span>,value = <span class="string">"60"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/messageT"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">(@RequestParam(<span class="string">"number"</span>)</span> Integer number ) </span>&#123;</span><br><span class="line">        String result=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(number%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">             result = <span class="keyword">this</span>.restTemplate.getForObject(<span class="string">"http://localhost:10006/tong"</span>,String.class);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> a=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">             result=<span class="string">"1111"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">fallback</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"出故障了!!!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/messageT1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage1</span><span class="params">()</span> <span class="keyword">throws</span> RuntimeException </span>&#123;</span><br><span class="line">        String result = <span class="keyword">this</span>.restTemplate.getForObject(<span class="string">"http://localhost:10006/tong"</span>, String.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">defaultFallback</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"默认方法出故障了!!!!!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-5feign和Hystrix的使用"><a href="#7-5feign和Hystrix的使用" class="headerlink" title="7.5feign和Hystrix的使用"></a>7.5feign和Hystrix的使用</h3><blockquote><p>feign的使用(内置ribbon):</p><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;       &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;       &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加注解@EnableFeignClients</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;   <span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;   <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;   <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;   <span class="meta">@EnableFeignClients</span></span><br><span class="line">&gt;   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;   SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>访问远程服务的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@FeignClient</span>(<span class="string">"client2"</span>)</span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Client2Feign</span> </span>&#123;</span><br><span class="line">&gt;         <span class="meta">@PostMapping</span>(<span class="string">"/client2/getMessage"</span>)</span><br><span class="line">&gt;         <span class="function">String <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>----feign和Hystrix结合使用:&gt; bootstrap.yml中添加配置&gt;&gt; <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &gt; feign:</span><br><span class="line">&gt;     &gt;   hystrix:</span><br><span class="line">&gt;     &gt;     enable: <span class="keyword">true</span></span><br><span class="line">&gt;     &gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><pre><code>&gt;&gt;&gt; 如果发生异常执行class中的方法<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client.controller;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@FeignClient</span>(value = <span class="string">"client2"</span>,fallback = Client2Feign.Client2Fallback.class)</span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Client2Feign</span> </span>&#123;</span><br><span class="line">&gt;         <span class="meta">@PostMapping</span>(<span class="string">"/client2/getMessage"</span>)</span><br><span class="line">&gt;         <span class="function">String <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&gt;         <span class="meta">@Component</span></span><br><span class="line">&gt;         <span class="class"><span class="keyword">class</span> <span class="title">Client2Fallback</span> <span class="keyword">implements</span> <span class="title">Client2Feign</span></span>&#123;</span><br><span class="line">&gt;             <span class="meta">@Override</span></span><br><span class="line">&gt;             <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt;                 <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt;             &#125;</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><h3 id="7-6Hystrix-dashboard可视化组件的使用"><a href="#7-6Hystrix-dashboard可视化组件的使用" class="headerlink" title="7.6Hystrix-dashboard可视化组件的使用"></a>7.6Hystrix-dashboard可视化组件的使用</h3><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;        &lt;dependency&gt;</span><br><span class="line">&gt;           &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;           &lt;artifactId&gt;spring-cloud-starter-hystrix-dashboard&lt;/artifactId&gt;</span><br><span class="line">&gt;        &lt;/dependency&gt;</span><br><span class="line">&gt;        &lt;dependency&gt;</span><br><span class="line">&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&gt;            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</span><br><span class="line">&gt;         &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>启动类上添加注解@EnableHystrixDashboard</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;     <span class="keyword">package</span> com.jia.client;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;</span><br><span class="line">&gt;     <span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="meta">@SpringBootApplication</span></span><br><span class="line">&gt;     <span class="meta">@EnableDiscoveryClient</span></span><br><span class="line">&gt;     <span class="meta">@EnableCircuitBreaker</span></span><br><span class="line">&gt;     <span class="meta">@EnableFeignClients</span></span><br><span class="line">&gt;     <span class="meta">@EnableHystrixDashboard</span></span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">&gt;     SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>* 访问/hystrix路径  ![1538707724714](/img/1538707724714.png)* client服务端添加如下配置:  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       management:</span><br><span class="line">&gt;         context-path: /</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><pre><code>* 监控视图  ![1538708343150](/img/1538708343150.png)</code></pre></blockquote><h2 id="8-服务的追踪-链路监控Sleuth"><a href="#8-服务的追踪-链路监控Sleuth" class="headerlink" title="8.服务的追踪(链路监控Sleuth)"></a>8.服务的追踪(链路监控Sleuth)</h2><blockquote><ul><li><p>添加依赖</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;dependency&gt;</span><br><span class="line">&gt;   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;   &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;</span><br><span class="line">&gt;   &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>使用<strong>OpenZIPkin</strong>查看服务的追踪</p><blockquote><ul><li><p>用docker安装软件</p><p>docker pull openzipkin/zipkin</p><p>docker run -d -p 9411:9411 zipkin</p><p>浏览器访问:<a href="http://101.200.44.222:9411/zipkin/" target="_blank" rel="noopener">http://101.200.44.222:9411/zipkin/</a></p><p><img src="/img/1538710627440.png" alt="1538710627440"></p></li></ul></blockquote></li><li><p>client服务添加相应依赖</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &lt;dependency&gt;</span><br><span class="line">&gt;        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&gt;        &lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;</span><br><span class="line">&gt;     &lt;/dependency&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><ul><li><p>bootstrap.yml中添加配置</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       zipkin:</span><br><span class="line">&gt;         base-url: http:<span class="comment">//101.200.44.222:9411</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><pre><code>  * 设置抽样观察百分比为1<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;         sleuth:</span><br><span class="line">&gt;           sampler:</span><br><span class="line">&gt;             percentage: <span class="number">1f</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></code></pre></blockquote><blockquote><ul><li><p>展示效果</p><p>   <img src="/img/1538711526837.png" alt="1538711526837"></p></li></ul></blockquote><h2 id="9-分布式追踪系统"><a href="#9-分布式追踪系统" class="headerlink" title="9.分布式追踪系统"></a>9.分布式追踪系统</h2><h3 id="9-1核心步骤-OpenTracing规范"><a href="#9-1核心步骤-OpenTracing规范" class="headerlink" title="9.1核心步骤(OpenTracing规范)"></a>9.1核心步骤(OpenTracing规范)</h3><p><img src="/img/1538711826394.png" alt="1538711826394"></p><blockquote><ul><li>数据采集</li><li>数据存储</li><li>查询展示</li></ul></blockquote><h2 id="10-使用docker部署项目"><a href="#10-使用docker部署项目" class="headerlink" title="10.使用docker部署项目"></a>10.使用docker部署项目</h2><h3 id="10-1docker部署eureka服务注册中心"><a href="#10-1docker部署eureka服务注册中心" class="headerlink" title="10.1docker部署eureka服务注册中心"></a>10.1docker部署eureka服务注册中心</h3><blockquote><ul><li>Docerfile文件内容</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">FROM</span> hub.c.<span class="number">163</span>.com/library/java:<span class="number">8</span>-alpine</span><br><span class="line">&gt; <span class="keyword">ADD</span> app.jar  app.jar</span><br><span class="line">&gt; EXPOSE 8761</span><br><span class="line">&gt; ENTRYPOINT ["java","-jar","/app.jar"]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><ul><li><p>构建命令:docker build -t springcloud2/eureka .</p></li><li><p>运行命令:docker run -d -p 8761:8761 springcloud2/eureka</p></li><li><p>网易云上传镜像:<a href="https://www.163yun.com/help/documents/15587826830438400" target="_blank" rel="noopener">https://www.163yun.com/help/documents/15587826830438400</a></p></li><li><p>访问成功:</p><p><img src="/img/1538714796176.png" alt="1538714796176"></p></li></ul></blockquote><h3 id="10-2-rancher的使用"><a href="#10-2-rancher的使用" class="headerlink" title="10.2 rancher的使用"></a>10.2 rancher的使用</h3><blockquote><p>Rancher是一个开源的企业级全栈化容器部署管理平台(为了更方便的管理docker)</p><blockquote><p>安装rancher命令:sudo docker run -d –restart=unless-stopped -p 8080:8080 rancher/server:stable</p></blockquote><p><img src="/img/1538717959699.png" alt="1538717959699"></p><ul><li>需添加一台主机</li></ul></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 骗的了别人骗不了自己,做什么都要用心!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对SpringCloud学习做一个总结,供以后应用查看&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>自定义注解+反射实现orm框架的映射与查询功能</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/04/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3+%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0orm%E6%A1%86%E6%9E%B6%E7%9A%84%E6%98%A0%E5%B0%84%E4%B8%8E%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/04/自定义注解+反射实现orm框架的映射与查询功能/</id>
    <published>2018-10-03T16:00:00.000Z</published>
    <updated>2018-10-04T03:04:17.230Z</updated>
    
    <content type="html"><![CDATA[<p><strong>积极一点,耐心一点,你想要的,时光都会慢慢带到你面前!</strong><excerpt in="" index="" |="" 首页摘要=""><br>对注解和反射的加深学习,对ORM框架的加深理解<br><a id="more"></a></excerpt></p><the rest="" of="" contents="" |="" 余下全文=""><blockquote><p><strong>自定义orm框架例如:Mybatis,hibernate的@Table,@Column注解,通过反射解析注解实现对应表的查询功能,对注解加深学习,对orm框架的思想进行理解.</strong><br><em>将定义的注解进行解析取出数据库表的名字,表对应字段的名字,以及字段对应的value进行sql的拼装,最后通过jdbc进行查询.</em><br>具体代码如下:</p></blockquote><h2 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Table</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"id"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"userName"</span>)</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"nickName"</span>)</span><br><span class="line">    <span class="keyword">private</span>  String nickName;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"age"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"city"</span>)</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"email"</span>)</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"mobile"</span>)</span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNickName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nickName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNickName</span><span class="params">(String nickName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nickName = nickName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCity</span><span class="params">(String city)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.city = city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMobile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMobile</span><span class="params">(String mobile)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Table &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Column &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="对注解的解析和测试类"><a href="#对注解的解析和测试类" class="headerlink" title="对注解的解析和测试类"></a>对注解的解析和测试类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Filter f1 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f1.setAge(<span class="number">10</span>);</span><br><span class="line">        Filter f2 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f2.setNickName(<span class="string">"congcong"</span>);</span><br><span class="line">        Filter f3 = <span class="keyword">new</span> Filter();</span><br><span class="line">        f3.setEmail(<span class="string">"111@qq.com,222@163.com,333@outlook.com"</span>);</span><br><span class="line">        String sql1 = query(f1);</span><br><span class="line">        String sql2 = query(f2);</span><br><span class="line">        String sql3 = query(f3);</span><br><span class="line">        System.out.println(sql1);</span><br><span class="line">        System.out.println(sql2);</span><br><span class="line">        System.out.println(sql3);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">query</span><span class="params">(Filter filter)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">//1.获取Class</span></span><br><span class="line">        Class clazz = filter.getClass();</span><br><span class="line">        <span class="comment">//2.获取Table注解</span></span><br><span class="line">        <span class="keyword">if</span> (!clazz.isAnnotationPresent(Table.class)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Table table = (Table) clazz.getAnnotation(Table.class);</span><br><span class="line">        String tableName = table.value();</span><br><span class="line">        sb.append(<span class="string">"select * from "</span>).append(tableName).append(<span class="string">" where 1=1 "</span>);</span><br><span class="line">        <span class="comment">//3.获取表中的字段</span></span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field f : fields) &#123;</span><br><span class="line">            <span class="comment">//4.处理每个字段对应的SQL</span></span><br><span class="line">            <span class="keyword">if</span> (!f.isAnnotationPresent(Column.class)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.1获取字段上的注解</span></span><br><span class="line">            Column column = f.getAnnotation(Column.class);</span><br><span class="line">            String columnName = column.value();</span><br><span class="line">            <span class="comment">//4.2获取字段的值</span></span><br><span class="line">            String fieldName = f.getName();</span><br><span class="line">            <span class="comment">//4.3获取字段的get方法</span></span><br><span class="line">            String getMethodName = <span class="string">"get"</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase()</span><br><span class="line">                    + fieldName.substring(<span class="number">1</span>);</span><br><span class="line">            Object fieldValue = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Method getMethod = clazz.getDeclaredMethod(getMethodName);</span><br><span class="line">                fieldValue = getMethod.invoke(filter);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4.4拼装SQL</span></span><br><span class="line">            <span class="keyword">if</span> (fieldValue == <span class="keyword">null</span> || (fieldValue <span class="keyword">instanceof</span> Integer &amp;&amp; (Integer) fieldValue == <span class="number">0</span>)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fieldValue <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">                sb.append(<span class="string">"and "</span>).append(columnName).append(<span class="string">"="</span>);</span><br><span class="line">                <span class="keyword">if</span> (((String) fieldValue).contains(<span class="string">","</span>)) &#123;</span><br><span class="line">                    String[] values = ((String) fieldValue).split(<span class="string">","</span>);</span><br><span class="line">                    sb.append(<span class="string">" in("</span>);</span><br><span class="line">                    <span class="keyword">for</span> (String v : values) &#123;</span><br><span class="line">                        sb.append(<span class="string">"'"</span>).append(v).append(<span class="string">"'"</span>).append(<span class="string">","</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">                    sb.append(<span class="string">")"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(<span class="string">"'"</span>).append(fieldValue)</span><br><span class="line">                        .append(<span class="string">"'"</span>).append(<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fieldValue <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">                sb.append(<span class="string">"and "</span>).append(columnName).append(<span class="string">"="</span>).append(fieldValue).append(<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>通过jdbc可实现表的完整查询功能功能,在此略过</p></blockquote></the>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;积极一点,耐心一点,你想要的,时光都会慢慢带到你面前!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;对注解和反射的加深学习,对ORM框架的加深理解&lt;br&gt;
    
    </summary>
    
      <category term="开源框架" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="java" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>初识Docker</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/03/%E5%88%9D%E8%AF%86Docker/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/03/初识Docker/</id>
    <published>2018-10-03T14:35:37.000Z</published>
    <updated>2018-10-05T13:06:07.224Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!</strong><excerpt in="" index="" |="" 首页摘要=""><br> docker是一个神奇的开发工具!</excerpt></p><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h2 id="1-什么是docker"><a href="#1-什么是docker" class="headerlink" title="1.什么是docker"></a>1.什么是docker</h2><blockquote><p>docker是一个世界领先的容器化平台.网上对他的定义有很多,说法过于复杂化了.我是通过学习springcloud认识的docker的,感觉它就是一个神器.个人理解的docker就是一个背包,你可以把你需要的东西放在这个背包里,然后这个背包你可以分享给任何人.你也可以从免费的商店里获得别人的背包,无论你咋什么样的环境下都可以正常使用这个背包.</p><p>docker是跨平台的,支持windows,maxos,linux</p></blockquote><h2 id="2-docker思想"><a href="#2-docker思想" class="headerlink" title="2.docker思想"></a>2.docker思想</h2><p><img src="/img/1538544866753.png" alt="1538544866753"></p><h2 id="3-docker解决了哪些问题"><a href="#3-docker解决了哪些问题" class="headerlink" title="3.docker解决了哪些问题"></a>3.docker解决了哪些问题</h2><h3 id="3-1换一个运行环境程序跑不起来"><a href="#3-1换一个运行环境程序跑不起来" class="headerlink" title="3.1换一个运行环境程序跑不起来"></a>3.1换一个运行环境程序跑不起来</h3><blockquote><p>自己本地运行好好的程序放在别人的电脑上就不行了,曾经亲自体会过,非常苦恼.一是苦恼还得在别人的电脑上调bug,更可怕的是时时刻刻担心自己的程序放在第三台电脑上也会down掉了.这种恐惧远胜过修改bug.相信这种问题无论是哪个程序员都或多或少遇到过.docker的出现完美的解决了这个问题,它将你写好的代码,运行环境都放在一个”集装箱”里,给别人的不只是代码,而是一整套的程序所需的运行环境.在你的机器上怎们运行,在别人的电脑或者服务器上就会怎样运行.</p></blockquote><h3 id="3-2完美实现了隔离"><a href="#3-2完美实现了隔离" class="headerlink" title="3.2完美实现了隔离"></a>3.2完美实现了隔离</h3><blockquote><p>docker再启动是为每个容器限定的CPU,硬盘和网络,不会出现一个程序进入了死循环,从而影响到其他程序的事情发生.</p></blockquote><h3 id="3-3弹性伸缩变得简单"><a href="#3-3弹性伸缩变得简单" class="headerlink" title="3.3弹性伸缩变得简单"></a>3.3弹性伸缩变得简单</h3><blockquote><p>就电商来说:双十一几亿人同时在线,按照平时的资源配置肯定吃不消.如果按照双十一的业务量来配置资源平时又是极大的浪费.所以就要弹性的加减服务器,写过java程序的小伙伴们到知道,要想在一台电脑上跑java程序需要安装至少需要安装jre,配置环境,再把代码拷过来运行,中间可能还会出现问题.使用docker扩展服务器将变成按一下按钮秒秒钟添加n台服务器那么容易.</p></blockquote><h2 id="4-走进docker"><a href="#4-走进docker" class="headerlink" title="4.走进docker"></a>4.走进docker</h2><blockquote><p>docker的三个关键字:镜像,仓库,容器</p><p>docker的三个关键单词:Build,Ship,Run</p></blockquote><p><img src="/img/1538546571188.png" alt="1538546571188"></p><blockquote><p>-镜像:</p><p>-容器:</p><p>-仓库:</p><ul><li>官网仓库:hub.docker.com </li><li>网易仓库:c.163.com</li></ul></blockquote><h2 id="5-docker的安装"><a href="#5-docker的安装" class="headerlink" title="5.docker的安装"></a>5.docker的安装</h2><blockquote><p>网上教程很多,懒得再详细总结</p></blockquote><h2 id="6-第一个docker镜像"><a href="#6-第一个docker镜像" class="headerlink" title="6.第一个docker镜像"></a>6.第一个docker镜像</h2><h3 id="6-1docker工作流程"><a href="#6-1docker工作流程" class="headerlink" title="6.1docker工作流程"></a>6.1docker工作流程</h3><p><img src="/img/1538548365242.png" alt="1538548365242"></p><h3 id="6-2常用的命令"><a href="#6-2常用的命令" class="headerlink" title="6.2常用的命令"></a>6.2常用的命令</h3><blockquote><ul><li>docker pull [OPTIONS] NAME[:TAG]  拉去镜像   举例:docker pull hello-world</li><li>docker images [OPTIONS]_[ REPOSITORY[:TAG]] 查看镜像</li><li>docker run hello-world</li><li>docker ps</li><li>docker exec -it [代号] bash   :进入容器(正在运行的)</li><li>which nginx : 查看Nginx的位置</li><li>netstat -na|grep 10001 : 检查端口是否开放</li><li>docker run -d -p 10001:80 nginx   :开放容器的80端口映射到本机的10001端口</li><li>docker run -d -P  nginx :随机开放端口映射过来</li><li>docker build .   : 在当前目录运行构建的Dockerfile 文件</li><li>docker build  -t  Jpress:latest  .   :给镜像起一个名字和版本</li></ul></blockquote><h2 id="7-运行Nginx服务器镜像"><a href="#7-运行Nginx服务器镜像" class="headerlink" title="7.运行Nginx服务器镜像"></a>7.运行Nginx服务器镜像</h2><p><img src="/img/1538548580593.png" alt="1538548580593"></p><h2 id="8-docker的网络"><a href="#8-docker的网络" class="headerlink" title="8.docker的网络"></a>8.docker的网络</h2><p><img src="/img/1538549437822.png" alt="1538549437822"><img src="./img/1538549459787.png" alt="1538549459787"></p><h2 id="9-制作自己的镜像"><a href="#9-制作自己的镜像" class="headerlink" title="9.制作自己的镜像"></a>9.制作自己的镜像</h2><blockquote><ul><li>Dockerfille : 制作镜像</li><li>docker build : 构建镜像</li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;读书,健身,努力工作,关心身体,保持好心情,成为最棒的自己!&lt;/strong&gt;&lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt; docker是一个神奇的开发工具!&lt;/excerpt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="docker" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Oracle学习</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2018/10/01/Oracle%E5%AD%A6%E4%B9%A0/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2018/10/01/Oracle学习/</id>
    <published>2018-10-01T14:35:37.000Z</published>
    <updated>2018-11-20T00:50:53.256Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>无需证明什么,要做的唯有让自己更棒!</strong></p> <excerpt in="" index="" |="" 首页摘要=""><a id="more"></a><p><the rest="" of="" contents="" |="" 余下全文=""></the></p><h1 id="Oracle学习"><a href="#Oracle学习" class="headerlink" title="Oracle学习"></a>Oracle学习</h1><h2 id="第一天"><a href="#第一天" class="headerlink" title="第一天:"></a>第一天:</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tab;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">数据库  ---&gt; 数据库实例  ---&gt;  表空间(逻辑单位)(用户)  ---&gt; 数据文件(物理单位)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">地球    ---&gt; 一个国家    ---&gt;  省份(逻辑单位)(公民)    ---&gt; 山川河流(物理单位)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">通常情况下,ORacle数据库只会有一个实例ORCL,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">新建一个项目:</span></span><br><span class="line"><span class="comment">     MYSQL : 创建一个数据库,创建相应的表</span></span><br><span class="line"><span class="comment">     Oracle: 创建一个表空间,创建用户,用户去创建表</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">Oracle和MYSQL的差别</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Oracle是多用户的, MYSQL是多数据库的</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. 遵循SQL标准</span></span><br><span class="line"><span class="comment">2. 不同厂商,不同的数据库产品,但是有自己的方言</span></span><br><span class="line"><span class="comment">3. 使用自己的方言,也能够完成相同的功能</span></span><br><span class="line"><span class="comment">4. Oracle安全级别要高,MYSQL开源免费</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">基本查询:</span></span><br><span class="line"><span class="comment">   SQL : 结构化查询语言</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   请听题: 请说一下SQL的分类以及每类常见的操作符都有哪些</span></span><br><span class="line"><span class="comment">   四类:</span></span><br><span class="line"><span class="comment">        DDL : 数据定义语言 create alter drop truncate</span></span><br><span class="line"><span class="comment">        DML : 数据操纵语言 insert update delete</span></span><br><span class="line"><span class="comment">        DCL : 数据控制语言 安全 授权 grant revoke</span></span><br><span class="line"><span class="comment">        DQL : 数据查询语言 select from子句 where子句</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">   查询语句的结构:</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   select [列名] [*] from 表名 [where 条件] [group by 分组条件] [having 过滤] [order by 排序]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span>+<span class="number">1</span>;  <span class="comment">--在Oracle等于报错 ,在MYSQL中输出结果是2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     dual : oracle中的虚表 ,伪表, 主要是用来补齐语法结构</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span>+<span class="number">1</span> <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--直接写一个常量比写 * 要高效</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       别名查询: 使用as 关键字, 可以省略</span></span><br><span class="line"><span class="comment">       别名中不能有特殊字符或者关键字, 如果有就加双引号</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> ename 姓名, sal 工资 <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename <span class="string">"姓       名"</span>, sal 工资 <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      去除重复数据 distinct</span></span><br><span class="line"><span class="comment">      多列去除重复: 每一列都一样才能够算作是重复</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--单列去除重复</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--多列去除重复的</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job,deptno <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询中四则运算</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span>+<span class="number">1</span> <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工年薪  = 月薪* 12</span></span><br><span class="line"><span class="keyword">select</span> sal*<span class="number">12</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工年薪+奖金</span></span><br><span class="line"><span class="keyword">select</span> sal*<span class="number">12</span> + comm <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--nvl 函数 : 如果参数1为null  就返回参数2</span></span><br><span class="line"><span class="keyword">select</span> sal*<span class="number">12</span> + nvl(comm,<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    注意: null值 , 代表不确定的 不可预知的内容 , 不可以做四则运算</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">字符串拼接:</span></span><br><span class="line"><span class="comment">    java : + 号拼接</span></span><br><span class="line"><span class="comment">    Oracle 特有的连接符: || 拼接</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    在Oracle 中 ,双引号主要是别名的时候使用, 单引号是使用的值, 是字符</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    concat(str1,str2) 函数, 在mysql和Oracle中都有</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询员工姓名 :  姓名:SCOTT</span></span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--使用拼接符</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'姓名:'</span> || ename <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用函数拼接</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'姓名:'</span>,ename) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    条件查询 : [where后面的写法]   </span></span><br><span class="line"><span class="comment">        关系运算符: &gt; &gt;= = &lt; &lt;= != &lt;&gt;</span></span><br><span class="line"><span class="comment">        逻辑运算符: and or not</span></span><br><span class="line"><span class="comment">        其它运算符:</span></span><br><span class="line"><span class="comment">               like 模糊查询</span></span><br><span class="line"><span class="comment">               in(set) 在某个集合内</span></span><br><span class="line"><span class="comment">               between..and.. 在某个区间内</span></span><br><span class="line"><span class="comment">               is null  判断为空</span></span><br><span class="line"><span class="comment">               is not null 判断不为空</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询每月能得到奖金的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询工资在1500--3000之间的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1500</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt;= <span class="number">1500</span> <span class="keyword">and</span> sal &lt;= <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询名字在某个范围的员工信息 ('JONES','SCOTT','FORD') in</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">in</span> (<span class="string">'JONES'</span>,<span class="string">'SCOTT'</span>,<span class="string">'FORD'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    模糊查询: like</span></span><br><span class="line"><span class="comment">        %   匹配多个字符</span></span><br><span class="line"><span class="comment">        _   匹配单个字符</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        如果有特殊字符, 需要使用escape转义</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询员工姓名第三个字符是O的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'__O%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工姓名中,包含%的员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%#%%'</span> escape <span class="string">'#'</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%\%%'</span> escape <span class="string">'\';</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       排序 : order by </span></span><br><span class="line"><span class="comment">          升序: asc    ascend</span></span><br><span class="line"><span class="comment">          降序: desc   descend</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">          排序注意null问题 : nulls first | last</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">          同时排列多列, 用逗号隔开</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工信息,按照奖金由高到低排序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> comm <span class="keyword">desc</span> <span class="keyword">nulls</span> <span class="keyword">last</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询部门编号和按照工资  按照部门升序排序, 工资降序排序</span></span><br><span class="line"><span class="keyword">select</span> deptno, sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno <span class="keyword">asc</span>, sal <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     函数: 必须要有返回值</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     单行函数: 对某一行中的某个值进行处理</span></span><br><span class="line"><span class="comment">         数值函数</span></span><br><span class="line"><span class="comment">         字符函数</span></span><br><span class="line"><span class="comment">         日期函数</span></span><br><span class="line"><span class="comment">         转换函数</span></span><br><span class="line"><span class="comment">         通用函数</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     多行函数: 对某一列的所有行进行处理</span></span><br><span class="line"><span class="comment">           max()  min count sum avg</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">           1.直接忽略空值 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--统计员工工资总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(sal) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--统计员工奖金总和  2200</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(comm) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--统计员工人数 14</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--统计员工的平均奖金  550  错误    2200/14 =</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(comm) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--统计员工的平均奖金 157.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(comm)/<span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="keyword">sum</span>(comm)/<span class="keyword">count</span>(<span class="number">1</span>)) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> ename = <span class="string">'TUR%NER'</span> <span class="keyword">where</span> ename = <span class="string">'TURNER'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--数值函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="number">45.926</span>) <span class="keyword">from</span> dual;  <span class="comment">--46</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">floor</span>(<span class="number">45.926</span>) <span class="keyword">from</span> dual; <span class="comment">--45</span></span><br><span class="line"><span class="comment">--四舍五入</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>,<span class="number">2</span>) <span class="keyword">from</span> dual; <span class="comment">--45.93</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>,<span class="number">1</span>) <span class="keyword">from</span> dual; <span class="comment">-- 45.9</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>,<span class="number">0</span>) <span class="keyword">from</span> dual; <span class="comment">--46</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>,<span class="number">-1</span>) <span class="keyword">from</span> dual; <span class="comment">--50</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>,<span class="number">-2</span>) <span class="keyword">from</span> dual; <span class="comment">--0</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">65.926</span>,<span class="number">-2</span>) <span class="keyword">from</span> dual; <span class="comment">--100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--截断</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">2</span>) <span class="keyword">from</span> dual; <span class="comment">--45.92</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">1</span>) <span class="keyword">from</span> dual; <span class="comment">-- 45.9</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">0</span>) <span class="keyword">from</span> dual; <span class="comment">--45</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">-1</span>) <span class="keyword">from</span> dual; <span class="comment">--40</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">-2</span>) <span class="keyword">from</span> dual; <span class="comment">--0</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">65.926</span>,<span class="number">-2</span>) <span class="keyword">from</span> dual; <span class="comment">--0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--求余</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">mod</span>(<span class="number">9</span>,<span class="number">3</span>) <span class="keyword">from</span> dual; <span class="comment">--0</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">mod</span>(<span class="number">9</span>,<span class="number">4</span>) <span class="keyword">from</span> dual; <span class="comment">--1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--字符函数</span></span><br><span class="line"><span class="comment">-- substr(str1,起始索引,长度) </span></span><br><span class="line"><span class="comment">--注意: 起始索引不管写 0 还是 1 都是从第一个字符开始截取</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'abcdefg'</span>,<span class="number">0</span>,<span class="number">3</span>) <span class="keyword">from</span> dual; <span class="comment">--abc</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'abcdefg'</span>,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">from</span> dual; <span class="comment">--abc</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'abcdefg'</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="keyword">from</span> dual; <span class="comment">--bcd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取字符串长度 24 28</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="string">'abcdefg'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--去除字符左右两边的空格</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'  hello  '</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--替换字符串</span></span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">replace</span>(<span class="string">'hello'</span>,<span class="string">'l'</span>,<span class="string">'a'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--日期函数</span></span><br><span class="line"><span class="comment">--查询今天的日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--查询3个月后的今天的日期</span></span><br><span class="line"><span class="keyword">select</span> add_months(<span class="keyword">sysdate</span>,<span class="number">3</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--查询3天后的日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span> + <span class="number">3</span> <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工入职的天数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span> - hiredate <span class="keyword">from</span>  emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="keyword">sysdate</span> - hiredate) <span class="keyword">from</span>  emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工入职的周数</span></span><br><span class="line"><span class="keyword">select</span> (<span class="keyword">sysdate</span> - hiredate)/<span class="number">7</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工入职的月数</span></span><br><span class="line"><span class="keyword">select</span> months_between(<span class="keyword">sysdate</span>,hiredate) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工入职的年份</span></span><br><span class="line"><span class="keyword">select</span> months_between(<span class="keyword">sysdate</span>,hiredate)/<span class="number">12</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--转换函数  数值转字符 字符转数值  日期</span></span><br><span class="line"><span class="comment">--字符转数值 to_number(str) 鸡肋</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span>+<span class="string">'10'</span> <span class="keyword">from</span> dual;  <span class="comment">--110  默认已经帮我们转换</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span> + to_number(<span class="string">'10'</span>) <span class="keyword">from</span> dual; <span class="comment">--110</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--数值转字符</span></span><br><span class="line"><span class="keyword">select</span> to_char(sal,<span class="string">'$9,999.99'</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> to_char(sal,<span class="string">'L9,999.99'</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">to_char(1210.73, '9999.9') 返回 '1210.7' </span></span><br><span class="line"><span class="comment">to_char(1210.73, '9,999.99') 返回 '1,210.73' </span></span><br><span class="line"><span class="comment">to_char(1210.73, '$9,999.00') 返回 '$1,210.73' </span></span><br><span class="line"><span class="comment">to_char(21, '000099') 返回 '000021' </span></span><br><span class="line"><span class="comment">to_char(852,'xxxx') 返回' 354'</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--日期转字符 to_char()  </span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy-mm-dd hh:mi:ss'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy-mm-dd hh24:mi:ss'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--只想要年</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy'</span>) <span class="keyword">from</span> dual;  <span class="comment">--2017</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--只想要日</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'d'</span>) <span class="keyword">from</span> dual; <span class="comment">--2  代表一个星期中第几天</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'dd'</span>) <span class="keyword">from</span> dual;  <span class="comment">--10  代表一个月中的第几天</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'ddd'</span>) <span class="keyword">from</span> dual; <span class="comment">--100 代表一年中的第几天</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'day'</span>) <span class="keyword">from</span> dual;  <span class="comment">--monday</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'dy'</span>) <span class="keyword">from</span> dual;   <span class="comment">--mon  星期的简写</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--字符转日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">to_date</span>(<span class="string">'2017-04-10'</span>,<span class="string">'yyyy-mm-dd'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询1981年 -- 1985年入职的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate <span class="keyword">between</span> <span class="keyword">to_date</span>(<span class="string">'1981'</span>,<span class="string">'yyyy'</span>) <span class="keyword">and</span> <span class="keyword">to_date</span>(<span class="string">'1985'</span>,<span class="string">'yyyy'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">      通用函数:</span></span><br><span class="line"><span class="comment">       nvl(参数1,参数2) 如果参数1 = null 就返回参数2</span></span><br><span class="line"><span class="comment">       nvl2(参数1,参数2,参数3) 如果参数1 = null ,就返回参数3, 否则返回参数2</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       nullif(参数1,参数2) 如果参数1 = 参数2 那么就返回 null , 否则返回参数1</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       coalesce: 返回第一个不为null的值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> nvl2(<span class="literal">null</span>,<span class="number">5</span>,<span class="number">6</span>) <span class="keyword">from</span> dual; <span class="comment">--6;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> nvl2(<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>) <span class="keyword">from</span> dual; <span class="comment">--5;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">nullif</span>(<span class="number">5</span>,<span class="number">6</span>) <span class="keyword">from</span> dual; <span class="comment">--5</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">nullif</span>(<span class="number">6</span>,<span class="number">6</span>) <span class="keyword">from</span> dual; <span class="comment">--null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">coalesce</span>(<span class="literal">null</span>,<span class="literal">null</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>) <span class="keyword">from</span> dual;  <span class="comment">--3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="number">-12.5</span>) <span class="keyword">from</span> dual; <span class="comment">--12</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">floor</span>(<span class="number">12.5</span>) <span class="keyword">from</span> dual; <span class="comment">--12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="string">'  hello  '</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><h2 id="第二天"><a href="#第二天" class="headerlink" title="第二天:"></a>第二天:</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> bonus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> salgrade;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     多表查询:</span></span><br><span class="line"><span class="comment">       笛卡尔积: 实际上是两张表的乘积,但是在实际开发中没有太大意义</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">     格式: select * from 表1,表2   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp, dept;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1, dept d1 <span class="keyword">where</span> e1.deptno = d1.deptno;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     内联接:</span></span><br><span class="line"><span class="comment">       隐式内联接: </span></span><br><span class="line"><span class="comment">           等值内联接:   where e1.deptno = d1.deptno;</span></span><br><span class="line"><span class="comment">           不等值内联接:  where e1.deptno &lt;&gt; d1.deptno;</span></span><br><span class="line"><span class="comment">           自联接: 自己连接自己</span></span><br><span class="line"><span class="comment">       显示内联接:</span></span><br><span class="line"><span class="comment">           select * from 表1 inner join 表2 on 连接条件</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">           inner 关键字可以省略</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1, dept d1 <span class="keyword">where</span> e1.deptno &lt;&gt; d1.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,经理的编号,经理的姓名</span></span><br><span class="line"><span class="keyword">select</span> e1.empno,e1.ename,e1.mgr,m1.ename</span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1 <span class="keyword">where</span> e1.mgr= m1.empno;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,员工的部门名称,经理的编号,经理的姓名</span></span><br><span class="line"><span class="keyword">select</span> e1.empno,e1.ename,d1.dname,e1.mgr,m1.ename</span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1,dept d1 <span class="keyword">where</span> e1.mgr= m1.empno <span class="keyword">and</span> e1.deptno = d1.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,员工的部门名称,经理的编号,经理的姓名,经理的部门名称</span></span><br><span class="line"><span class="keyword">select</span> e1.empno,e1.ename,d1.dname,e1.mgr,m1.ename,d2.dname</span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1,dept d1,dept d2 </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">     e1.mgr= m1.empno </span><br><span class="line"> <span class="keyword">and</span> e1.deptno = d1.deptno</span><br><span class="line"> <span class="keyword">and</span> m1.deptno = d2.deptno </span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,员工的部门名称,员工的工资等级,经理的编号,经理的姓名,经理的部门名称</span></span><br><span class="line"><span class="keyword">select</span> e1.empno,e1.ename,d1.dname,s1.grade,e1.mgr,m1.ename,d2.dname</span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1,dept d1,dept d2,salgrade s1 </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">     e1.mgr= m1.empno </span><br><span class="line"> <span class="keyword">and</span> e1.deptno = d1.deptno</span><br><span class="line"> <span class="keyword">and</span> m1.deptno = d2.deptno</span><br><span class="line"> <span class="keyword">and</span> e1.sal <span class="keyword">between</span> s1.losal <span class="keyword">and</span> s1.hisal </span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,员工的部门名称,员工的工资等级,经理的编号,经理的姓名,经理的部门名称,经理的工资等级</span></span><br><span class="line"><span class="keyword">select</span> e1.empno,e1.ename,d1.dname,s1.grade,e1.mgr,m1.ename,d2.dname,s2.grade</span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1,dept d1,dept d2,salgrade s1,salgrade s2 </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">     e1.mgr= m1.empno </span><br><span class="line"> <span class="keyword">and</span> e1.deptno = d1.deptno</span><br><span class="line"> <span class="keyword">and</span> m1.deptno = d2.deptno</span><br><span class="line"> <span class="keyword">and</span> e1.sal <span class="keyword">between</span> s1.losal <span class="keyword">and</span> s1.hisal </span><br><span class="line"> <span class="keyword">and</span> m1.sal <span class="keyword">between</span> s2.losal <span class="keyword">and</span> s2.hisal </span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工编号,员工姓名,员工的部门名称,员工的工资等级,经理的编号,经理的姓名,经理的部门名称,经理的工资等级</span></span><br><span class="line"><span class="comment">--将工资等级 1,2,3,4 显示成 中文的 一级 二级 三级...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e1.empno,</span><br><span class="line">       e1.ename,</span><br><span class="line">       d1.dname,</span><br><span class="line">       <span class="keyword">case</span> s1.grade</span><br><span class="line">         <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">'一级'</span></span><br><span class="line">         <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">'二级'</span></span><br><span class="line">         <span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">'三级'</span></span><br><span class="line">         <span class="keyword">when</span> <span class="number">4</span> <span class="keyword">then</span> <span class="string">'四级'</span></span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">             <span class="string">'五级'</span></span><br><span class="line">         <span class="keyword">end</span> <span class="string">"等级"</span>,</span><br><span class="line">       e1.mgr,</span><br><span class="line">       m1.ename,</span><br><span class="line">       d2.dname,</span><br><span class="line">       <span class="keyword">decode</span>(s2.grade,<span class="number">1</span>,<span class="string">'一级'</span>,<span class="number">2</span>,<span class="string">'二级'</span>,<span class="number">3</span>,<span class="string">'三级'</span>,<span class="number">4</span>,<span class="string">'四级'</span>,<span class="string">'五级'</span>) <span class="string">"等级"</span></span><br><span class="line"><span class="keyword">from</span> emp e1, emp m1,dept d1,dept d2,salgrade s1,salgrade s2 </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">     e1.mgr= m1.empno </span><br><span class="line"> <span class="keyword">and</span> e1.deptno = d1.deptno</span><br><span class="line"> <span class="keyword">and</span> m1.deptno = d2.deptno</span><br><span class="line"> <span class="keyword">and</span> e1.sal <span class="keyword">between</span> s1.losal <span class="keyword">and</span> s1.hisal </span><br><span class="line"> <span class="keyword">and</span> m1.sal <span class="keyword">between</span> s2.losal <span class="keyword">and</span> s2.hisal </span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工姓名和员工部门所处的位置</span></span><br><span class="line"><span class="keyword">select</span> e1.ename,d1.loc <span class="keyword">from</span> emp e1,dept d1 <span class="keyword">where</span> e1.deptno = d1.deptno;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1 <span class="keyword">inner</span> <span class="keyword">join</span> dept d1 <span class="keyword">on</span> e1.deptno = d1.deptno;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    外连接: (标准,通用写法)</span></span><br><span class="line"><span class="comment">       左外连接: left outer join 左表中所有的记录,如果右表没有对应记录,就显示空</span></span><br><span class="line"><span class="comment">       右外连接: right outer join 右表中的所有记录,如果左表没有对应记录,就显示空</span></span><br><span class="line"><span class="comment">       outer 关键字可以省略  </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">    Oracle中的外连接: (+) 实际上是如果没有对应的记录就加上空值</span></span><br><span class="line"><span class="comment">          select * from emp e1,dept d1 where e1.deptno = d1.deptno(+);            </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1 <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d1 <span class="keyword">on</span> e1.deptno = d1.deptno;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno,ename) <span class="keyword">values</span>(<span class="number">9527</span>,<span class="string">'HUAAN'</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1,dept d1 <span class="keyword">where</span> e1.deptno = d1.deptno(+);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1 <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d1 <span class="keyword">on</span> e1.deptno = d1.deptno;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1,dept d1 <span class="keyword">where</span> e1.deptno(+) = d1.deptno;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       子查询: 查询语句中嵌套查询语句; 用来解决复杂的查询语句</span></span><br><span class="line"><span class="comment">            查询最高工资的员工信息     </span></span><br><span class="line"><span class="comment">         单行子查询: &gt; &gt;= = &lt; &lt;= &lt;&gt; !=</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">         多行子查询: in not in  &gt;any &gt;all exists not exists</span></span><br><span class="line"><span class="comment">               </span></span><br><span class="line"><span class="comment">               查询领导信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询最高工资的员工信息 </span></span><br><span class="line"><span class="comment">--1.查询出最高工资 --5000</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--2. 工资等于最高工资</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal = (<span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询出比雇员7654的工资高,同时和7788从事相同工作的员工信息</span></span><br><span class="line"><span class="comment">--1.雇员7654的工资 1250</span></span><br><span class="line"><span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7654</span>;</span><br><span class="line"><span class="comment">--2.7788从事的工作 ANALYST</span></span><br><span class="line"><span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7788</span>;</span><br><span class="line"><span class="comment">--3.两个条件合并</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1250</span> <span class="keyword">and</span> job = <span class="string">'ANALYST'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; (<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7654</span>) <span class="keyword">and</span> job = (<span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7788</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询每个部门最低工资的员工信息和他所在的部门信息</span></span><br><span class="line"><span class="comment">--1.查询每个部门的最低工资,分组统计</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">min</span>(sal) minsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="comment">--2.员工工资等于他所处部门的最低工资</span></span><br><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> emp e1,</span><br><span class="line">     (<span class="keyword">select</span> deptno,<span class="keyword">min</span>(sal) minsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t1 </span><br><span class="line"><span class="keyword">where</span> e1.deptno = t1.deptno <span class="keyword">and</span> e1.sal = t1.minsal; </span><br><span class="line"><span class="comment">--3.查询部门相关信息</span></span><br><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> emp e1,</span><br><span class="line">     (<span class="keyword">select</span> deptno,<span class="keyword">min</span>(sal) minsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t1,</span><br><span class="line">     dept d1 </span><br><span class="line"><span class="keyword">where</span> e1.deptno = t1.deptno <span class="keyword">and</span> e1.sal = t1.minsal <span class="keyword">and</span> e1.deptno = d1.deptno; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      内联接, 单行子查询, 多行子查询</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">      in </span></span><br><span class="line"><span class="comment">      not in</span></span><br><span class="line"><span class="comment">      any </span></span><br><span class="line"><span class="comment">      all</span></span><br><span class="line"><span class="comment">      exists </span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">      通常情况下, 数据库中不要出现null  最好的做法加上Not null</span></span><br><span class="line"><span class="comment">      null值并不代表不占空间, char(100) null 100个字符</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询领导信息</span></span><br><span class="line"><span class="comment">--1.查询所有经理的编号</span></span><br><span class="line"><span class="keyword">select</span> mgr <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> mgr <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--2.结果</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span> (<span class="keyword">select</span> mgr <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询不是领导的信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> mgr <span class="keyword">from</span> emp);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno &lt;&gt;all(<span class="keyword">select</span> mgr <span class="keyword">from</span> emp);</span><br><span class="line"><span class="comment">--正确的写法</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> mgr <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询出比10号部门任意一个员工薪资高的员工信息  10 20 30</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt;<span class="keyword">any</span> (<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询出比20号部门所有员工薪资高的员工信息 10 20 30</span></span><br><span class="line"><span class="comment">--1.20号最高工资 5000</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno =<span class="number">20</span>;</span><br><span class="line"><span class="comment">--2.员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; (<span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno =<span class="number">20</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">-----使用多行子查询完成上面这题</span></span><br><span class="line"><span class="comment">---------20号部门所有员工薪资 (800 2975 ...)</span></span><br><span class="line"><span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"><span class="comment">---------大于集合所有的</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt;all(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     exists(查询语句) : 存在的意思,判断一张表里面的记录是否存在与另外一张表中</span></span><br><span class="line"><span class="comment">                当作布尔值来处理:</span></span><br><span class="line"><span class="comment">                    当查询语句有结果的时候, 就是返回true</span></span><br><span class="line"><span class="comment">                                            否则返回的是false</span></span><br><span class="line"><span class="comment">     数据量比较大的时候是非常高效的   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">1234567</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="number">3</span>=<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询有员工的部门的信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept d1 <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp e1 <span class="keyword">where</span> e1.deptno = d1.deptno );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--找到员工表中工资最高的前三名(降序排序)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       rownum : 伪列, 系统自动生成的一列, 用来表示行号</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       rownum是Oracle中特有的用来表示行号的, 默认值/起始值是 1 ,在每查询出结果之后,再添加1</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       rownum最好不能做大于号判断,可以做小于号判断</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       SQL执行顺序</span></span><br><span class="line"><span class="comment">       from .. where ..group by..having .. select..rownum..order by</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">rownum</span>,e1.* <span class="keyword">from</span> emp e1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询rownum大于2的所有记录 ,</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>,e1.* <span class="keyword">from</span> emp e1 <span class="keyword">where</span> <span class="keyword">rownum</span> &gt; <span class="number">2</span>;  <span class="comment">--没有任何记录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询rownum大于等于1的所有记录 </span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>,e1.* <span class="keyword">from</span> emp e1 <span class="keyword">where</span> <span class="keyword">rownum</span> &gt;=<span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">--查询rownum &lt; 6 的所有记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>,e1.* <span class="keyword">from</span> emp e1 <span class="keyword">where</span> <span class="keyword">rownum</span> &lt; <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--rownum 排序</span></span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">rownum</span>,e1.* <span class="keyword">from</span> emp e1 <span class="keyword">order</span> <span class="keyword">by</span> sal;</span><br><span class="line"></span><br><span class="line"><span class="comment">--找到员工表中工资最高的前三名</span></span><br><span class="line"><span class="keyword">select</span> e1.* <span class="keyword">from</span> emp e1 <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">--将上面的结果当作一张表处理,再查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>, t1.* <span class="keyword">from</span> (<span class="keyword">select</span> e1.* <span class="keyword">from</span> emp e1 <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>) t1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--只要显示前三条记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>, t1.* <span class="keyword">from</span> (<span class="keyword">select</span> e1.* <span class="keyword">from</span> emp e1 <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>) t1 <span class="keyword">where</span> <span class="keyword">rownum</span> &lt; <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--找到员工表中薪水大于本部门平均薪水的员工</span></span><br><span class="line"><span class="comment">--1.分组统计部门平均薪水</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="comment">--2.员工工资 &gt; 本部门平均工资</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1,(<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t1 </span><br><span class="line"><span class="keyword">where</span> e1.deptno = t1.deptno <span class="keyword">and</span> e1.sal &gt; t1.avgsal;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      关联子查询 , 非关联子查询</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e <span class="keyword">where</span> sal &gt; (<span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp e2 <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> e.deptno=e2.deptno);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   统计每年入职的员工个数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> hiredate <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--只显示年</span></span><br><span class="line"><span class="keyword">select</span> to_char(hiredate,<span class="string">'yyyy'</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--分组统计</span></span><br><span class="line"><span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> yy</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span> <span class="string">"1987"</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--去除行记录中的空值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1987"</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--统计员工的总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(cc) <span class="string">"TOTAL"</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--将1987 和TOTAL 合并在一起</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">      <span class="keyword">sum</span>(cc) <span class="string">"TOTAL"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1987"</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">      (<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示所有年份的结果</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">      <span class="keyword">sum</span>(cc) <span class="string">"TOTAL"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1980'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1980"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1981'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1981"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1982'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1982"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1987"</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">      (<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    rowid : 伪列  每行记录所存放的真实物理地址</span></span><br><span class="line"><span class="comment">    rownum : 行号 , 每查询出记录之后,就会添加一个行号</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rowid</span>,e.* <span class="keyword">from</span> emp e;</span><br><span class="line"></span><br><span class="line"><span class="comment">--去除表中重复记录</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> p(</span><br><span class="line">       <span class="keyword">name</span> varchar2(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> p <span class="keyword">values</span>(<span class="string">'黄伟福'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> p <span class="keyword">values</span>(<span class="string">'赵洪'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> p <span class="keyword">values</span>(<span class="string">'杨华'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> p <span class="keyword">where</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rowid</span>,p.* <span class="keyword">from</span> p;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> * <span class="keyword">from</span> p;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> p p1 <span class="keyword">where</span> <span class="keyword">rowid</span> &gt; (<span class="keyword">select</span> <span class="keyword">min</span>(<span class="keyword">rowid</span>) <span class="keyword">from</span> p p2 <span class="keyword">where</span> p1.name = p2.name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       rownum : 分页查询 </span></span><br><span class="line"><span class="comment">       在oracle中只能使用子查询来做分页查询  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询第6 - 第10 记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span>, emp.* <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span> hanghao, emp.* <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">rownum</span> hanghao, emp.* <span class="keyword">from</span> emp) tt <span class="keyword">where</span> tt.hanghao <span class="keyword">between</span> <span class="number">6</span> <span class="keyword">and</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       集合运算: </span></span><br><span class="line"><span class="comment">         并集: 将两个查询结果进行合并</span></span><br><span class="line"><span class="comment">         交集</span></span><br><span class="line"><span class="comment">         差集</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       所有的查询结果可能不是来自同一张表,  </span></span><br><span class="line"><span class="comment">         emp  2000年</span></span><br><span class="line"><span class="comment">              2017年 手机 详细信息 emp2017</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--工资大于1500,或者20号部门下的员工</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span> <span class="keyword">or</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--工资大于1500</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span>;</span><br><span class="line"><span class="comment">--20号部门下的员工</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--并集运算: union  union all</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        union : 去除重复的,并且排序</span></span><br><span class="line"><span class="comment">        union all : 不会去除重复的</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span> all</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    交集运算: intersect</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--工资大于1500,并且20号部门下的员工</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   差集运算: 两个结果相减</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--1981年入职员工(不包括总裁和经理)</span></span><br><span class="line"><span class="comment">--1981年入职员工</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> to_char(hiredate,<span class="string">'yyyy'</span>)=<span class="string">'1981'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--总裁和经理</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> job = <span class="string">'PRESIDENT'</span> <span class="keyword">or</span> job = <span class="string">'MANAGER'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> to_char(hiredate,<span class="string">'yyyy'</span>)=<span class="string">'1981'</span></span><br><span class="line"><span class="keyword">minus</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> job = <span class="string">'PRESIDENT'</span> <span class="keyword">or</span> job = <span class="string">'MANAGER'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       集合运算中的注意事项:</span></span><br><span class="line"><span class="comment">         1.列的类型要一致</span></span><br><span class="line"><span class="comment">         2.按照顺序写</span></span><br><span class="line"><span class="comment">         3.列的数量要一致,如果不足,用空值填充</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"><span class="comment">--列的类型不匹配</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> sal,ename <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--列的数量不匹配</span></span><br><span class="line"><span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,sal,<span class="literal">null</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,sal,<span class="number">66</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept;</span><br></pre></td></tr></table></figure><h2 id="第三天"><a href="#第三天" class="headerlink" title="第三天:"></a>第三天:</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  多表查询:</span></span><br><span class="line"><span class="comment">    内联接</span></span><br><span class="line"><span class="comment">      等值联接</span></span><br><span class="line"><span class="comment">      inner join</span></span><br><span class="line"><span class="comment">    外连接</span></span><br><span class="line"><span class="comment">      left outer join</span></span><br><span class="line"><span class="comment">      right outer join</span></span><br><span class="line"><span class="comment">      Oracle特有的写法(+)</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">    子查询:</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--内联接的结果</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1,emp t1 <span class="keyword">where</span> e1.mgr = t1.empno;</span><br><span class="line"><span class="comment">--t1表里面的所有记录都会显示出来, 如果t1.empno 在e1.mgr中没有对应的记录,就加空值</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e1,emp t1 <span class="keyword">where</span> e1.mgr(+) = t1.empno;</span><br><span class="line"><span class="comment">--查询不是领导的员工编号</span></span><br><span class="line"><span class="keyword">select</span> empno <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> mgr <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取员工的名字和部门的名字</span></span><br><span class="line"><span class="keyword">select</span> e.ename,d.dname <span class="keyword">from</span> emp e,dept d <span class="keyword">where</span> e.deptno = d.deptno;</span><br><span class="line"><span class="comment">----使用子查询的方式来完成</span></span><br><span class="line"><span class="keyword">select</span> ename,deptno <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,deptno,deptno <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--关联子查询, 子查询依赖外部查询的条件</span></span><br><span class="line"><span class="keyword">select</span> e.ename,e.deptno,(<span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d <span class="keyword">where</span> d.deptno = e.deptno ) aa <span class="keyword">from</span> emp e;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--统计薪资大于薪资最高的员工所在部门的平均工资和薪资最低的员工所在部门的平均工资的平均工资的员工信息。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     Oracle体系结构:</span></span><br><span class="line"><span class="comment">      数据库 ---&gt; 数据库实例ORCL ---&gt; 表空间 (用户里面的创建表) ---&gt; 数据文件 </span></span><br><span class="line"><span class="comment">      地球   ---&gt; 中国           ---&gt; 省份  (人民)              ---&gt; 土地山川河流</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     雄安新区 ---&gt; 人(开发荒地,种地)</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     创建表空间: 逻辑单位, 通常我们新建一个项目,就会去新建表空间,在表空间中创建用户来创建表</span></span><br><span class="line"><span class="comment">           语法:</span></span><br><span class="line"><span class="comment">               create tablespace 表空间的名称</span></span><br><span class="line"><span class="comment">               datafile '文件的路径(服务器上)'</span></span><br><span class="line"><span class="comment">               size 大小</span></span><br><span class="line"><span class="comment">               autoextend on  自动扩展</span></span><br><span class="line"><span class="comment">               next 每次扩展的大小</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--切换到system帐号下创建</span></span><br><span class="line"><span class="comment">--创建一个表空间 --- 汉东</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> handong</span><br><span class="line"><span class="keyword">datafile</span> <span class="string">'c:\handong.dbf'</span></span><br><span class="line"><span class="keyword">size</span> <span class="number">100</span>m</span><br><span class="line"><span class="keyword">autoextend</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除表空间</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">tablespace</span> handong;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   创建用户 </span></span><br><span class="line"><span class="comment">     create user 用户名</span></span><br><span class="line"><span class="comment">     identified by 密码</span></span><br><span class="line"><span class="comment">     default tablespace 表空间的名称</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> dakang</span><br><span class="line"><span class="keyword">identified</span> <span class="keyword">by</span> dakang</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">tablespace</span> handong;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">授权   grant 角色 | 权限  to 用户</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span> <span class="keyword">to</span> dakang;</span><br><span class="line"></span><br><span class="line"><span class="comment">--授予 dba的角色</span></span><br><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> dakang;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> scott.emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      创建表:</span></span><br><span class="line"><span class="comment">         create table 表名(</span></span><br><span class="line"><span class="comment">           列名  列的类型 [列的约束],</span></span><br><span class="line"><span class="comment">           列名  列的类型  [列的约束]      </span></span><br><span class="line"><span class="comment">         );</span></span><br><span class="line"><span class="comment">      列的类型:</span></span><br><span class="line"><span class="comment">         varchar ,在Oracle中,目前是支持的, 但是不保证以后还支持</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         varchar2(长度) 可变字符长度    varchar2(10)  hello  占5个字符</span></span><br><span class="line"><span class="comment">         char(长度)   固定长度字符      char(10)      hello  占10个字符,用空格填充</span></span><br><span class="line"><span class="comment">         number(总长度,小数长度)     数字类型 --小数长度不能大于等于总长度</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         date                   年月日时分秒 2017/4/13 9:43:49</span></span><br><span class="line"><span class="comment">         timestamp              时间戳, 比date类型更加精确 13-APR-17 09.44.08.272000 AM +08:00</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         LONG/CLOB : 存放一本小说</span></span><br><span class="line"><span class="comment">         BLOB      : 存放电影  java 存进去,  再读取出来</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    使用子查询的方式创建表</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         create table 表名 as 查询语句; </span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">           注意: 只会复制表结构和表中的数据,不会复制列的约束     </span></span><br><span class="line"><span class="comment">                 如果查询语句有结果, 就是复制 表结构和数据</span></span><br><span class="line"><span class="comment">                 如果查询语句没有结果, 就是复制 表结构   </span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test1(</span><br><span class="line">   name1 varchar2(<span class="number">10</span>),</span><br><span class="line">   name2 <span class="built_in">char</span>(<span class="number">10</span>),</span><br><span class="line">   age   <span class="built_in">number</span>(<span class="number">2</span>,<span class="number">3</span>)    </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test1(name1,name2) <span class="keyword">values</span>(<span class="string">'hello'</span>,<span class="string">'hello'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test1 <span class="keyword">where</span> name1 <span class="keyword">like</span> <span class="string">'hello'</span>; <span class="comment">--可以查询数据</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test1 <span class="keyword">where</span> name2 <span class="keyword">like</span> <span class="string">'hello'</span>; <span class="comment">--查不出数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test1(age) <span class="keyword">values</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">current_date</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">current_timestamp</span> <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  create table 表名 as 查询语句; 复制表     </span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> scott.emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> scott.emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--如果查询语句是没有任何的结果的</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> scott.emp <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp1 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> scott.emp <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    修改表:</span></span><br><span class="line"><span class="comment">       添加列</span></span><br><span class="line"><span class="comment">       修改列 vharchar2(10)</span></span><br><span class="line"><span class="comment">       删除列</span></span><br><span class="line"><span class="comment">       修改列名</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       重命名表   </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">  SQL分类:</span></span><br><span class="line"><span class="comment">       DDL : 数据定义语言, 修改的结构  alter create drop truncate</span></span><br><span class="line"><span class="comment">       DML :　数据操纵语言 , 操作表中数据 insert update delete</span></span><br><span class="line"><span class="comment">       DCL : 数据控制语言 , grant     </span></span><br><span class="line"><span class="comment">       DQL : select</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu(</span><br><span class="line">    stuid <span class="built_in">number</span>,</span><br><span class="line">    sname <span class="built_in">varchar</span>(<span class="number">10</span>)   </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加一列  </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> phone varchar2(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> (</span><br><span class="line">                          mobile varchar2(<span class="number">11</span>),</span><br><span class="line">                          sex    varchar2(<span class="number">2</span>)</span><br><span class="line">                     );</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改列的类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">modify</span> sex varchar2(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改列名 sex --- gender</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">rename</span> <span class="keyword">column</span> sex <span class="keyword">to</span> gender;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">drop</span> <span class="keyword">column</span> gender;</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改表名</span></span><br><span class="line"><span class="keyword">rename</span> stu <span class="keyword">to</span> student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   表的五大约束</span></span><br><span class="line"><span class="comment">   列的约束: 约束主要是用来约束表中数据的规则</span></span><br><span class="line"><span class="comment">     主键约束: primary key 不能为空, 必须唯一</span></span><br><span class="line"><span class="comment">     非空约束</span></span><br><span class="line"><span class="comment">     唯一约束</span></span><br><span class="line"><span class="comment">     检查约束 check(条件)  在mysql中是可以写的,但是mysql直接忽略了检查约束</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     外键约束:</span></span><br><span class="line"><span class="comment">          主要是用来约束从表A中的记录,必须是存在于主表B中</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--男,女,人妖</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">    stuid <span class="built_in">number</span> primary <span class="keyword">key</span>,</span><br><span class="line">    sname varchar2(<span class="number">10</span>) <span class="keyword">unique</span>,</span><br><span class="line">    age   varchar2(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    gender varchar2(<span class="number">4</span>) <span class="keyword">check</span>( gender <span class="keyword">in</span> (<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'人妖'</span>))</span><br><span class="line">);</span><br><span class="line"><span class="comment">--主键约束违反</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'张三'</span>,<span class="string">'31'</span>,<span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'李四'</span>,<span class="string">'31'</span>,<span class="string">'男'</span>);</span><br><span class="line"><span class="comment">--唯一约束违反</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'徐立'</span>,<span class="string">'31'</span>,<span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'徐立'</span>,<span class="string">'31'</span>,<span class="string">'男'</span>);</span><br><span class="line"><span class="comment">--非空约束</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'徐立'</span>,<span class="literal">null</span>,<span class="string">'男'</span>);</span><br><span class="line"><span class="comment">--检查约束</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'徐立'</span>,<span class="string">'31'</span>,<span class="string">'男'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'徐立'</span>,<span class="string">'31'</span>,<span class="string">'妖'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     商品分类,商品表</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--商品分类表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">category</span>(</span><br><span class="line">       cid <span class="built_in">number</span> primary <span class="keyword">key</span>,</span><br><span class="line">       cname varchar2(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个商品表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">       pid <span class="built_in">number</span> primary <span class="keyword">key</span>,</span><br><span class="line">       pname varchar2(<span class="number">20</span>),</span><br><span class="line">       cno <span class="built_in">number</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'手机数码'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">'锤子'</span>,<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--添加外键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> product <span class="keyword">add</span> foreign <span class="keyword">key</span>(cno) <span class="keyword">references</span> <span class="keyword">category</span>(cid);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">'锤子'</span>,<span class="number">11</span>);<span class="comment">--插入失败</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--1.首先主表中必须存在11号, 先往主表中插入数据,再往从表中插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'电脑办公'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="number">11</span>,<span class="string">'外星人'</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除Category</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">category</span>; <span class="comment">--表中记录被外键关联无法删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--强制删除表(不建议使用) : 先删除外键关联表的外键约束,然后再删除自己, 先删除product的外键约束,再删除category</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">category</span> <span class="keyword">cascade</span> <span class="keyword">constraint</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--级联删除</span></span><br><span class="line"><span class="comment">----添加外键约束,使用级联约束  ,在删除的时候,使用级联删除</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> product <span class="keyword">add</span> foreign <span class="keyword">key</span>(cno) <span class="keyword">references</span> <span class="keyword">category</span>(cid) <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'电脑办公'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="number">11</span>,<span class="string">'外星人'</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--级联删除 : 首先去从表中找有没有 关联数据, 如果在从表中找到关联数据,先删除从表中关联数据,然后再删除表中的数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">category</span> <span class="keyword">where</span> cid = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">category</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> product;</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> product;</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> <span class="keyword">category</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     插入数据:</span></span><br><span class="line"><span class="comment">         insert into 表名 values(所有列的值都要对应写上)</span></span><br><span class="line"><span class="comment">         insert into 表名(列1,列2) values(值1,值2);</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">     使用子查询插入数据</span></span><br><span class="line"><span class="comment">         insert into 表名 查询语句</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--将emp中10号部门的员工信息,插入到emp1中</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp1 <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     更新数据</span></span><br><span class="line"><span class="comment">       update 表名 set 列名 = 列的值  [where 条件]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">update</span> emp1 <span class="keyword">set</span> ename=<span class="string">'HUAAN'</span> <span class="keyword">where</span> ename = <span class="string">'KING'</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     删除数据:</span></span><br><span class="line"><span class="comment">       delete from 表名  [where 条件]</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       delete和truncate 区别</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">       delete:                 truncate:</span></span><br><span class="line"><span class="comment">        DML                    DDL</span></span><br><span class="line"><span class="comment">        逐条删除               先删除表再创建表</span></span><br><span class="line"><span class="comment">        支持事务操作           不支持事务操作,</span></span><br><span class="line"><span class="comment">                               执行效率要高  </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp1 <span class="keyword">where</span> empno=<span class="number">7839</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   事务: 就是一系列的操作,要么都成功,要么都失败</span></span><br><span class="line"><span class="comment">       四大特性: 原子性,隔离性,持久性,一致性</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">       如果不考虑隔离级别: 脏读,虚读,不可重复读</span></span><br><span class="line"><span class="comment">            MYSQL隔离级别: READ UNCOMMITTED , READ COMMITTED, REPEATABLE READ, SERIALIAZABLE</span></span><br><span class="line"><span class="comment">            ORACLE隔离级别: READ COMMITTED SERIALIZABLE READ ONLY </span></span><br><span class="line"><span class="comment">                        默认隔离级别: READ COMMITTED</span></span><br><span class="line"><span class="comment">                        </span></span><br><span class="line"><span class="comment">      提交 : commit</span></span><br><span class="line"><span class="comment">      事务的保存点/回滚点: savepoint 保存点的名称</span></span><br><span class="line"><span class="comment">      回滚: rollback</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> louti(</span><br><span class="line">   lou <span class="built_in">number</span> primary <span class="keyword">key</span>    </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">savepoint</span> dangban;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">5</span>); <span class="comment">--主键约束会发生异常</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> dangban</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">4</span>);</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">5</span>);</span><br><span class="line">  <span class="keyword">savepoint</span> dangban;</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">5</span>);  <span class="comment">--这行代码会发生异常</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> louti <span class="keyword">values</span>(<span class="number">6</span>);</span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line">exception  <span class="comment">--捕获异常</span></span><br><span class="line">  when others then</span><br><span class="line">     <span class="keyword">rollback</span> <span class="keyword">to</span> dangban;</span><br><span class="line">     <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> louti;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      视图: 是对查询结果的一个封装</span></span><br><span class="line"><span class="comment">      视图里面所有的数据,都是来自于它查询的那张表,视图本身不存储任何数据</span></span><br><span class="line"><span class="comment">          1.能够封装复杂的查询结果</span></span><br><span class="line"><span class="comment">          2.屏蔽表中的细节</span></span><br><span class="line"><span class="comment">       语法: </span></span><br><span class="line"><span class="comment">          create [or replace] view 视图的名称 as 查询语句 [ with read only]</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">       注意: 通常不要通过视图去修改,视图创建的时候,通常要加上with read only</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> view_test1 <span class="keyword">as</span> <span class="keyword">select</span> ename,job,mgr <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--通过视图修改数据</span></span><br><span class="line"><span class="keyword">update</span> view_test1 <span class="keyword">set</span> ename=<span class="string">'SMITH2'</span> <span class="keyword">where</span> ename = <span class="string">'SMITH'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个只读视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> view_test2 <span class="keyword">as</span> <span class="keyword">select</span> ename,job,mgr <span class="keyword">from</span> emp <span class="keyword">with</span> <span class="keyword">read</span> <span class="keyword">only</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> view_test2 <span class="keyword">set</span> ename=<span class="string">'SMITH3'</span> <span class="keyword">where</span> ename = <span class="string">'SMITH2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--视图封装复杂的查询语句</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> view_test3 <span class="keyword">as</span> <span class="keyword">select</span></span><br><span class="line">      <span class="keyword">sum</span>(cc) <span class="string">"TOTAL"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1980'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1980"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1981'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1981"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1982'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1982"</span>,</span><br><span class="line">      <span class="keyword">sum</span>(<span class="keyword">case</span> yy <span class="keyword">when</span> <span class="string">'1987'</span> <span class="keyword">then</span> cc <span class="keyword">end</span>) <span class="string">"1987"</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">      (<span class="keyword">select</span>  to_char(hiredate,<span class="string">'yyyy'</span>) yy,<span class="keyword">count</span>(<span class="number">1</span>) cc <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span>  to_char(hiredate,<span class="string">'yyyy'</span>)) tt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--同义词的概念</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">synonym</span> dept <span class="keyword">for</span> view_test3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">synonym</span> yuangong <span class="keyword">for</span> view_test2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> yuangong;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> view_test3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> view_test2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    序列: 生成类似于 auto_increment 这种ID自动增长 1,2,3,4,5....</span></span><br><span class="line"><span class="comment">       auto_increment 这个是mysql  </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       语法:</span></span><br><span class="line"><span class="comment">           create sequence 序列的名称</span></span><br><span class="line"><span class="comment">           start with 从几开始</span></span><br><span class="line"><span class="comment">           increment by 每次增长多少</span></span><br><span class="line"><span class="comment">           maxvalue 最大值 | nomaxvalue</span></span><br><span class="line"><span class="comment">           minvalue 最小值 | nominvalue</span></span><br><span class="line"><span class="comment">           cycle | nocycle  是否循环    1,2,3,1,2,3</span></span><br><span class="line"><span class="comment">           cache 缓存的数量3 | nocache  1,2,3,4,5,6 </span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">      如何从序列获取值</span></span><br><span class="line"><span class="comment">          currval : 当前值</span></span><br><span class="line"><span class="comment">          nextval : 下一个值</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">               注意: currval 需要在调用nextval之后才能使用      </span></span><br><span class="line"><span class="comment">               </span></span><br><span class="line"><span class="comment">               永不回头,往下取数据, 无论发生异常, 回滚   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--创建一个 1,3,5,7,9......30 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq_test1</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">2</span></span><br><span class="line">maxvalue <span class="number">30</span></span><br><span class="line"><span class="keyword">cycle</span></span><br><span class="line"><span class="keyword">cache</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> seq_test1.nextval <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">select</span> seq_test1.currval <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--序列用的最多的一种写法</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq_test2;</span><br><span class="line"><span class="keyword">select</span> seq_test2.nextval <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq_test3</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">2</span></span><br><span class="line">maxvalue <span class="number">30</span></span><br><span class="line"><span class="keyword">minvalue</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">cycle</span></span><br><span class="line"><span class="keyword">cache</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> seq_test3.nextval <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    索引:相当于是一本书的目录,能够提高我们的查询效率</span></span><br><span class="line"><span class="comment">       如果某一列,你经常用来作为查询条件,那么就有必要创建索引,数据量比较的情况</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       语法: </span></span><br><span class="line"><span class="comment">             create index 索引的名称 on 表名(列)   </span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">       注意:主键约束自带主键索引, 唯一约束自带唯一索引</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       索引原理: btree   balance Tree 平衡二叉树</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">             如果某列作为查询条件的时候,可以提高查询效率,但是修改的时候,会变慢</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">             索引创建好之后,过了一段,DBA都会去做重构索引</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">       SQL调优:</span></span><br><span class="line"><span class="comment">             1.查看执行计划F5</span></span><br><span class="line"><span class="comment">             2. 分析里面的cost 和 影响行数, 想办法降低            </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--五百万数据测试</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> wubaiwan(</span><br><span class="line">      <span class="keyword">name</span> varchar2(<span class="number">30</span>),</span><br><span class="line">      address varchar2(<span class="number">20</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> wubaiwan <span class="keyword">values</span>(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--插入500000万条数据</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5000000</span> <span class="keyword">loop</span></span><br><span class="line">       <span class="keyword">insert</span> <span class="keyword">into</span> wubaiwan <span class="keyword">values</span>(<span class="string">'姓名'</span>||i,<span class="string">'地址'</span>||i);</span><br><span class="line">     <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">     <span class="keyword">commit</span>;  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--在没有添加索引的情况下,去查询  name='姓名3000000'  --2.985</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wubaiwan <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'姓名3000000'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建索引 name 再去查询 name='姓名3000000'</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> ind_wubaiwan <span class="keyword">on</span> wubaiwan(<span class="keyword">name</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wubaiwan <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'姓名3000000'</span>;  <span class="comment">--0.016</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--在没有添加复合索引的情况下,再去查询 name='姓名3000000' and '地址3000000'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wubaiwan <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'姓名3000000'</span> <span class="keyword">and</span> address=<span class="string">'地址3000000'</span>; <span class="comment">--0.032</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建复合索引的情况下, 再去查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> ind_wubaiwan2 <span class="keyword">on</span> wubaiwan(<span class="keyword">name</span>,address);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wubaiwan <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'姓名3000000'</span> <span class="keyword">and</span> address=<span class="string">'地址3000000'</span>; <span class="comment">--0.015</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     DDL表空间操作</span></span><br><span class="line"><span class="comment">         创建表空间</span></span><br><span class="line"><span class="comment">         创建用户</span></span><br><span class="line"><span class="comment">         授权</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         创建表</span></span><br><span class="line"><span class="comment">              子查询创建表</span></span><br><span class="line"><span class="comment">         修改表 : 添加列,删除列,修改列,修改列名, 修改表名</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         约束:</span></span><br><span class="line"><span class="comment">             主键约束,唯一约束,非空约束,检查约束,外键约束</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">             外键约束:</span></span><br><span class="line"><span class="comment">               强制删除</span></span><br><span class="line"><span class="comment">               级联删除</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">     DML表中数据:</span></span><br><span class="line"><span class="comment">         插入数据</span></span><br><span class="line"><span class="comment">             子查询插入数据</span></span><br><span class="line"><span class="comment">         更新数据</span></span><br><span class="line"><span class="comment">         删除数据: delete 和 truncate</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         事务操作:</span></span><br><span class="line"><span class="comment">               savepoint 保存点</span></span><br><span class="line"><span class="comment">               rollback to 保存点</span></span><br><span class="line"><span class="comment">          ORACLE事务隔离级别  : READ COMMITTED </span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">     视图: 就像窗户一样, 封装查询结果 , 通常视图创建只读视图</span></span><br><span class="line"><span class="comment">     序列: 主要是用来实现ID自增长 </span></span><br><span class="line"><span class="comment">     索引: 相当于是书的目录,能够提高查询效率, 原理 平衡二叉树, 每隔一段时间DBA都需要去重建索引</span></span><br><span class="line"><span class="comment">     同义词: create synonym 名称 for 对象的名称          </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     PLSQL编程 : procedure Language 过程语言 Oracle对SQL的一个扩展</span></span><br><span class="line"><span class="comment">             让我们能够像在java中一样写 if else else if 条件, 还可以编写循环逻辑 for while</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">             declare</span></span><br><span class="line"><span class="comment">                --声明变量</span></span><br><span class="line"><span class="comment">                变量名 变量类型;</span></span><br><span class="line"><span class="comment">                变量名 变量类型 := 初始值;</span></span><br><span class="line"><span class="comment">                  vsal emp.sal%type;  --引用型的变量  </span></span><br><span class="line"><span class="comment">                  vrow emp%rowtype;   --声明记录型变量          </span></span><br><span class="line"><span class="comment">             begin</span></span><br><span class="line"><span class="comment">                --业务逻辑</span></span><br><span class="line"><span class="comment">             end;</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">             dbms_output.put_line()相当于java中 syso </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   i varchar2(<span class="number">10</span>) := <span class="string">'张三'</span>;          </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(i);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询7369的工资,并且打印出来</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  vsal emp.sal%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--将查询出的结果赋值给vsal</span></span><br><span class="line">  <span class="keyword">select</span> sal <span class="keyword">into</span> vsal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7369</span>;</span><br><span class="line">  </span><br><span class="line">  dbms_output.put_line(vsal);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询7369的员工信息,并且打印出来</span></span><br><span class="line"> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7369</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  vrow emp%rowtype;      </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">into</span> vrow <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7369</span>;</span><br><span class="line">  </span><br><span class="line">  dbms_output.put_line('姓名:'||vrow.ename || '工资'|| vrow.sal);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  PL条件判断</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     if then</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     elsif then</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">     else </span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     end if;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--根据不同年纪,输出相关内容</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   age <span class="built_in">number</span> := &amp;aaa;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> age &lt; <span class="number">18</span> <span class="keyword">then</span></span><br><span class="line">     dbms_output.put_line(<span class="string">'小屁孩'</span>);</span><br><span class="line">  elsif age&gt;=18 and age &lt;=24 then</span><br><span class="line">     dbms_output.put_line('年轻人');</span><br><span class="line">  elsif age&gt;24 and age &lt; 40 then</span><br><span class="line">    dbms_output.put_line('老司机');</span><br><span class="line">  else </span><br><span class="line">      dbms_output.put_line('老年人');    </span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  循环操作</span></span><br><span class="line"><span class="comment">  while 循环</span></span><br><span class="line"><span class="comment">      while 条件 loop</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">      end loop;</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">  for循环</span></span><br><span class="line"><span class="comment">      for 变量  in [reverse] 起始值..结束值 loop</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">      end loop;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  loop循环  </span></span><br><span class="line"><span class="comment">      loop</span></span><br><span class="line"><span class="comment">        exit when 条件</span></span><br><span class="line"><span class="comment">      end loop;</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--输出1~10</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i <span class="built_in">number</span> :=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">while</span> i&lt;=<span class="number">10</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i := i+1;    </span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--输出1~10</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">reverse</span> <span class="number">1.</span><span class="number">.10</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--输出1~10</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   i <span class="built_in">number</span> :=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">loop</span></span><br><span class="line">     <span class="keyword">exit</span> <span class="keyword">when</span> i&gt;<span class="number">10</span>;</span><br><span class="line">      dbms_output.put_line(i);  </span><br><span class="line">     i := i+1;</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment"> *****</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment">   *   </span></span><br><span class="line"><span class="comment">输出 m  </span></span><br><span class="line"><span class="comment">   x : [-m,m]</span></span><br><span class="line"><span class="comment">   y : [-m,m]</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   输出所有满足条件的 : abs(y)+abs(x) &lt;=m</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   m取值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--使用PLSQL输出菱形</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   m <span class="built_in">number</span> := <span class="number">10</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">for</span> x <span class="keyword">in</span> -m..m <span class="keyword">loop</span></span><br><span class="line">     <span class="keyword">for</span> y <span class="keyword">in</span> -m..m <span class="keyword">loop</span></span><br><span class="line">       <span class="keyword">if</span> <span class="keyword">abs</span>(y) + <span class="keyword">abs</span>(x) &lt;= m <span class="keyword">then</span></span><br><span class="line">         dbms_output.put(<span class="string">'*'</span>);</span><br><span class="line">       else</span><br><span class="line">         dbms_output.put(' ');</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">if</span>;      </span><br><span class="line">     <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">     dbms_output.new_line();</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">loop</span>;  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用PLSQL输出三角形,只要是三个角</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   m <span class="built_in">number</span> := <span class="number">10</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">for</span> x <span class="keyword">in</span> <span class="keyword">reverse</span> -m..m <span class="keyword">loop</span></span><br><span class="line">     <span class="keyword">for</span> y <span class="keyword">in</span> -m..m <span class="keyword">loop</span></span><br><span class="line">       <span class="keyword">if</span> <span class="keyword">abs</span>(y) + <span class="keyword">abs</span>(x) &lt;= m <span class="keyword">and</span> x&gt;=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">         dbms_output.put(<span class="string">'*'</span>);</span><br><span class="line">       else</span><br><span class="line">         dbms_output.put(' ');</span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">if</span>;      </span><br><span class="line">     <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">     dbms_output.new_line();</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">loop</span>;  </span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><h2 id="第四天"><a href="#第四天" class="headerlink" title="第四天:"></a>第四天:</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  序列: ORACLE使用来模拟ID自动增长的</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq_test4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test2(</span><br><span class="line">   tid <span class="built_in">number</span> primary <span class="keyword">key</span>,</span><br><span class="line">   tname varchar2(<span class="number">10</span>)    </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test2 <span class="keyword">values</span>(seq_test4.nextval,<span class="string">'张三'</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       PLSQL编程: 过程语言,编写一些复杂业务逻辑  </span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       输出星号:</span></span><br><span class="line"><span class="comment">                abs(y) + abs(x) &lt;= m   </span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">       vsal  emp.sal%type --引用型变量</span></span><br><span class="line"><span class="comment">       row  emp%rowtype  --记录型变量</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       select sal into vsal from emp where empno=7788;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   m <span class="built_in">number</span> := <span class="number">3</span>;             </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">for</span> y <span class="keyword">in</span> -m..m <span class="keyword">loop</span></span><br><span class="line">     <span class="keyword">for</span> x <span class="keyword">in</span> -m..m <span class="keyword">loop</span></span><br><span class="line">         <span class="keyword">if</span> <span class="keyword">abs</span>(y) + <span class="keyword">abs</span>(x) &lt;= m <span class="keyword">then</span></span><br><span class="line">            dbms_output.put(<span class="string">'*'</span>);</span><br><span class="line">         else  </span><br><span class="line">            dbms_output.put(' ');  </span><br><span class="line">         <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">     <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">     dbms_output.new_line();</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">loop</span>;  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   游标(光标): 是用来操作查询结果集,相当于是JDBC中ResultSet</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       语法: cursor 游标名[(参数名 参数类型)] is 查询结果集</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">       开发步骤:</span></span><br><span class="line"><span class="comment">           1. 声明游标</span></span><br><span class="line"><span class="comment">           2. 打开游标       open 游标名</span></span><br><span class="line"><span class="comment">           3. 从游标中取数据  fetch 游标名 into 变量</span></span><br><span class="line"><span class="comment">                         游标名%found :找到数据</span></span><br><span class="line"><span class="comment">                         游标名%notfound : 没有找到数据 </span></span><br><span class="line"><span class="comment">           4. 关闭游标       close 游标名</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">      系统引用游标</span></span><br><span class="line"><span class="comment">           1. 声明游标 : 游标名 sys_refcursor</span></span><br><span class="line"><span class="comment">           2. 打开游标: open 游标名 for 结果集</span></span><br><span class="line"><span class="comment">           3. 从游标中取数据</span></span><br><span class="line"><span class="comment">           4. 关闭游标</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">     for循环遍历游标:</span></span><br><span class="line"><span class="comment">           不需要声明额外变量</span></span><br><span class="line"><span class="comment">           不需要打开游标</span></span><br><span class="line"><span class="comment">           不需要关闭游标      </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--输出员工表中所有的员工姓名和工资(不带参数游标)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   游标:所有员工</span></span><br><span class="line"><span class="comment">   声明一个变量,用来记录一行数据  %rowtype</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   <span class="comment">--游标</span></span><br><span class="line">   <span class="keyword">cursor</span> vrows <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line">   <span class="comment">--s声明变量,记录一行数据</span></span><br><span class="line">   vrow emp%rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="comment">--1.打开游标  </span></span><br><span class="line">   <span class="keyword">open</span> vrows;</span><br><span class="line">   <span class="comment">--2.从游标提取数据</span></span><br><span class="line">   <span class="comment">--循环取数据</span></span><br><span class="line">   loop</span><br><span class="line">       fetch vrows into vrow; </span><br><span class="line">       exit when vrows%notfound;  </span><br><span class="line">       dbms_output.put_line('姓名:'||vrow.ename ||' 工资: ' || vrow.sal);</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">   <span class="comment">--3.关闭游标</span></span><br><span class="line">   close vrows;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--输出指定部门下的员工姓名和工资</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   游标: 指定部门的所有员工</span></span><br><span class="line"><span class="comment">   声明一个变量记录一行数据</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   <span class="comment">--声明游标</span></span><br><span class="line">   <span class="keyword">cursor</span> vrows(dno <span class="built_in">number</span>) <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = dno;</span><br><span class="line">   <span class="comment">--声明变量</span></span><br><span class="line">   vrow emp%rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--1.打开游标 , 指定10号部门</span></span><br><span class="line">  <span class="keyword">open</span> vrows(<span class="number">10</span>);</span><br><span class="line">  <span class="comment">--2. 循环遍历,取数据</span></span><br><span class="line">  loop</span><br><span class="line">     fetch vrows into vrow;</span><br><span class="line">     exit when vrows%notfound;    </span><br><span class="line">      dbms_output.put_line('姓名:'||vrow.ename ||' 工资: ' || vrow.sal);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  close vrows;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--系统引用游标</span></span><br><span class="line"><span class="comment">--输出员工表中所有的员工姓名和工资</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="comment">--声明系统引用游标</span></span><br><span class="line">  vrows sys_refcursor;</span><br><span class="line">  <span class="comment">--声明一个变量</span></span><br><span class="line">  vrow emp%rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--1.打开游标</span></span><br><span class="line">  <span class="keyword">open</span> vrows <span class="keyword">for</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line">  <span class="comment">--2.取数据</span></span><br><span class="line">  loop</span><br><span class="line">    fetch vrows into vrow;</span><br><span class="line">    exit when vrows%notfound;</span><br><span class="line">     dbms_output.put_line('姓名:'||vrow.ename ||' 工资: ' || vrow.sal);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  close vrows;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--扩展内容----使用for循环遍历游标</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="comment">--声明一个游标</span></span><br><span class="line">  <span class="keyword">cursor</span> vrows <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> vrow <span class="keyword">in</span> vrows <span class="keyword">loop</span></span><br><span class="line">     dbms_output.put_line(<span class="string">'姓名:'</span>||vrow.ename ||<span class="string">' 工资: '</span> || vrow.sal || <span class="string">'工作:'</span>|| vrow.job);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--按照员工工作给所有员工涨工资,总裁涨1000,经理涨800,其他人涨400</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    游标 : 所有员工</span></span><br><span class="line"><span class="comment">    声明一个记录一行数据   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   <span class="comment">--声明游标</span></span><br><span class="line">   <span class="keyword">cursor</span> vrows <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line">   <span class="comment">--声明一个变量</span></span><br><span class="line">   vrow emp%rowtype; </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--1.打开游标</span></span><br><span class="line">  <span class="keyword">open</span> vrows;</span><br><span class="line">  <span class="comment">--2.循环取数据</span></span><br><span class="line">  loop</span><br><span class="line">       <span class="comment">--取数据</span></span><br><span class="line">       fetch vrows into vrow;</span><br><span class="line">       <span class="comment">--退出条件</span></span><br><span class="line">       exit when vrows%notfound;  </span><br><span class="line">       <span class="comment">--根据不同的职位,涨工资 总裁涨1000,经理涨800,其他人涨400</span></span><br><span class="line">       if vrow.job = 'PRESIDENT' then</span><br><span class="line">          <span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal + <span class="number">1000</span> <span class="keyword">where</span> empno = vrow.empno;</span><br><span class="line">       elsif vrow.job = 'MANAGER' then</span><br><span class="line">          <span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal + <span class="number">800</span> <span class="keyword">where</span> empno = vrow.empno;</span><br><span class="line">       else</span><br><span class="line">          <span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal + <span class="number">400</span> <span class="keyword">where</span> empno = vrow.empno; </span><br><span class="line">       <span class="keyword">end</span> <span class="keyword">if</span>;       </span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="comment">--3.关闭游标</span></span><br><span class="line">  close vrows;</span><br><span class="line">  <span class="comment">--4.提交事务</span></span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   例外:(意外)程序运行的过程发生异常,相当于是JAVA中的异常</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   declare</span></span><br><span class="line"><span class="comment">       --声明变量</span></span><br><span class="line"><span class="comment">   begin</span></span><br><span class="line"><span class="comment">       --业务逻辑</span></span><br><span class="line"><span class="comment">   exception</span></span><br><span class="line"><span class="comment">       --处理异常</span></span><br><span class="line"><span class="comment">       when 异常1 then</span></span><br><span class="line"><span class="comment">         ...</span></span><br><span class="line"><span class="comment">       when 异常2 then</span></span><br><span class="line"><span class="comment">         ...</span></span><br><span class="line"><span class="comment">       when others then</span></span><br><span class="line"><span class="comment">         ...处理其它异常</span></span><br><span class="line"><span class="comment">   end;</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   zero_divide : 除零异常</span></span><br><span class="line"><span class="comment">   value_error : 类型转换异常</span></span><br><span class="line"><span class="comment">   too_many_rows : 查询出多行记录,但是赋值给了rowtype记录一行数据变量</span></span><br><span class="line"><span class="comment">   no_data_found : 没有找到数据</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   自定义异常:</span></span><br><span class="line"><span class="comment">       异常名  exception;</span></span><br><span class="line"><span class="comment">       raise 异常名          </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   vi <span class="built_in">number</span>;</span><br><span class="line">   vrow emp%rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="comment">--vi := 8/0;  </span></span><br><span class="line">   <span class="comment">--vi := 'aaa';</span></span><br><span class="line">   <span class="comment">--select * into vrow from emp;</span></span><br><span class="line">   <span class="keyword">select</span> * <span class="keyword">into</span> vrow <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">1234567</span>;</span><br><span class="line">exception</span><br><span class="line">  when zero_divide then</span><br><span class="line">    dbms_output.put_line('发生了除零异常');</span><br><span class="line">  when value_error then</span><br><span class="line">     dbms_output.put_line('发生了类型转换异常');</span><br><span class="line">  when too_many_rows then</span><br><span class="line">    dbms_output.put_line(' 查询出多行记录,但是赋值给了rowtype记录一行数据变量');</span><br><span class="line">  when no_data_found then</span><br><span class="line">    dbms_output.put_line('没有找到数据异常');</span><br><span class="line">  when others then</span><br><span class="line">     dbms_output.put_line('发生了其它异常' || sqlerrm);     </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询指定编号的员工,如果没有找到,则抛出自定义的异常</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     --错误的演示</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     1.声明一个变量 %rowtype</span></span><br><span class="line"><span class="comment">     2.查询员工信息,保存起来</span></span><br><span class="line"><span class="comment">     3.判断员工信息是否为空</span></span><br><span class="line"><span class="comment">     4. 如果是 则抛出异常</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="comment">--   1.声明一个变量 %rowtype</span></span><br><span class="line">  vrow emp%rowtype;</span><br><span class="line">  <span class="comment">--2 .声明一个自定义的异常</span></span><br><span class="line">  no_emp exception;  </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--查询员工信息,保存起来</span></span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">into</span> vrow <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">8888</span>;   <span class="comment">--抛出异常</span></span><br><span class="line">  </span><br><span class="line">  if vrow.sal is null then</span><br><span class="line">    raise no_emp; <span class="comment">--抛出自定义的异常</span></span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">exception</span><br><span class="line">  when no_emp then</span><br><span class="line">     dbms_output.put_line('输出了自定义的异常');  </span><br><span class="line">  when others then</span><br><span class="line">     dbms_output.put_line('输出了其它异常'||sqlerrm);  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询指定编号的员工,如果没有找到,则抛出自定义的异常</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     游标来判断</span></span><br><span class="line"><span class="comment">       %found %notfound</span></span><br><span class="line"><span class="comment">    声明一个游标</span></span><br><span class="line"><span class="comment">    声明一个变量,记录数据</span></span><br><span class="line"><span class="comment">    从游标中取记录</span></span><br><span class="line"><span class="comment">       如果有,则不管它</span></span><br><span class="line"><span class="comment">       如果没有就抛出自定义的异常</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="comment">--声明游标</span></span><br><span class="line">  <span class="keyword">cursor</span> vrows <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">8888</span>;   </span><br><span class="line">  <span class="comment">--声明一个记录型变量</span></span><br><span class="line">  vrow emp%rowtype;</span><br><span class="line">  <span class="comment">--声明一个自定义异常</span></span><br><span class="line">  no_emp exception;  </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--1.打开游标</span></span><br><span class="line">  <span class="keyword">open</span> vrows;</span><br><span class="line">  <span class="comment">--2.取数据</span></span><br><span class="line">  fetch vrows into vrow;</span><br><span class="line">  <span class="comment">--3.判断游标是否有数据</span></span><br><span class="line">  if vrows%notfound then</span><br><span class="line">    raise no_emp;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">  close vrows;</span><br><span class="line">exception</span><br><span class="line">  when no_emp then</span><br><span class="line">    dbms_output.put_line('发生了自定义的异常');</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    存储过程: 实际上是封装在服务器上一段PLSQL代码片断,已经编译好了的代码</span></span><br><span class="line"><span class="comment">              1.客户端取调用存储过程,执行效率就会非常高效</span></span><br><span class="line"><span class="comment">         语法:</span></span><br><span class="line"><span class="comment">              create [or replace] procedure 存储过程的名称(参数名 in|out 参数类型,参数名 in|out 参数类型)</span></span><br><span class="line"><span class="comment">              is | as</span></span><br><span class="line"><span class="comment">               --声明部分</span></span><br><span class="line"><span class="comment">              begin</span></span><br><span class="line"><span class="comment">               --业务逻辑 </span></span><br><span class="line"><span class="comment">              end; </span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">              </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--给指定员工涨薪,并打印涨薪前和涨薪后的工资</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    参数 : in 员工编号</span></span><br><span class="line"><span class="comment">    参数 : in 涨多少</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    声明一个变量 : 存储涨工资前的工资</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    查询出当前是多少</span></span><br><span class="line"><span class="comment">    打印涨薪前的工资</span></span><br><span class="line"><span class="comment">    更新工资</span></span><br><span class="line"><span class="comment">    打印涨薪后的工资          </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> proc_updatesal(vempno <span class="keyword">in</span> <span class="built_in">number</span>,vnum <span class="keyword">in</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">   <span class="comment">--声明变量.记录当前工资</span></span><br><span class="line">   vsal <span class="built_in">number</span>;    </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--查询当前的工资</span></span><br><span class="line">  <span class="keyword">select</span> sal <span class="keyword">into</span> vsal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = vempno;</span><br><span class="line">  <span class="comment">--输出涨薪前的工资</span></span><br><span class="line">  dbms_output.put_line('涨薪前:'||vsal);</span><br><span class="line">  <span class="comment">--更新工资</span></span><br><span class="line">  <span class="keyword">update</span> emp <span class="keyword">set</span> sal = vsal + vnum <span class="keyword">where</span> empno = vempno;</span><br><span class="line">  <span class="comment">--输出涨薪后的工资</span></span><br><span class="line">  dbms_output.put_line('涨薪后:'||(vsal+vnum));</span><br><span class="line">  <span class="comment">--提交</span></span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--方式1</span></span><br><span class="line"><span class="keyword">call</span> proc_updatesal(<span class="number">7788</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--方式2 用的最多的方式</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  proc_updatesal(<span class="number">7788</span>,<span class="number">-100</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  存储函数: 实际上是一段封装是Oracle服务器中的一段PLSQL代码片断,它是已经编译好了的代码片段</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        语法: </span></span><br><span class="line"><span class="comment">             create [or replace] function 存储函数的名称(参数名 in|out 参数类型,参数名 in|out 参数类型) return 参数类型</span></span><br><span class="line"><span class="comment">             is | as</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">             begin</span></span><br><span class="line"><span class="comment">               </span></span><br><span class="line"><span class="comment">             end;</span></span><br><span class="line"><span class="comment">        存储过程和函数的区别:</span></span><br><span class="line"><span class="comment">             1.它们本质上没有区别</span></span><br><span class="line"><span class="comment">             2.函数存在的意义是给过程调用   存储过程里面调用存储函数</span></span><br><span class="line"><span class="comment">             3.函数可以在sql语句里面直接调用</span></span><br><span class="line"><span class="comment">             4.存储过程能实现的,存储函数也能实现,存储函数能实现的,过程也能实现</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">        默认是 in       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--查询指定员工的年薪</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    参数 : 员工的编号</span></span><br><span class="line"><span class="comment">    返回 : 年薪          </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> func_getsal(vempno <span class="built_in">number</span>) <span class="keyword">return</span> <span class="built_in">number</span></span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  <span class="comment">--声明变量.保存年薪</span></span><br><span class="line">  vtotalsal <span class="built_in">number</span>;     </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal*<span class="number">12</span> + nvl(comm,<span class="number">0</span>) <span class="keyword">into</span> vtotalsal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = vempno;</span><br><span class="line">  return vtotalsal;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用存储函数</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  vsal <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  vsal := func_getsal(<span class="number">7788</span>);</span><br><span class="line">  dbms_output.put_line(vsal);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询员工的姓名,和他的年薪</span></span><br><span class="line"><span class="keyword">select</span> ename,func_getsal(empno) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">--查询员工的姓名和部门的名称</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询指定员工的年薪--存储过程来实现</span></span><br><span class="line"><span class="comment">--参数: 员工编号</span></span><br><span class="line"><span class="comment">--输出: 年薪</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> proc_gettotalsal(vempno <span class="keyword">in</span> <span class="built_in">number</span>,vtotalsal <span class="keyword">out</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">       </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal*<span class="number">12</span> + nvl(comm,<span class="number">0</span>) <span class="keyword">into</span> vtotalsal <span class="keyword">from</span> emp <span class="keyword">where</span> empno = vempno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  vtotal <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  proc_gettotalsal(<span class="number">7788</span>,vtotal);</span><br><span class="line">  dbms_output.put_line('年薪:'||vtotal);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *  <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">8888</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    JAVA调用存储过程</span></span><br><span class="line"><span class="comment">       JDBC的开发步骤:</span></span><br><span class="line"><span class="comment">          1.导入驱动包</span></span><br><span class="line"><span class="comment">          2.注册驱动</span></span><br><span class="line"><span class="comment">          3.获取连接</span></span><br><span class="line"><span class="comment">          4.获取执行SQL的statement</span></span><br><span class="line"><span class="comment">          5.封装参数</span></span><br><span class="line"><span class="comment">          6.执行SQL</span></span><br><span class="line"><span class="comment">          7.获取结果</span></span><br><span class="line"><span class="comment">          8.释放资源   </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   封装一个存储过程 : 输出所有表中的记录</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   输出类型 : 游标  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> proc_getemps(vrows <span class="keyword">out</span> sys_refcursor)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--1.打开游标, 给游标赋值</span></span><br><span class="line">  <span class="keyword">open</span> vrows <span class="keyword">for</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   触发器: 当用户执行了 insert | update | delete 这些操作之后, 可以触发一系列其它的动作/业务逻辑</span></span><br><span class="line"><span class="comment">       作用 : </span></span><br><span class="line"><span class="comment">            在动作执行之前或者之后,触发业务处理逻辑</span></span><br><span class="line"><span class="comment">            插入数据,做一些校验</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">       语法:</span></span><br><span class="line"><span class="comment">           create [or replace] trigger 触发器的名称</span></span><br><span class="line"><span class="comment">           before | after</span></span><br><span class="line"><span class="comment">           insert | update | delete </span></span><br><span class="line"><span class="comment">           on 表名</span></span><br><span class="line"><span class="comment">           [for each row]</span></span><br><span class="line"><span class="comment">           declare</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">           begin</span></span><br><span class="line"><span class="comment">             </span></span><br><span class="line"><span class="comment">           end;</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">       触发器的分类:</span></span><br><span class="line"><span class="comment">           语句级触发器:   不管影响多少行, 都只会执行一次</span></span><br><span class="line"><span class="comment">           </span></span><br><span class="line"><span class="comment">           行级触发器:     影响多少行,就触发多少次</span></span><br><span class="line"><span class="comment">                  :old  代表旧的记录, 更新前的记录</span></span><br><span class="line"><span class="comment">                  :new  代表的是新的记录</span></span><br><span class="line"><span class="comment">       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--新员工入职之后,输出一句话: 欢迎加入黑马程序员</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> tri_test1</span><br><span class="line"><span class="keyword">after</span></span><br><span class="line"><span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(<span class="string">'欢迎加入黑马程序员'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno,ename) <span class="keyword">values</span>(<span class="number">9527</span>,<span class="string">'HUAAN'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--数据校验, 星期六老板不在, 不能办理新员工入职</span></span><br><span class="line"><span class="comment">--在插入数据之前</span></span><br><span class="line"><span class="comment">--判断当前日期是否是周六</span></span><br><span class="line"><span class="comment">--如果是周六,就不能插入</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> tri_test2</span><br><span class="line"><span class="keyword">before</span></span><br><span class="line"><span class="keyword">insert</span> </span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"> <span class="comment">--声明变量</span></span><br><span class="line"> vday varchar2(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--查询当前</span></span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">trim</span>(to_char(<span class="keyword">sysdate</span>,<span class="string">'day'</span>)) <span class="keyword">into</span> vday <span class="keyword">from</span> dual;</span><br><span class="line">  <span class="comment">--判断当前日期:</span></span><br><span class="line">  if vday = 'saturday' then</span><br><span class="line">     dbms_output.put_line('老板不在,不能办理入职');</span><br><span class="line">     <span class="comment">--抛出系统异常</span></span><br><span class="line">     raise_application_error(-20001,'老板不在,不能办理入职');</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(empno,ename) <span class="keyword">values</span>(<span class="number">9528</span>,<span class="string">'HUAAN2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新所有的工资 输出一句话</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> tri_test3</span><br><span class="line"><span class="keyword">after</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(<span class="string">'更新了数据'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--判断员工涨工资后的工资一定要大于涨工资前的工资</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   200 --&gt; 100</span></span><br><span class="line"><span class="comment">   触发器 : before</span></span><br><span class="line"><span class="comment">      旧的工资 </span></span><br><span class="line"><span class="comment">      新的工资</span></span><br><span class="line"><span class="comment">      如果旧的工资大于新的工资 , 抛出异常,不让它执行成功   </span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">   触发器中不能提交事务,也不能回滚事务 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> tri_updatesal</span><br><span class="line"><span class="keyword">before</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> :old.sal &gt; :new.sal <span class="keyword">then</span></span><br><span class="line">    raise_application_error(<span class="number">-20002</span>,<span class="string">'旧的工资不能大于新的工资'</span>);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal - <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   模拟mysql中ID的自增属性 auto_increment </span></span><br><span class="line"><span class="comment">   insert into person(null,'张三');  </span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   触发器:</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   pid=1  insert  pid=1</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   序列 : create sequence seq_person_pid;       </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person(</span><br><span class="line">    pid <span class="built_in">number</span> primary <span class="keyword">key</span>,</span><br><span class="line">    pname varchar2(<span class="number">20</span>)   </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'张三'</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> seq_person_pid;</span><br><span class="line"></span><br><span class="line"><span class="comment">--触发器</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> tri_add_person_pid</span><br><span class="line"><span class="keyword">before</span></span><br><span class="line"><span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> person</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(:new.pname);</span><br><span class="line">  <span class="comment">--给新记录 pid 赋值</span></span><br><span class="line">  <span class="keyword">select</span> seq_person_pid.nextval <span class="keyword">into</span> :new.pid <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'张三'</span>); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> person;</span><br></pre></td></tr></table></figure></excerpt>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;无需证明什么,要做的唯有让自己更棒!&lt;/strong&gt;&lt;/p&gt;
 &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Oracle" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/Oracle/"/>
    
  </entry>
  
  <entry>
    <title>突破算法第11天-红黑树</title>
    <link href="https://github.com/SDIJJ/sdijj.github.io/2017/10/30/test2/"/>
    <id>https://github.com/SDIJJ/sdijj.github.io/2017/10/30/test2/</id>
    <published>2017-10-30T14:35:37.000Z</published>
    <updated>2018-10-04T03:07:31.302Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 累了选择休息而不是选择放弃!</strong> <excerpt in="" index="" |="" 首页摘要=""><br>红黑树<br><a id="more"></a></excerpt></p><p><the rest="" of="" contents="" |="" 余下全文=""><br><blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p></blockquote></the></p><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void main</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 累了选择休息而不是选择放弃!&lt;/strong&gt; &lt;excerpt in=&quot;&quot; index=&quot;&quot; |=&quot;&quot; 首页摘要=&quot;&quot;&gt;&lt;br&gt;红黑树&lt;br&gt;
    
    </summary>
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="开发工具" scheme="https://github.com/SDIJJ/sdijj.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
